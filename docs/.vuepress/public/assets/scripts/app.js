/*! For license information please see app-12cef005390eb4bff4a9.js.LICENSE.txt */
(()=>{var __webpack_modules__={38501:function(e,t){var i,n,o;!function(){"use strict";n=[],void 0===(o="function"==typeof(i=function(){var e="sans-serif",t="serif",i={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal",window},n=["display:block","position:absolute","top:-999px","left:-999px","font-size:48px","width:auto","height:auto","line-height:normal","margin:0","padding:0","font-variant:normal","white-space:nowrap"],o='<div style="%s" aria-hidden="true">AxmTYklsjo190QW</div>',r=function(){this.fontFamily="",this.appended=!1,this.serif=void 0,this.sansSerif=void 0,this.parent=void 0,this.options={}};return r.prototype.getMeasurements=function(){return{sansSerif:{width:this.sansSerif.offsetWidth,height:this.sansSerif.offsetHeight},serif:{width:this.serif.offsetWidth,height:this.serif.offsetHeight}}},r.prototype.load=function(){var i,r=new Date,s=this,a=s.serif,l=s.sansSerif,c=s.parent,u=s.appended,d=s.options,h=d.reference;function m(e){return n.concat(["font-weight:"+d.weight,"font-style:"+d.style]).concat("font-family:"+e).join(";")}var p=o.replace(/\%s/,m(e)),g=o.replace(/\%s/,m(t));function f(e,t,i){return Math.abs(e.width-t.offsetWidth)>i||Math.abs(e.height-t.offsetHeight)>i}c||(c=s.parent=d.window.document.createElement("div")),c.innerHTML=p+g,l=s.sansSerif=c.firstChild,a=s.serif=l.nextSibling,d.glyphs&&(l.innerHTML+=d.glyphs,a.innerHTML+=d.glyphs),function n(){h||(h=d.window.document.body),!u&&h&&(h.appendChild(c),u=s.appended=!0,i=s.getMeasurements(),l.style.fontFamily=s.fontFamily+", "+e,a.style.fontFamily=s.fontFamily+", "+t),u&&i&&(f(i.sansSerif,l,d.tolerance)||f(i.serif,a,d.tolerance))?d.success():(new Date).getTime()-r.getTime()>d.timeout?d.error():!u&&"requestAnimationFrame"in d.window?d.window.requestAnimationFrame(n):d.window.setTimeout(n,d.delay)}()},r.prototype.cleanFamilyName=function(e){return e.replace(/[\'\"]/g,"").toLowerCase()},r.prototype.cleanWeight=function(e){return""+({normal:"400",bold:"700"}[e]||e)},r.prototype.checkFontFaces=function(e){var t=this;t.options.window.document.fonts.forEach((function(i){t.cleanFamilyName(i.family)===t.cleanFamilyName(t.fontFamily)&&t.cleanWeight(i.weight)===t.cleanWeight(t.options.weight)&&i.style===t.options.style&&i.load().then((function(){t.options.success(i),t.options.window.clearTimeout(e)}))}))},r.prototype.init=function(e,t){var n;for(var o in i)t.hasOwnProperty(o)||(t[o]=i[o]);this.options=t,this.fontFamily=e,!t.glyphs&&"fonts"in t.window.document?(t.timeout&&(n=t.window.setTimeout((function(){t.error()}),t.timeout)),this.checkFontFaces(n)):this.load()},function(e,t){var i=new r;return i.init(e,t),i}})?i.apply(t,n):i)||(e.exports=o)}()},76990:function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,$,fullScreenApi;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}!function(e){e.version={versionStr:"2.3.1",major:parseInt("2",10),minor:parseInt("3",10),revision:parseInt("1",10)};var t,i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.isFunction=function(t){return"function"===e.type(t)},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isWindow=function(e){return e&&"object"===_typeof(e)&&"setInterval"in e},e.type=function(e){return null==e?String(e):i[n.call(e)]||"object"},e.isPlainObject=function(t){if(!t||"object"!==OpenSeadragon.type(t)||t.nodeType||e.isWindow(t))return!1;if(t.constructor&&!o.call(t,"constructor")&&!o.call(t.constructor.prototype,"isPrototypeOf"))return!1;var i;for(var n in t)i=n;return void 0===i||o.call(t,i)},e.isEmptyObject=function(e){for(var t in e)return!1;return!0},e.freezeObject=function(t){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(e){return e},e.freezeObject(t)},e.supportsCanvas=(t=document.createElement("canvas"),!(!e.isFunction(t.getContext)||!t.getContext("2d"))),e.isCanvasTainted=function(e){var t=!1;try{e.getContext("2d").getImageData(0,0,1,1)}catch(e){t=!0}return t},e.pixelDensityRatio=function(){if(e.supportsCanvas){var t=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return Math.max(i,1)/n}return 1}()}(OpenSeadragon),function($){$.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=arguments.length,l=!1,c=1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},c=2),"object"===_typeof(s)||OpenSeadragon.isFunction(s)||(s={}),a===c&&(s=this,--c);c<a;c++)if(null!==(e=arguments[c])||void 0!==e)for(t in e)i=s[t],s!==(n=e[t])&&(l&&n&&(OpenSeadragon.isPlainObject(n)||(o=OpenSeadragon.isArray(n)))?(o?(o=!1,r=i&&OpenSeadragon.isArray(i)?i:[]):r=i&&OpenSeadragon.isPlainObject(i)?i:{},s[t]=OpenSeadragon.extend(l,r,n)):void 0!==n&&(s[t]=n));return s};var isIOSDevice=function(){if("object"!==("undefined"==typeof navigator?"undefined":_typeof(navigator)))return!1;var e=navigator.userAgent;return"string"==typeof e&&(-1!==e.indexOf("iPhone")||-1!==e.indexOf("iPad")||-1!==e.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,degrees:0,opacity:1,preload:!1,compositeOperation:null,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(e,t){return function(){var i=arguments;return void 0===i&&(i=[]),t.apply(e,i)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e},getElementPosition:function(e){var t,i,n=new $.Point;for(i=getOffsetParent(e=$.getElement(e),t="fixed"==$.getElementStyle(e).position);i;)n.x+=e.offsetLeft,n.y+=e.offsetTop,t&&(n=n.plus($.getPageScroll())),i=getOffsetParent(e=i,t="fixed"==$.getElementStyle(e).position);return n},getElementOffset:function(e){var t,i,n=(e=$.getElement(e))&&e.ownerDocument,o={top:0,left:0};return n?(t=n.documentElement,"undefined"!==_typeof(e.getBoundingClientRect)&&(o=e.getBoundingClientRect()),i=n==n.window?n:9===n.nodeType&&(n.defaultView||n.parentWindow),new $.Point(o.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0),o.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0))):new $.Point},getElementSize:function(e){return e=$.getElement(e),new $.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return(e=$.getElement(e)).currentStyle}:function(e){return e=$.getElement(e),window.getComputedStyle(e,"")},getCssPropertyWithVendorPrefix:function(e){var t={};return $.getCssPropertyWithVendorPrefix=function(e){if(void 0!==t[e])return t[e];var i=document.createElement("div").style,n=null;if(void 0!==i[e])n=e;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],r=$.capitalizeFirstLetter(e),s=0;s<o.length;s++){var a=o[s]+r;if(void 0!==i[a]){n=a;break}}return t[e]=n,n},$.getCssPropertyWithVendorPrefix(e)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},positiveModulo:function(e,t){var i=e%t;return i<0&&(i+=t),i},pointInElement:function(e,t){e=$.getElement(e);var i=$.getElementOffset(e),n=$.getElementSize(e);return t.x>=i.x&&t.x<i.x+n.x&&t.y<i.y+n.y&&t.y>=i.y},getEvent:function(e){return $.getEvent=e?function(e){return e}:function(){return window.event},$.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.pageX,t.y=e.pageY,t};else{if("number"!=typeof e.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(e){var t=new $.Point;return e=$.getEvent(e),t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,t}}return $.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(t.scrollLeft||t.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(e){if(void 0!==window.scrollTo)$.setPageScroll=function(e){window.scrollTo(e.x,e.y)};else{var t=$.getPageScroll();if(t.x===e.x&&t.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var i=$.getPageScroll();if(i.x!==t.x&&i.y!==t.y)return void($.setPageScroll=function(e){document.body.scrollLeft=e.x,document.body.scrollTop=e.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,(i=$.getPageScroll()).x!==t.x&&i.y!==t.y)return void($.setPageScroll=function(e){document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y});$.setPageScroll=function(e){}}return $.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},t=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!t.clientWidth&&!t.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(e){e=$.getElement(e);var t=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(t[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(t[1].style,{display:"table-row"}),$.extend(t[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),t[0].appendChild(t[1]),t[1].appendChild(t[2]),t[2].appendChild(e),t[0]},makeNeutralElement:function(e){var t=document.createElement(e),i=t.style;return i.background="transparent none",i.border="none",i.margin="0px",i.padding="0px",i.position="static",t},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(e){return $.makeTransparentImage=function(e){var t=$.makeNeutralElement("img");return t.src=e,t},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(e){var t=$.makeNeutralElement("img"),i=null;return(i=$.makeNeutralElement("span")).style.display="inline-block",t.onload=function(){i.style.width=i.style.width||t.width+"px",i.style.height=i.style.height||t.height+"px",t.onload=null,t=null},t.src=e,i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",i}),$.makeTransparentImage(e)},setElementOpacity:function(e,t,i){var n;e=$.getElement(e),i&&!$.Browser.alpha&&(t=Math.round(t)),$.Browser.opacity?e.style.opacity=t<1?t:"":t<1?(n="alpha(opacity="+Math.round(100*t)+")",e.style.filter=n):e.style.filter=""},setElementTouchActionNone:function(e){void 0!==(e=$.getElement(e)).style.touchAction?e.style.touchAction="none":void 0!==e.style.msTouchAction&&(e.style.msTouchAction="none")},addClass:function(e,t){(e=$.getElement(e)).className?-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=" "+t):e.className=t},indexOf:function(e,t,i){return Array.prototype.indexOf?this.indexOf=function(e,t,i){return e.indexOf(t,i)}:this.indexOf=function(e,t,i){var n,o,r=i||0;if(!e)throw new TypeError;if(0===(o=e.length)||r>=o)return-1;for(r<0&&(r=o-Math.abs(r)),n=r;n<o;n++)if(e[n]===t)return n;return-1},this.indexOf(e,t,i)},removeClass:function(e,t){var i,n,o=[];for(i=(e=$.getElement(e)).className.split(/\s+/),n=0;n<i.length;n++)i[n]&&i[n]!==t&&o.push(i[n]);e.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,t,i,n){(e=$.getElement(e)).addEventListener(t,i,n)};if(window.attachEvent)return function(e,t,i,n){(e=$.getElement(e)).attachEvent("on"+t,i)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,t,i,n){(e=$.getElement(e)).removeEventListener(t,i,n)};if(window.detachEvent)return function(e,t,i,n){(e=$.getElement(e)).detachEvent("on"+t,i)};throw new Error("No known event model.")}(),cancelEvent:function(e){(e=$.getEvent(e)).preventDefault?$.cancelEvent=function(e){e.preventDefault()}:$.cancelEvent=function(e){(e=$.getEvent(e)).cancel=!0,e.returnValue=!1},$.cancelEvent(e)},stopEvent:function(e){(e=$.getEvent(e)).stopPropagation?$.stopEvent=function(e){e.stopPropagation()}:$.stopEvent=function(e){(e=$.getEvent(e)).cancelBubble=!0},$.stopEvent(e)},createCallback:function(e,t){var i,n=[];for(i=2;i<arguments.length;i++)n.push(arguments[i]);return function(){var i,o=n.concat([]);for(i=0;i<arguments.length;i++)o.push(arguments[i]);return t.apply(e,o)}},getUrlParameter:function(e){return URLPARAMS[e]||null},getUrlProtocol:function(e){var t=e.match(/^([a-z]+:)\/\//i);return null===t?window.location.protocol:t[1].toLowerCase()},createAjaxRequest:function(e){var t;try{t=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}if(t)window.XMLHttpRequest?$.createAjaxRequest=function(e){return e?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(e)},makeAjaxRequest:function(e,t,i){var n,o,r;$.isPlainObject(e)&&(t=e.success,i=e.error,n=e.withCredentials,o=e.headers,r=e.responseType||null,e=e.url);var s=$.getUrlProtocol(e),a=$.createAjaxRequest("file:"===s);if(!$.isFunction(t))throw new Error("makeAjaxRequest requires a success callback");a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},a.status>=200&&a.status<300||0===a.status&&"http:"!==s&&"https:"!==s?t(a):($.console.log("AJAX request returned %d: %s",a.status,e),$.isFunction(i)&&i(a)))};try{if(a.open("GET",e,!0),r&&(a.responseType=r),o)for(var l in o)o.hasOwnProperty(l)&&o[l]&&a.setRequestHeader(l,o[l]);n&&(a.withCredentials=!0),a.send(null)}catch(n){var c=n.message;if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10&&void 0!==n.number&&-2147024891==n.number&&(c+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",n.name,c),a.onreadystatechange=function(){},window.XDomainRequest){var u=new XDomainRequest;if(u){u.onload=function(e){$.isFunction(t)&&t({responseText:u.responseText,status:200,statusText:"OK"})},u.onerror=function(e){$.isFunction(i)&&i({responseText:u.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{u.open("GET",e),u.send()}catch(e){$.isFunction(i)&&i(a,n)}}}else $.isFunction(i)&&i(a,n)}return a},jsonp:function(e){var t,i=e.url,n=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+$.now(),r=window[o],s="$1"+o+"$2",a=e.param||"callback",l=e.callback;i=i.replace(/(\=)\?(&|$)|\?\?/i,s),i+=(/\?/.test(i)?"&":"?")+a+"="+o,window[o]=function(e){if(r)window[o]=r;else try{delete window[o]}catch(e){}l&&$.isFunction(l)&&l(e)},t=document.createElement("script"),void 0===e.async&&!1===e.async||(t.async="async"),e.scriptCharset&&(t.charset=e.scriptCharset),t.src=i,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,n&&t.parentNode&&n.removeChild(t),t=void 0)},n.insertBefore(t,n.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)$.parseXml=function(e){return(new DOMParser).parseFromString(e,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(e){var t=null;return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t}}return $.parseXml(e)},parseJSON:function parseJSON(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(e){return!!FILEFORMATS[(e=e||"").toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var e=navigator.appVersion,t=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(t.substring(t.indexOf("MSIE")+5,t.indexOf(";",t.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(t.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(t.substring(t.indexOf("Firefox")+8))):t.indexOf("Safari")>=0?($.Browser.vendor=t.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(t.substring(t.substring(0,t.indexOf("Safari")).lastIndexOf("/")+1,t.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var i,n,o,r=window.location.search.substring(1).split("&");for(o=0;o<r.length;o++)(n=(i=r[o]).indexOf("="))>0&&(URLPARAMS[i.substring(0,n)]=decodeURIComponent(i.substring(n+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(e){};function getOffsetParent(e,t){return t&&e!=document.body?document.body:e.offsetParent}$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(e){var t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(t&&i)$.requestAnimationFrame=function(){return t.apply(e,arguments)},$.cancelAnimationFrame=function(){return i.apply(e,arguments)};else{var n,o=[],r=[],s=0;$.requestAnimationFrame=function(e){return o.push([++s,e]),n||(n=setInterval((function(){if(o.length){var e=$.now(),t=r;for(r=o,o=t;r.length;)r.shift()[1](e)}else clearInterval(n),n=void 0}),20)),s},$.cancelAnimationFrame=function(e){var t,i;for(t=0,i=o.length;t<i;t+=1)if(o[t][0]===e)return void o.splice(t,1);for(t=0,i=r.length;t<i;t+=1)if(r[t][0]===e)return void r.splice(t,1)}}}(window)}(OpenSeadragon),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return OpenSeadragon})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),$=OpenSeadragon,fullScreenApi={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.fullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.requestFullscreen()},fullScreenApi.exitFullScreen=function(){document.exitFullscreen()},fullScreenApi.fullScreenEventName="fullscreenchange",fullScreenApi.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.msFullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.msRequestFullscreen()},fullScreenApi.exitFullScreen=function(){document.msExitFullscreen()},fullScreenApi.fullScreenEventName="MSFullscreenChange",fullScreenApi.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.webkitFullscreenElement},fullScreenApi.requestFullScreen=function(e){return e.webkitRequestFullscreen()},fullScreenApi.exitFullScreen=function(){document.webkitExitFullscreen()},fullScreenApi.fullScreenEventName="webkitfullscreenchange",fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},fullScreenApi.requestFullScreen=function(e){return e.webkitRequestFullScreen()},fullScreenApi.exitFullScreen=function(){document.webkitCancelFullScreen()},fullScreenApi.fullScreenEventName="webkitfullscreenchange",fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(fullScreenApi.supportsFullScreen=!0,fullScreenApi.getFullScreenElement=function(){return document.mozFullScreenElement},fullScreenApi.requestFullScreen=function(e){return e.mozRequestFullScreen()},fullScreenApi.exitFullScreen=function(){document.mozCancelFullScreen()},fullScreenApi.fullScreenEventName="mozfullscreenchange",fullScreenApi.fullScreenErrorEventName="mozfullscreenerror"),fullScreenApi.isFullScreen=function(){return null!==fullScreenApi.getFullScreenElement()},fullScreenApi.cancelFullScreen=function(){$.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),fullScreenApi.exitFullScreen()},$.extend($,fullScreenApi),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(e,t,i,n){var o=this;n=n||1;var r=0,s=function(i){++r===n&&o.removeHandler(e,s),t(i)};this.addHandler(e,s,i)},addHandler:function(t,i,n){var o=this.events[t];o||(this.events[t]=o=[]),i&&e.isFunction(i)&&(o[o.length]={handler:i,userData:n||null})},removeHandler:function(t,i){var n,o=this.events[t],r=[];if(o&&e.isArray(o)){for(n=0;n<o.length;n++)o[n].handler!==i&&r.push(o[n]);this.events[t]=r}},removeAllHandlers:function(e){if(e)this.events[e]=[];else for(var t in this.events)this.events[t]=[]},getHandler:function(e){var t=this.events[e];return t&&t.length?(t=1===t.length?[t[0]]:Array.apply(null,t),function(e,i){var n,o=t.length;for(n=0;n<o;n++)t[n]&&(i.eventSource=e,i.userData=t[n].userData,t[n].handler(i))}):null},raiseEvent:function(e,t){var i=this.getHandler(e);i&&(t||(t={}),i(this,t))}}}(OpenSeadragon),function(e){var t,i,n,o,r,s,a=[],l={};function c(t){var i,n=l[t.hash],o=n.activePointersLists.length;for(i=0;i<o;i++)n.activePointersLists[i].captureCount>0&&(e.removeEvent(e.MouseTracker.captureElement,"mousemove",n.mousemovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"mouseup",n.mouseupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",n.pointermovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",n.pointerupcaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchmove",n.touchmovecaptured,!0),e.removeEvent(e.MouseTracker.captureElement,"touchend",n.touchendcaptured,!0),n.activePointersLists[i].captureCount=0);for(i=0;i<o;i++)n.activePointersLists.pop()}function u(t){var i,n,o=l[t.hash];if(o.tracking){for(n=0;n<e.MouseTracker.subscribeEvents.length;n++)i=e.MouseTracker.subscribeEvents[n],e.removeEvent(t.element,i,o[i],!1);c(t),o.tracking=!1}}function d(t,i){var n=l[t.hash];if("pointerevent"===i)return{upName:e.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:n.pointerupcaptured,moveName:e.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:n.pointermovecaptured};if("mouse"===i)return{upName:"mouseup",upHandler:n.mouseupcaptured,moveName:"mousemove",moveHandler:n.mousemovecaptured};if("touch"===i)return{upName:"touchend",upHandler:n.touchendcaptured,moveName:"touchmove",moveHandler:n.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function h(t,i,n){var o,r=t.getActivePointersListByType(i);r.captureCount+=n||1,1===r.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.setCapture(!0):(o=d(t,e.MouseTracker.havePointerEvents?"pointerevent":i),V&&G(window.top)&&e.addEvent(window.top,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0)))}function m(t,i,n){var o,r=t.getActivePointersListByType(i);r.captureCount-=n||1,0===r.captureCount&&(e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?t.element.releaseCapture():(o=d(t,e.MouseTracker.havePointerEvents?"pointerevent":i),V&&G(window.top)&&e.removeEvent(window.top,o.upName,o.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,o.upName,o.upHandler,!0)))}function p(t){var i;if(e.MouseTracker.unprefixedPointerEvents)i=t.pointerType;else switch(t.pointerType){case 2:i="touch";break;case 3:i="pen";break;case 4:i="mouse";break;default:i=""}return i}function g(t){return e.getMousePosition(t)}function f(e,t){return v(g(e),t)}function v(t,i){var n=e.getElementOffset(i);return t.minus(n)}function y(t,i){return new e.Point((t.x+i.x)/2,(t.y+i.y)/2)}function w(t,i){var n={target:(i=e.getEvent(i)).target||i.srcElement,type:"wheel",shiftKey:i.shiftKey||!1,clientX:i.clientX,clientY:i.clientY,pageX:i.pageX?i.pageX:i.clientX,pageY:i.pageY?i.pageY:i.clientY,deltaMode:"MozMousePixelScroll"==i.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==e.MouseTracker.wheelEventName?n.deltaY=-i.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:n.deltaY=i.detail,S(t,n,i)}function S(t,i,n){var o;o=i.deltaY<0?1:-1,t.scrollHandler&&!1===t.scrollHandler({eventSource:t,pointerType:"mouse",position:f(i,t.element),scroll:o,shift:i.shiftKey,isTouchEvent:!1,originalEvent:n,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(n)}function E(e,t){if(e===t)return!1;for(;t&&t!==e;)t=t.parentNode;return t===e}function b(t,i){N(t,i,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(i),currentTime:e.now()}])}function T(t,i){q(t,i,[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(i),currentTime:e.now()}])}function x(t){return e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?1===t?0:2===t?2:4===t?1:-1:t}function L(t,i){W(t,i=e.getEvent(i),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(i),currentTime:e.now()}],x(i.button))&&m(t,"mouse")}function P(t,i){U(t,i=e.getEvent(i),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(i),currentTime:e.now()}])}function _(e,t,i){var n,o=i.getLength(),r=[];if("touch"===i.type||i.contacts>0){for(n=0;n<o;n++)r.push(i.getByIndex(n));r.length>0&&(W(e,t,r,0),i.captureCount=1,m(e,i.type),q(e,t,r))}}function C(t,i){var n,o,r,s,l=i.changedTouches.length,c=[];for(n=e.now(),o=0;o<l;o++)c.push({id:i.changedTouches[o].identifier,type:"touch",currentPos:g(i.changedTouches[o]),currentTime:n});for(W(t,i,c,0)&&m(t,"touch",l),q(t,i,c),o=0;o<a.length;o++)if(a[o]!==t&&a[o].isTracking()&&E(a[o].element,t.element)){for(s=[],r=0;r<l;r++)s.push({id:i.changedTouches[r].identifier,type:"touch",currentPos:g(i.changedTouches[r]),currentTime:n});q(a[o],i,s)}e.cancelEvent(i)}function A(t,i){var n,o=i.changedTouches.length,r=[];for(n=0;n<o;n++)r.push({id:i.changedTouches[n].identifier,type:"touch",currentPos:g(i.changedTouches[n]),currentTime:e.now()});U(t,i,r),e.cancelEvent(i)}function k(t,i){i.currentTarget===i.relatedTarget||E(i.currentTarget,i.relatedTarget)||N(t,i,[{id:i.pointerId,type:p(i),isPrimary:i.isPrimary,currentPos:g(i),currentTime:e.now()}])}function R(t,i){i.currentTarget===i.relatedTarget||E(i.currentTarget,i.relatedTarget)||q(t,i,[{id:i.pointerId,type:p(i),isPrimary:i.isPrimary,currentPos:g(i),currentTime:e.now()}])}function O(t,i){var n;j(t,i,[n={id:i.pointerId,type:p(i),isPrimary:i.isPrimary,currentPos:g(i),currentTime:e.now()}],i.button)&&(e.stopEvent(i),h(t,n.type)),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.cancelEvent(i)}function I(e,t){M(e,t)}function M(t,i){var n;W(t,i,[n={id:i.pointerId,type:p(i),isPrimary:i.isPrimary,currentPos:g(i),currentTime:e.now()}],i.button)&&m(t,n.type)}function H(e,t){D(e,t)}function D(t,i){U(t,i,[{id:i.pointerId,type:p(i),isPrimary:i.isPrimary,currentPos:g(i),currentTime:e.now()}])}function B(e,t){!function(e,t,i){W(e,t,i,0),q(e,t,i)}(e,t,[{id:t.pointerId,type:p(t)}])}function F(e,t){return t.hasOwnProperty("isPrimary")||(0===e.getLength()?t.isPrimary=!0:t.isPrimary=!1),t.speed=0,t.direction=0,t.contactPos=t.currentPos,t.contactTime=t.currentTime,t.lastPos=t.currentPos,t.lastTime=t.currentTime,e.add(t)}function z(e,t){var i,n;return e.getById(t.id)?(i=e.removeById(t.id),t.hasOwnProperty("isPrimary")||(n=e.getPrimary())||(n=e.getByIndex(0))&&(n.isPrimary=!0)):i=e.getLength(),i}function N(t,i,n){var o,r,s,a=t.getActivePointersListByType(n[0].type),l=n.length;for(o=0;o<l;o++)r=n[o],(s=a.getById(r.id))?(s.insideElement=!0,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=r.currentPos,s.currentTime=r.currentTime,r=s):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,F(a,r)),t.enterHandler&&!1===t.enterHandler({eventSource:t,pointerType:r.type,position:v(r.currentPos,t.element),buttons:a.buttons,pointers:t.getActivePointerCount(),insideElementPressed:r.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===r.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i)}function q(t,i,n){var o,r,s,a=t.getActivePointersListByType(n[0].type),l=n.length;for(o=0;o<l;o++)r=n[o],(s=a.getById(r.id))&&(s.captured?(s.insideElement=!1,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=r.currentPos,s.currentTime=r.currentTime):z(a,s),r=s),t.exitHandler&&!1===t.exitHandler({eventSource:t,pointerType:r.type,position:v(r.currentPos,t.element),buttons:a.buttons,pointers:t.getActivePointerCount(),insideElementPressed:!!s&&s.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===r.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i)}function j(t,i,n,o){var r,s,a,c=l[t.hash],u=t.getActivePointersListByType(n[0].type),d=n.length;void 0!==i.buttons?u.buttons=i.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?u.buttons+=1:1===o?u.buttons+=4:2===o?u.buttons+=2:3===o?u.buttons+=8:4===o?u.buttons+=16:5===o&&(u.buttons+=32):0===o?u.buttons|=1:1===o?u.buttons|=4:2===o?u.buttons|=2:3===o?u.buttons|=8:4===o?u.buttons|=16:5===o&&(u.buttons|=32);var h=t.getActivePointersListsExceptType(n[0].type);for(r=0;r<h.length;r++)_(t,i,h[r]);if(0!==o)return t.nonPrimaryPressHandler&&!1===t.nonPrimaryPressHandler({eventSource:t,pointerType:n[0].type,position:v(n[0].currentPos,t.element),button:o,buttons:u.buttons,isTouchEvent:"touch"===n[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i),!1;for(r=0;r<d;r++)s=n[r],(a=u.getById(s.id))?(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,a.contactPos=s.currentPos,a.contactTime=s.currentTime,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=s.currentPos,a.currentTime=s.currentTime,s=a):(s.captured=!0,s.insideElementPressed=!0,s.insideElement=!0,F(u,s)),u.addContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(t,s),1===u.contacts?t.pressHandler&&!1===t.pressHandler({eventSource:t,pointerType:s.type,position:v(s.contactPos,t.element),buttons:u.buttons,isTouchEvent:"touch"===s.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i):2===u.contacts&&t.pinchHandler&&"touch"===s.type&&(c.pinchGPoints=u.asArray(),c.lastPinchDist=c.currentPinchDist=c.pinchGPoints[0].currentPos.distanceTo(c.pinchGPoints[1].currentPos),c.lastPinchCenter=c.currentPinchCenter=y(c.pinchGPoints[0].currentPos,c.pinchGPoints[1].currentPos));return!0}function W(t,i,n,o){var r,s,a,c,u,d,h=l[t.hash],m=t.getActivePointersListByType(n[0].type),p=n.length,g=!1,f=!1;if(void 0!==i.buttons?m.buttons=i.buttons:e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?0===o?m.buttons-=1:1===o?m.buttons-=4:2===o?m.buttons-=2:3===o?m.buttons-=8:4===o?m.buttons-=16:5===o&&(m.buttons-=32):0===o?m.buttons^=-2:1===o?m.buttons^=-5:2===o?m.buttons^=-3:3===o?m.buttons^=-9:4===o?m.buttons^=-17:5===o&&(m.buttons^=-33),0!==o){t.nonPrimaryReleaseHandler&&!1===t.nonPrimaryReleaseHandler({eventSource:t,pointerType:n[0].type,position:v(n[0].currentPos,t.element),button:o,buttons:m.buttons,isTouchEvent:"touch"===n[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i);var w=t.getActivePointersListByType("mouse");return _(t,i,w),!1}for(a=0;a<p;a++)c=n[a],(u=m.getById(c.id))&&(u.captured&&(u.captured=!1,g=!0,f=!0),u.lastPos=u.currentPos,u.lastTime=u.currentTime,u.currentPos=c.currentPos,u.currentTime=c.currentTime,u.insideElement||z(m,u),r=u.currentPos,s=u.currentTime,f?(m.removeContact(),(t.dragHandler||t.dragEndHandler||t.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(t,u),0===m.contacts?(t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:u.type,position:v(r,t.element),buttons:m.buttons,insideElementPressed:u.insideElementPressed,insideElementReleased:u.insideElement,isTouchEvent:"touch"===u.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i),t.dragEndHandler&&!u.currentPos.equals(u.contactPos)&&!1===t.dragEndHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),speed:u.speed,direction:u.direction,shift:i.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i),(t.clickHandler||t.dblClickHandler)&&u.insideElement&&(d=s-u.contactTime<=t.clickTimeThreshold&&u.contactPos.distanceTo(r)<=t.clickDistThreshold,t.clickHandler&&!1===t.clickHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),quick:d,shift:i.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i),t.dblClickHandler&&d&&(m.clicks++,1===m.clicks?(h.lastClickPos=r,h.dblClickTimeOut=setTimeout((function(){m.clicks=0}),t.dblClickTimeThreshold)):2===m.clicks&&(clearTimeout(h.dblClickTimeOut),m.clicks=0,h.lastClickPos.distanceTo(r)<=t.dblClickDistThreshold&&!1===t.dblClickHandler({eventSource:t,pointerType:u.type,position:v(u.currentPos,t.element),shift:i.shiftKey,isTouchEvent:"touch"===u.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i),h.lastClickPos=null)))):2===m.contacts&&t.pinchHandler&&"touch"===u.type&&(h.pinchGPoints=m.asArray(),h.lastPinchDist=h.currentPinchDist=h.pinchGPoints[0].currentPos.distanceTo(h.pinchGPoints[1].currentPos),h.lastPinchCenter=h.currentPinchCenter=y(h.pinchGPoints[0].currentPos,h.pinchGPoints[1].currentPos))):t.releaseHandler&&!1===t.releaseHandler({eventSource:t,pointerType:u.type,position:v(r,t.element),buttons:m.buttons,insideElementPressed:u.insideElementPressed,insideElementReleased:u.insideElement,isTouchEvent:"touch"===u.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i));return g}function U(t,i,n){var o,r,s,a,c,u=l[t.hash],d=t.getActivePointersListByType(n[0].type),h=n.length;for(void 0!==i.buttons&&(d.buttons=i.buttons),o=0;o<h;o++)r=n[o],(s=d.getById(r.id))?(r.hasOwnProperty("isPrimary")&&(s.isPrimary=r.isPrimary),s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=r.currentPos,s.currentTime=r.currentTime):(r.captured=!1,r.insideElementPressed=!1,r.insideElement=!0,F(d,r));t.stopHandler&&"mouse"===n[0].type&&(clearTimeout(t.stopTimeOut),t.stopTimeOut=setTimeout((function(){!function(e,t,i){e.stopHandler&&e.stopHandler({eventSource:e,pointerType:i,position:f(t,e.element),buttons:e.getActivePointersListByType(i).buttons,isTouchEvent:"touch"===i,originalEvent:t,preventDefaultAction:!1,userData:e.userData})}(t,i,n[0].type)}),t.stopDelay)),0===d.contacts?t.moveHandler&&!1===t.moveHandler({eventSource:t,pointerType:n[0].type,position:v(n[0].currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===n[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i):1===d.contacts?(t.moveHandler&&(s=d.asArray()[0],!1===t.moveHandler({eventSource:t,pointerType:s.type,position:v(s.currentPos,t.element),buttons:d.buttons,isTouchEvent:"touch"===s.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i)),t.dragHandler&&(c=(s=d.asArray()[0]).currentPos.minus(s.lastPos),!1===t.dragHandler({eventSource:t,pointerType:s.type,position:v(s.currentPos,t.element),buttons:d.buttons,delta:c,speed:s.speed,direction:s.direction,shift:i.shiftKey,isTouchEvent:"touch"===s.type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i))):2===d.contacts&&(t.moveHandler&&(a=d.asArray(),!1===t.moveHandler({eventSource:t,pointerType:a[0].type,position:v(y(a[0].currentPos,a[1].currentPos),t.element),buttons:d.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i)),t.pinchHandler&&"touch"===n[0].type&&(c=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos))!=u.currentPinchDist&&(u.lastPinchDist=u.currentPinchDist,u.currentPinchDist=c,u.lastPinchCenter=u.currentPinchCenter,u.currentPinchCenter=y(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos),!1===t.pinchHandler({eventSource:t,pointerType:"touch",gesturePoints:u.pinchGPoints,lastCenter:v(u.lastPinchCenter,t.element),center:v(u.currentPinchCenter,t.element),lastDistance:u.lastPinchDist,distance:u.currentPinchDist,shift:i.shiftKey,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i)))}e.MouseTracker=function(t){a.push(this);var i=arguments;e.isPlainObject(t)||(t={element:i[0],clickTimeThreshold:i[1],clickDistThreshold:i[2]}),this.hash=Math.random(),this.element=e.getElement(t.element),this.clickTimeThreshold=t.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=t.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=t.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=t.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=t.userData||null,this.stopDelay=t.stopDelay||50,this.enterHandler=t.enterHandler||null,this.exitHandler=t.exitHandler||null,this.pressHandler=t.pressHandler||null,this.nonPrimaryPressHandler=t.nonPrimaryPressHandler||null,this.releaseHandler=t.releaseHandler||null,this.nonPrimaryReleaseHandler=t.nonPrimaryReleaseHandler||null,this.moveHandler=t.moveHandler||null,this.scrollHandler=t.scrollHandler||null,this.clickHandler=t.clickHandler||null,this.dblClickHandler=t.dblClickHandler||null,this.dragHandler=t.dragHandler||null,this.dragEndHandler=t.dragEndHandler||null,this.pinchHandler=t.pinchHandler||null,this.stopHandler=t.stopHandler||null,this.keyDownHandler=t.keyDownHandler||null,this.keyUpHandler=t.keyUpHandler||null,this.keyHandler=t.keyHandler||null,this.focusHandler=t.focusHandler||null,this.blurHandler=t.blurHandler||null;var n=this;l[this.hash]={click:function(t){!function(t,i){t.clickHandler&&e.cancelEvent(i)}(n,t)},dblclick:function(t){!function(t,i){t.dblClickHandler&&e.cancelEvent(i)}(n,t)},keydown:function(t){!function(t,i){t.keyDownHandler&&(i=e.getEvent(i),t.keyDownHandler({eventSource:t,keyCode:i.keyCode?i.keyCode:i.charCode,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey,originalEvent:i,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(i))}(n,t)},keyup:function(t){!function(t,i){t.keyUpHandler&&(i=e.getEvent(i),t.keyUpHandler({eventSource:t,keyCode:i.keyCode?i.keyCode:i.charCode,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey,originalEvent:i,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(i))}(n,t)},keypress:function(t){!function(t,i){t.keyHandler&&(i=e.getEvent(i),t.keyHandler({eventSource:t,keyCode:i.keyCode?i.keyCode:i.charCode,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey,originalEvent:i,preventDefaultAction:!1,userData:t.userData})||e.cancelEvent(i))}(n,t)},focus:function(t){!function(t,i){t.focusHandler&&(i=e.getEvent(i),!1===t.focusHandler({eventSource:t,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i))}(n,t)},blur:function(t){!function(t,i){t.blurHandler&&(i=e.getEvent(i),!1===t.blurHandler({eventSource:t,originalEvent:i,preventDefaultAction:!1,userData:t.userData})&&e.cancelEvent(i))}(n,t)},wheel:function(e){!function(e,t){S(e,t,t)}(n,e)},mousewheel:function(e){w(n,e)},DOMMouseScroll:function(e){w(n,e)},MozMousePixelScroll:function(e){w(n,e)},mouseenter:function(t){!function(t,i){b(t,i=e.getEvent(i))}(n,t)},mouseleave:function(t){!function(t,i){T(t,i=e.getEvent(i))}(n,t)},mouseover:function(t){!function(t,i){(i=e.getEvent(i)).currentTarget===i.relatedTarget||E(i.currentTarget,i.relatedTarget)||b(t,i)}(n,t)},mouseout:function(t){!function(t,i){(i=e.getEvent(i)).currentTarget===i.relatedTarget||E(i.currentTarget,i.relatedTarget)||T(t,i)}(n,t)},mousedown:function(t){!function(t,i){j(t,i=e.getEvent(i),[{id:e.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(i),currentTime:e.now()}],x(i.button))&&(e.stopEvent(i),h(t,"mouse")),(t.clickHandler||t.dblClickHandler||t.pressHandler||t.dragHandler||t.dragEndHandler)&&e.cancelEvent(i)}(n,t)},mouseup:function(e){!function(e,t){L(e,t)}(n,e)},mouseupcaptured:function(t){!function(t,i){L(t,i),e.stopEvent(i)}(n,t)},mousemove:function(e){!function(e,t){P(e,t)}(n,e)},mousemovecaptured:function(t){!function(t,i){P(t,i),e.stopEvent(i)}(n,t)},touchstart:function(t){!function(t,i){var n,o,r,s,l=i.changedTouches.length,c=[],u=t.getActivePointersListByType("touch");for(n=e.now(),u.getLength()>i.touches.length-l&&(e.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),_(t,i,u)),o=0;o<l;o++)c.push({id:i.changedTouches[o].identifier,type:"touch",currentPos:g(i.changedTouches[o]),currentTime:n});for(N(t,i,c),o=0;o<a.length;o++)if(a[o]!==t&&a[o].isTracking()&&E(a[o].element,t.element)){for(s=[],r=0;r<l;r++)s.push({id:i.changedTouches[r].identifier,type:"touch",currentPos:g(i.changedTouches[r]),currentTime:n});N(a[o],i,s)}j(t,i,c,0)&&(e.stopEvent(i),h(t,"touch",l)),e.cancelEvent(i)}(n,t)},touchend:function(e){!function(e,t){C(e,t)}(n,e)},touchendcaptured:function(t){!function(t,i){C(t,i),e.stopEvent(i)}(n,t)},touchmove:function(e){!function(e,t){A(e,t)}(n,e)},touchmovecaptured:function(t){!function(t,i){A(t,i),e.stopEvent(i)}(n,t)},touchcancel:function(e){!function(e,t){var i=e.getActivePointersListByType("touch");_(e,t,i)}(n,e)},gesturestart:function(e){!function(e,t){t.stopPropagation(),t.preventDefault()}(0,e)},gesturechange:function(e){!function(e,t){t.stopPropagation(),t.preventDefault()}(0,e)},pointerover:function(e){k(n,e)},MSPointerOver:function(e){k(n,e)},pointerout:function(e){R(n,e)},MSPointerOut:function(e){R(n,e)},pointerdown:function(e){O(n,e)},MSPointerDown:function(e){O(n,e)},pointerup:function(e){I(n,e)},MSPointerUp:function(e){I(n,e)},pointermove:function(e){H(n,e)},MSPointerMove:function(e){H(n,e)},pointercancel:function(e){B(n,e)},MSPointerCancel:function(e){B(n,e)},pointerupcaptured:function(t){!function(t,i){t.getActivePointersListByType(p(i)).getById(i.pointerId)&&M(t,i),e.stopEvent(i)}(n,t)},pointermovecaptured:function(t){!function(t,i){t.getActivePointersListByType(p(i)).getById(i.pointerId)&&D(t,i),e.stopEvent(i)}(n,t)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},t.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var e;for(u(this),this.element=null,e=0;e<a.length;e++)if(a[e]===this){a.splice(e,1);break}l[this.hash]=null,delete l[this.hash]},isTracking:function(){return l[this.hash].tracking},setTracking:function(t){return t?function(t){var i,n,o=l[t.hash];if(!o.tracking){for(n=0;n<e.MouseTracker.subscribeEvents.length;n++)i=e.MouseTracker.subscribeEvents[n],e.addEvent(t.element,i,o[i],!1);c(t),o.tracking=!0}}(this):u(this),this},getActivePointersListsExceptType:function(e){for(var t=l[this.hash],i=[],n=0;n<t.activePointersLists.length;++n)t.activePointersLists[n].type!==e&&i.push(t.activePointersLists[n]);return i},getActivePointersListByType:function(t){var i,n,o=l[this.hash],r=o.activePointersLists.length;for(i=0;i<r;i++)if(o.activePointersLists[i].type===t)return o.activePointersLists[i];return n=new e.MouseTracker.GesturePointList(t),o.activePointersLists.push(n),n},getActivePointerCount:function(){var e,t=l[this.hash],i=t.activePointersLists.length,n=0;for(e=0;e<i;e++)n+=t.activePointersLists[e].getLength();return n},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},e.MouseTracker.resetAllMouseTrackers=function(){for(var e=0;e<a.length;e++)a[e].isTracking()&&(a[e].setTracking(!1),a[e].setTracking(!0))},e.MouseTracker.gesturePointVelocityTracker=(t=[],i=0,n=0,o=function(e,t){return e.hash.toString()+t.type+t.id.toString()},r=function(){var i,o,r,s,a,l,c=t.length,u=e.now();for(s=u-n,n=u,i=0;i<c;i++)(r=(o=t[i]).gPoint).direction=Math.atan2(r.currentPos.y-o.lastPos.y,r.currentPos.x-o.lastPos.x),a=o.lastPos.distanceTo(r.currentPos),o.lastPos=r.currentPos,l=1e3*a/(s+1),r.speed=.75*l+.25*r.speed},{addPoint:function(s,a){var l=o(s,a);t.push({guid:l,gPoint:a,lastPos:a.currentPos}),1===t.length&&(n=e.now(),i=window.setInterval(r,50))},removePoint:function(e,n){var r,s=o(e,n),a=t.length;for(r=0;r<a;r++)if(t[r].guid===s){t.splice(r,1),0==--a&&window.clearInterval(i);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor==e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.supportsMouseCapture=(s=document.createElement("div"),e.isFunction(s.setCapture)&&e.isFunction(s.releaseCapture)),e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",e.MouseTracker.wheelEventName],"DOMMouseScroll"==e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||e.Browser.vendor!==e.BROWSERS.IE)?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),e.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?e.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:e.MouseTracker.maxTouchPoints=0,e.MouseTracker.haveMouseEnter=!1):(e.MouseTracker.havePointerEvents=!1,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<9?(e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),e.MouseTracker.haveMouseEnter=!0):(e.MouseTracker.subscribeEvents.push("mouseover","mouseout"),e.MouseTracker.haveMouseEnter=!1),e.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.maxTouchPoints=10),e.MouseTracker.GesturePointList=function(e){this._gPoints=[],this.type=e,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(e){return this._gPoints.push(e)},removeById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e){this._gPoints.splice(t,1);break}return this._gPoints.length},getByIndex:function(e){return e<this._gPoints.length?this._gPoints[e]:null},getById:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].id===e)return this._gPoints[t];return null},getPrimary:function(e){var t,i=this._gPoints.length;for(t=0;t<i;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var V=function(){try{return window.self!==window.top}catch(e){return!0}}();function G(e){try{return e.addEventListener&&e.removeEventListener}catch(e){return!1}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(t,i,n){var o=t.parentNode;"number"==typeof i&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),i={anchor:i}),i.attachToViewer=void 0===i.attachToViewer||i.attachToViewer,this.autoFade=void 0===i.autoFade||i.autoFade,this.element=t,this.anchor=i.anchor,this.container=n,this.anchor==e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof i.top?i.top+"px":i.top,this.wrapper.style.left="number"==typeof i.left?i.left+"px":i.left,this.wrapper.style.height="number"==typeof i.height?i.height+"px":i.height,this.wrapper.style.width="number"==typeof i.width?i.width+"px":i.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),i.attachToViewer?this.anchor==e.ControlAnchor.TOP_RIGHT||this.anchor==e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):o.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[e.SIGNAL]&&e.Browser.vendor==e.BROWSERS.IE?e.setElementOpacity(this.element,t,!0):e.setElementOpacity(this.wrapper,t,!0)}}}(OpenSeadragon),function(e){function t(e,t){var i,n=e.controls;for(i=n.length-1;i>=0;i--)if(n[i].element==t)return i;return-1}e.ControlDock=function(t){var i,n,o=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},t),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),n=0;n<o.length;n++)i=o[n],this.controls[i]=e.makeNeutralElement("div"),this.controls[i].style.position="absolute",i.match("left")&&(this.controls[i].style.left="0px"),i.match("right")&&(this.controls[i].style.right="0px"),i.match("top")&&(this.controls[i].style.top="0px"),i.match("bottom")&&(this.controls[i].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(i,n){var o=null;if(!(t(this,i=e.getElement(i))>=0)){switch(n.anchor){case e.ControlAnchor.TOP_RIGHT:o=this.controls.topright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,i.style.position="relative",i.style.paddingRight="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:o=this.controls.topleft,i.style.position="relative",i.style.paddingLeft="0px",i.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:default:case e.ControlAnchor.NONE:o=this.container,i.style.margin="0px",i.style.padding="0px"}this.controls.push(new e.Control(i,n,o)),i.style.display="inline-block"}},removeControl:function(i){var n=t(this,i=e.getElement(i));return n>=0&&(this.controls[n].destroy(),this.controls.splice(n,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var e;for(e=this.controls.length-1;e>=0;e--)if(this.controls[e].isVisible())return!0;return!1},setControlsEnabled:function(e){var t;for(t=this.controls.length-1;t>=0;t--)this.controls[t].setVisible(e);return this}}}(OpenSeadragon),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(e){var t={},i=1;function n(t){return t=e.getElement(t),new e.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function o(t,i){if(i instanceof e.Overlay)return i;var n=null;if(i.element)n=e.getElement(i.element);else{var o=i.id?i.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(n=e.getElement(i.id))||((n=document.createElement("a")).href="#/overlay/"+o),n.id=o,e.addClass(n,i.className?i.className:"openseadragon-overlay")}var r=i.location,s=i.width,a=i.height;if(!r){var l=i.x,c=i.y;if(void 0!==i.px){var u=t.viewport.imageToViewportRectangle(new e.Rect(i.px,i.py,s||0,a||0));l=u.x,c=u.y,s=void 0!==s?u.width:void 0,a=void 0!==a?u.height:void 0}r=new e.Point(l,c)}var d=i.placement;return d&&"string"===e.type(d)&&(d=e.Placement[i.placement.toUpperCase()]),new e.Overlay({element:n,location:r,placement:d,onDraw:i.onDraw,checkResize:i.checkResize,width:s,height:a,rotationMode:i.rotationMode})}function r(e,t){var i;for(i=e.length-1;i>=0;i--)if(e[i].element===t)return i;return-1}function s(t,i){return e.requestAnimationFrame((function(){i(t)}))}function a(t){e.requestAnimationFrame((function(){!function(t){var i,n;if(t.controlsShouldFade){for(i=1-(e.now()-t.controlsFadeBeginTime)/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),n=t.controls.length-1;n>=0;n--)t.controls[n].autoFade&&t.controls[n].setOpacity(i);i>0&&a(t)}}(t)}))}function l(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=e.now()+t.controlsFadeDelay,window.setTimeout((function(){a(t)}),t.controlsFadeDelay))}function c(e){var t;for(e.controlsShouldFade=!1,t=e.controls.length-1;t>=0;t--)e.controls[t].setOpacity(1)}function u(){c(this)}function d(){l(this)}function h(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints(),!1;case 40:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function m(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return t.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints(),!1;case 115:case 83:return t.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function p(e){document.activeElement==this.canvas||this.canvas.focus();var t={tracker:e.eventSource,position:e.position,quick:e.quick,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};this.raiseEvent("canvas-click",t),!t.preventDefaultAction&&this.viewport&&e.quick&&this.gestureSettingsByDeviceType(e.pointerType).clickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())}function g(e){!e.preventDefaultAction&&this.viewport&&this.gestureSettingsByDeviceType(e.pointerType).dblClickToZoom&&(this.viewport.zoomBy(e.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-double-click",{tracker:e.eventSource,position:e.position,shift:e.shift,originalEvent:e.originalEvent})}function f(e){var t,i={tracker:e.eventSource,position:e.position,delta:e.delta,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction};if(this.raiseEvent("canvas-drag",i),!i.preventDefaultAction&&this.viewport){if(t=this.gestureSettingsByDeviceType(e.pointerType),this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.constrainDuringPan){var n=this.viewport.deltaPointsFromPixels(e.delta.negate());this.viewport.centerSpringX.target.value+=n.x,this.viewport.centerSpringY.target.value+=n.y;var o=this.viewport.getBounds(),r=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=n.x,this.viewport.centerSpringY.target.value-=n.y,o.x!=r.x&&(e.delta.x=0),o.y!=r.y&&(e.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta.negate()),t.flickEnabled&&!this.constrainDuringPan)}}function v(t){if(!t.preventDefaultAction&&this.viewport){var i=this.gestureSettingsByDeviceType(t.pointerType);if(i.flickEnabled&&t.speed>=i.flickMinSpeed){var n=0;this.panHorizontal&&(n=i.flickMomentum*t.speed*Math.cos(t.direction));var o=0;this.panVertical&&(o=i.flickMomentum*t.speed*Math.sin(t.direction));var r=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),s=this.viewport.pointFromPixel(new e.Point(r.x-n,r.y-o));this.viewport.panTo(s,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function y(e){this.raiseEvent("canvas-enter",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function w(t){window.location!=window.parent.location&&e.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function S(e){this.raiseEvent("canvas-press",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function E(e){this.raiseEvent("canvas-release",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,insideElementPressed:e.insideElementPressed,insideElementReleased:e.insideElementReleased,originalEvent:e.originalEvent})}function b(e){this.raiseEvent("canvas-nonprimary-press",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function T(e){this.raiseEvent("canvas-nonprimary-release",{tracker:e.eventSource,position:e.position,pointerType:e.pointerType,button:e.button,buttons:e.buttons,originalEvent:e.originalEvent})}function x(e){var t,i,n;if(!e.preventDefaultAction&&this.viewport&&((t=this.gestureSettingsByDeviceType(e.pointerType)).pinchToZoom&&(i=this.viewport.pointFromPixel(e.center,!0),n=this.viewport.pointFromPixel(e.lastCenter,!0).minus(i),this.panHorizontal||(n.x=0),this.panVertical||(n.y=0),this.viewport.zoomBy(e.distance/e.lastDistance,i,!0),this.viewport.panBy(n,!0),this.viewport.applyConstraints()),t.pinchRotate)){var o=Math.atan2(e.gesturePoints[0].currentPos.y-e.gesturePoints[1].currentPos.y,e.gesturePoints[0].currentPos.x-e.gesturePoints[1].currentPos.x),r=Math.atan2(e.gesturePoints[0].lastPos.y-e.gesturePoints[1].lastPos.y,e.gesturePoints[0].lastPos.x-e.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-r)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:e.eventSource,gesturePoints:e.gesturePoints,lastCenter:e.lastCenter,center:e.center,lastDistance:e.lastDistance,distance:e.distance,shift:e.shift,originalEvent:e.originalEvent}),!1}function L(t){var i,n,o;if((o=e.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=o,!t.preventDefaultAction&&this.viewport&&(i=this.gestureSettingsByDeviceType(t.pointerType)).scrollToZoom&&(n=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(n,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),i&&i.scrollToZoom)return!1}else if((i=this.gestureSettingsByDeviceType(t.pointerType))&&i.scrollToZoom)return!1}function P(e){t[this.hash].mouseInside=!0,c(this),this.raiseEvent("container-enter",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function _(e){e.pointers<1&&(t[this.hash].mouseInside=!1,t[this.hash].animating||l(this)),this.raiseEvent("container-exit",{tracker:e.eventSource,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function C(e){!function(e){if(!e._opening){if(e.autoResize){var i=n(e.container),o=t[e.hash].prevContainerSize;if(!i.equals(o)){var r=e.viewport;if(e.preserveImageSizeOnResize){var s=o.x/i.x,a=r.getZoom()*s,u=r.getCenter();r.resize(i,!1),r.zoomTo(a,null,!0),r.panTo(u,!0)}else{var d=r.getBounds();r.resize(i,!0),r.fitBoundsWithConstraints(d,!0)}t[e.hash].prevContainerSize=i,t[e.hash].forceRedraw=!0}}var h=e.viewport.update(),m=e.world.update()||h;h&&e.raiseEvent("viewport-change"),e.referenceStrip&&(m=e.referenceStrip.update(e.viewport)||m),!t[e.hash].animating&&m&&(e.raiseEvent("animation-start"),c(e)),(m||t[e.hash].forceRedraw||e.world.needsDraw())&&(function(e){e.imageLoader.clear(),e.drawer.clear(),e.world.draw(),e.raiseEvent("update-viewport",{})}(e),e._drawOverlays(),e.navigator&&e.navigator.update(e.viewport),t[e.hash].forceRedraw=!1,m&&e.raiseEvent("animation")),t[e.hash].animating&&!m&&(e.raiseEvent("animation-finish"),t[e.hash].mouseInside||l(e)),t[e.hash].animating=m}}(e),e.isOpen()?e._updateRequestId=s(e,C):e._updateRequestId=!1}function A(e,t){return e?e+t:t}function k(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=this.zoomPerSecond,t[this.hash].zooming=!0,I(this)}function R(){t[this.hash].lastZoomTime=e.now(),t[this.hash].zoomFactor=1/this.zoomPerSecond,t[this.hash].zooming=!0,I(this)}function O(){t[this.hash].zooming=!1}function I(t){e.requestAnimationFrame(e.delegate(t,M))}function M(){var i,n,o;t[this.hash].zooming&&this.viewport&&(n=(i=e.now())-t[this.hash].lastZoomTime,o=Math.pow(t[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(o),this.viewport.applyConstraints(),t[this.hash].lastZoomTime=i,I(this))}function H(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function D(){this.viewport&&(t[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function B(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function F(){this.viewport&&this.viewport.goHome()}function z(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function N(){if(this.viewport){var e=this.viewport.getRotation();0===e?e=270:e-=90,this.viewport.setRotation(e)}}function q(){if(this.viewport){var e=this.viewport.getRotation();270===e?e=0:e+=90,this.viewport.setRotation(e)}}function j(){var e=this._sequenceIndex-1;this.navPrevNextWrap&&e<0&&(e+=this.tileSources.length),this.goToPage(e)}function W(){var e=this._sequenceIndex+1;this.navPrevNextWrap&&e>=this.tileSources.length&&(e=0),this.goToPage(e)}e.Viewer=function(o){var r,a,c=arguments,u=this;if(e.isPlainObject(o)||(o={id:c[0],xmlPath:c.length>1?c[1]:void 0,prefixUrl:c.length>2?c[2]:void 0,controls:c.length>3?c[3]:void 0,overlays:c.length>4?c[4]:void 0}),o.config&&(e.extend(!0,o,o.config),delete o.config),e.extend(!0,this,{id:o.id,hash:o.hash||i++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,o),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==t[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),t[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",(function(t){var i=e.getString("Errors.OpenFailed",t.eventSource,t.message);u._showMessage(i)})),e.ControlDock.call(this,o),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(a=this.canvas.style).width="100%",a.height="100%",a.overflow="hidden",a.position="absolute",a.top="0px",a.left="0px",e.setElementTouchActionNone(this.canvas),""!==o.tabIndex&&(this.canvas.tabIndex=void 0===o.tabIndex?0:o.tabIndex),this.container.className="openseadragon-container",function(e){e.width="100%",e.height="100%",e.position="relative",e.overflow="hidden",e.left="0px",e.top="0px",e.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:e.delegate(this,h),keyHandler:e.delegate(this,m),clickHandler:e.delegate(this,p),dblClickHandler:e.delegate(this,g),dragHandler:e.delegate(this,f),dragEndHandler:e.delegate(this,v),enterHandler:e.delegate(this,y),exitHandler:e.delegate(this,w),pressHandler:e.delegate(this,S),releaseHandler:e.delegate(this,E),nonPrimaryPressHandler:e.delegate(this,b),nonPrimaryReleaseHandler:e.delegate(this,T),scrollHandler:e.delegate(this,L),pinchHandler:e.delegate(this,x)}),this.outerTracker=new e.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,P),exitHandler:e.delegate(this,_)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),t[this.hash].prevContainerSize=n(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",(function(e){u.source=u.world.getItemAt(0).source,t[u.hash].forceRedraw=!0,u._updateRequestId||(u._updateRequestId=s(u,C))})),this.world.addHandler("remove-item",(function(e){u.world.getItemCount()?u.source=u.world.getItemAt(0).source:u.source=null,t[u.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(e){u.viewport&&u.viewport._setContentBounds(u.world.getHomeBounds(),u.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(e){u.source=u.world.getItemAt(0).source})),this.viewport=new e.Viewport({containerSize:t[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:o.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(r=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(r,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(r=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(r,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),r=0;r<this.customControls.length;r++)this.addControl(this.customControls[r].id,{anchor:this.customControls[r].anchor});e.requestAnimationFrame((function(){l(u)}))},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(t){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(t)},openTileSource:function(t){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(t)},open:function(t,i){var n=this;if(this.close(),t){if(this.sequenceMode&&e.isArray(t))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===i||isNaN(i)||(this.initialPage=i),this.tileSources=t,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(e.isArray(t)||(t=[t]),t.length){this._opening=!0;for(var r,s=t.length,a=0,l=0,c=function(){if(a+l===s)if(a){!n._firstOpen&&n.preserveViewport||(n.viewport.goHome(!0),n.viewport.update()),n._firstOpen=!1;var e=t[0];if(e.tileSource&&(e=e.tileSource),n.overlays&&!n.preserveOverlays)for(var i=0;i<n.overlays.length;i++)n.currentOverlays[i]=o(n,n.overlays[i]);n._drawOverlays(),n._opening=!1,n.raiseEvent("open",{source:e})}else n._opening=!1,n.raiseEvent("open-failed",r)},u=function(t){e.isPlainObject(t)&&t.tileSource||(t={tileSource:t}),void 0!==t.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete t.index),void 0===t.collectionImmediately&&(t.collectionImmediately=!0);var i=t.success;t.success=function(e){if(a++,t.tileSource.overlays)for(var o=0;o<t.tileSource.overlays.length;o++)n.addOverlay(t.tileSource.overlays[o]);i&&i(e),c()};var o=t.error;t.error=function(e){l++,r||(r=e),o&&o(e),c()},n.addTiledImage(t)},d=0;d<t.length;d++)u(t[d]);return this}}},close:function(){return t[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),t[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(t[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),t[this.hash]=null,delete t[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(e){return this.innerTracker.setTracking(e),this.outerTracker.setTracking(e),this.raiseEvent("mouse-enabled",{enabled:e}),this},areControlsEnabled:function(){var e,t=this.controls.length;for(e=0;e<this.controls.length;e++)t=t&&this.controls[e].isVisibile();return t},setControlsEnabled:function(e){return e?c(this):l(this),this.raiseEvent("controls-enabled",{enabled:e}),this},setDebugMode:function(e){for(var t=0;t<this.world.getItemCount();t++)this.world.getItemAt(t).debugMode=e;this.debugMode=e,this.forceRedraw()},isFullPage:function(){return t[this.hash].fullPage},setFullPage:function(i){var n,o,r=document.body,s=r.style,a=document.documentElement.style,l=this;if(i==this.isFullPage())return this;var c={fullPage:i,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",c),c.preventDefaultAction)return this;if(i){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=s.margin,this.docMargin=a.margin,s.margin="0",a.margin="0",this.bodyPadding=s.padding,this.docPadding=a.padding,s.padding="0",a.padding="0",this.bodyWidth=s.width,this.docWidth=a.width,s.width="100%",a.width="100%",this.bodyHeight=s.height,this.docHeight=a.height,s.height="100%",a.height="100%",this.previousBody=[],t[this.hash].prevElementParent=this.element.parentNode,t[this.hash].prevNextSibling=this.element.nextSibling,t[this.hash].prevElementWidth=this.element.style.width,t[this.hash].prevElementHeight=this.element.style.height,n=r.childNodes.length,o=0;o<n;o++)this.previousBody.push(r.childNodes[0]),r.removeChild(r.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,r.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),r.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),t[this.hash].fullPage=!0,e.delegate(this,P)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,s.margin=this.bodyMargin,a.margin=this.docMargin,s.padding=this.bodyPadding,a.padding=this.docPadding,s.width=this.bodyWidth,a.width=this.docWidth,s.height=this.bodyHeight,a.height=this.docHeight,r.removeChild(this.element),n=this.previousBody.length,o=0;o<n;o++)r.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),t[this.hash].prevElementParent.insertBefore(this.element,t[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(r.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=t[this.hash].prevElementWidth,this.element.style.height=t[this.hash].prevElementHeight;var u=0,d=function(){e.setPageScroll(l.pageScroll);var t=e.getPageScroll();++u<10&&(t.x!==l.pageScroll.x||t.y!==l.pageScroll.y)&&e.requestAnimationFrame(d)};e.requestAnimationFrame(d),t[this.hash].fullPage=!1,e.delegate(this,_)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:i}),this},setFullScreen:function(t){var i=this;if(!e.supportsFullScreen)return this.setFullPage(t);if(e.isFullScreen()===t)return this;var n={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var o=function(){var t=e.isFullScreen();t||(e.removeEvent(document,e.fullScreenEventName,o),e.removeEvent(document,e.fullScreenErrorEventName,o),i.setFullPage(!1),i.isFullPage()&&(i.element.style.width=i.fullPageStyleWidth,i.element.style.height=i.fullPageStyleHeight)),i.navigator&&i.viewport&&i.navigator.update(i.viewport),i.raiseEvent("full-screen",{fullScreen:t})};e.addEvent(document,e.fullScreenEventName,o),e.addEvent(document,e.fullScreenErrorEventName,o),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(e){return this.container.style.visibility=e?"":"hidden",this.raiseEvent("visible",{visible:e}),this},addTiledImage:function(t){e.console.assert(t,"[Viewer.addTiledImage] options is required"),e.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!t.replace||t.index>-1&&t.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var i=this;t.replace&&(t.replaceItem=i.world.getItemAt(t.index)),this._hideMessage(),void 0===t.placeholderFillStyle&&(t.placeholderFillStyle=this.placeholderFillStyle),void 0===t.opacity&&(t.opacity=this.opacity),void 0===t.preload&&(t.preload=this.preload),void 0===t.compositeOperation&&(t.compositeOperation=this.compositeOperation),void 0===t.crossOriginPolicy&&(t.crossOriginPolicy=void 0!==t.tileSource.crossOriginPolicy?t.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===t.ajaxWithCredentials&&(t.ajaxWithCredentials=this.ajaxWithCredentials),void 0===t.loadTilesWithAjax&&(t.loadTilesWithAjax=this.loadTilesWithAjax),void 0===t.ajaxHeaders||null===t.ajaxHeaders?t.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(t.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(t.ajaxHeaders=e.extend({},this.ajaxHeaders,t.ajaxHeaders));var n={options:t};function o(e){for(var o=0;o<i._loadQueue.length;o++)if(i._loadQueue[o]===n){i._loadQueue.splice(o,1);break}0===i._loadQueue.length&&r(n),i.raiseEvent("add-item-failed",e),t.error&&t.error(e)}function r(e){i.collectionMode&&(i.world.arrange({immediately:e.options.collectionImmediately,rows:i.collectionRows,columns:i.collectionColumns,layout:i.collectionLayout,tileSize:i.collectionTileSize,tileMargin:i.collectionTileMargin}),i.world.setAutoRefigureSizes(!0))}function s(){for(var t,n,o;i._loadQueue.length&&(t=i._loadQueue[0]).tileSource;){if(i._loadQueue.splice(0,1),t.options.replace){var s=i.world.getIndexOfItem(t.options.replaceItem);-1!=s&&(t.options.index=s),i.world.removeItem(t.options.replaceItem)}n=new e.TiledImage({viewer:i,source:t.tileSource,viewport:i.viewport,drawer:i.drawer,tileCache:i.tileCache,imageLoader:i.imageLoader,x:t.options.x,y:t.options.y,width:t.options.width,height:t.options.height,fitBounds:t.options.fitBounds,fitBoundsPlacement:t.options.fitBoundsPlacement,clip:t.options.clip,placeholderFillStyle:t.options.placeholderFillStyle,opacity:t.options.opacity,preload:t.options.preload,degrees:t.options.degrees,compositeOperation:t.options.compositeOperation,springStiffness:i.springStiffness,animationTime:i.animationTime,minZoomImageRatio:i.minZoomImageRatio,wrapHorizontal:i.wrapHorizontal,wrapVertical:i.wrapVertical,immediateRender:i.immediateRender,blendTime:i.blendTime,alwaysBlend:i.alwaysBlend,minPixelRatio:i.minPixelRatio,smoothTileEdgesMinZoom:i.smoothTileEdgesMinZoom,iOSDevice:i.iOSDevice,crossOriginPolicy:t.options.crossOriginPolicy,ajaxWithCredentials:t.options.ajaxWithCredentials,loadTilesWithAjax:t.options.loadTilesWithAjax,ajaxHeaders:t.options.ajaxHeaders,debugMode:i.debugMode}),i.collectionMode&&i.world.setAutoRefigureSizes(!1),i.world.addItem(n,{index:t.options.index}),0===i._loadQueue.length&&r(t),1!==i.world.getItemCount()||i.preserveViewport||i.viewport.goHome(!0),i.navigator&&(o=e.extend({},t.options,{replace:!1,originalTiledImage:n,tileSource:t.tileSource}),i.navigator.addTiledImage(o)),t.options.success&&t.options.success({item:n})}}e.isArray(t.tileSource)?setTimeout((function(){o({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:t.tileSource,options:t})})):(this._loadQueue.push(n),function(t,i,n,o,r){var s=t;if("string"==e.type(i))if(i.match(/^\s*<.*>\s*$/))i=e.parseXml(i);else if(i.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var a=e.parseJSON(i);i=a}catch(e){}function l(e,t){e.ready?o(e):(e.addHandler("ready",(function(){o(e)})),e.addHandler("open-failed",(function(e){r({message:e.message,source:t})})))}setTimeout((function(){if("string"==e.type(i))(i=new e.TileSource({url:i,crossOriginPolicy:void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,ajaxHeaders:t.ajaxHeaders,useCanvas:t.useCanvas,success:function(e){o(e.tileSource)}})).addHandler("open-failed",(function(e){r(e)}));else if(e.isPlainObject(i)||i.nodeType)if(void 0!==i.crossOriginPolicy||void 0===n.crossOriginPolicy&&void 0===t.crossOriginPolicy||(i.crossOriginPolicy=void 0!==n.crossOriginPolicy?n.crossOriginPolicy:t.crossOriginPolicy),void 0===i.ajaxWithCredentials&&(i.ajaxWithCredentials=t.ajaxWithCredentials),void 0===i.useCanvas&&(i.useCanvas=t.useCanvas),e.isFunction(i.getTileUrl)){var a=new e.TileSource(i);a.getTileUrl=i.getTileUrl,o(a)}else{var c=e.TileSource.determineType(s,i);if(!c)return void r({message:"Unable to load TileSource",source:i});var u=c.prototype.configure.apply(s,[i]);l(new c(u),i)}else l(i,i)}))}(this,t.tileSource,t,(function(e){n.tileSource=e,s()}),(function(e){e.options=t,o(e),s()})))},addSimpleImage:function(t){e.console.assert(t,"[Viewer.addSimpleImage] options is required"),e.console.assert(t.url,"[Viewer.addSimpleImage] options.url is required");var i=e.extend({},t,{tileSource:{type:"image",url:t.url}});delete i.url,this.addTiledImage(i)},addLayer:function(t){var i=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var n=e.extend({},t,{success:function(e){i.raiseEvent("add-layer",{options:t,drawer:e.item})},error:function(e){i.raiseEvent("add-layer-failed",e)}});return this.addTiledImage(n),this},getLayerAtLevel:function(t){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,i){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,i)},removeLayer:function(t){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return t[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=e.delegate(this,u),i=e.delegate(this,d),n=e.delegate(this,W),o=e.delegate(this,j),r=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:A(this.prefixUrl,r.previous.REST),srcGroup:A(this.prefixUrl,r.previous.GROUP),srcHover:A(this.prefixUrl,r.previous.HOVER),srcDown:A(this.prefixUrl,r.previous.DOWN),onRelease:o,onFocus:t,onBlur:i}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:A(this.prefixUrl,r.next.REST),srcGroup:A(this.prefixUrl,r.next.GROUP),srcHover:A(this.prefixUrl,r.next.HOVER),srcDown:A(this.prefixUrl,r.next.DOWN),onRelease:n,onFocus:t,onBlur:i}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=e.delegate(this,k),i=e.delegate(this,O),n=e.delegate(this,H),o=e.delegate(this,R),r=e.delegate(this,D),s=e.delegate(this,F),a=e.delegate(this,z),l=e.delegate(this,N),c=e.delegate(this,q),h=e.delegate(this,u),m=e.delegate(this,d),p=this.navImages,g=[],f=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(f=!1),this.showZoomControl&&(g.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:A(this.prefixUrl,p.zoomIn.REST),srcGroup:A(this.prefixUrl,p.zoomIn.GROUP),srcHover:A(this.prefixUrl,p.zoomIn.HOVER),srcDown:A(this.prefixUrl,p.zoomIn.DOWN),onPress:t,onRelease:i,onClick:n,onEnter:t,onExit:i,onFocus:h,onBlur:m})),g.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:A(this.prefixUrl,p.zoomOut.REST),srcGroup:A(this.prefixUrl,p.zoomOut.GROUP),srcHover:A(this.prefixUrl,p.zoomOut.HOVER),srcDown:A(this.prefixUrl,p.zoomOut.DOWN),onPress:o,onRelease:i,onClick:r,onEnter:o,onExit:i,onFocus:h,onBlur:m}))),this.showHomeControl&&g.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:A(this.prefixUrl,p.home.REST),srcGroup:A(this.prefixUrl,p.home.GROUP),srcHover:A(this.prefixUrl,p.home.HOVER),srcDown:A(this.prefixUrl,p.home.DOWN),onRelease:s,onFocus:h,onBlur:m})),this.showFullPageControl&&g.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:A(this.prefixUrl,p.fullpage.REST),srcGroup:A(this.prefixUrl,p.fullpage.GROUP),srcHover:A(this.prefixUrl,p.fullpage.HOVER),srcDown:A(this.prefixUrl,p.fullpage.DOWN),onRelease:a,onFocus:h,onBlur:m})),this.showRotationControl&&(g.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:A(this.prefixUrl,p.rotateleft.REST),srcGroup:A(this.prefixUrl,p.rotateleft.GROUP),srcHover:A(this.prefixUrl,p.rotateleft.HOVER),srcDown:A(this.prefixUrl,p.rotateleft.DOWN),onRelease:l,onFocus:h,onBlur:m})),g.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:A(this.prefixUrl,p.rotateright.REST),srcGroup:A(this.prefixUrl,p.rotateright.GROUP),srcHover:A(this.prefixUrl,p.rotateright.HOVER),srcDown:A(this.prefixUrl,p.rotateright.DOWN),onRelease:c,onFocus:h,onBlur:m}))),f&&(this.buttons=new e.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",e.delegate(this,B)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(e){return this.tileSources&&e>=0&&e<this.tileSources.length&&(this.raiseEvent("page",{page:e}),this._sequenceIndex=e,this._updateSequenceButtons(e),this.open(this.tileSources[e]),this.referenceStrip&&this.referenceStrip.setFocus(e)),this},addOverlay:function(t,i,n,s){var a;if(a=e.isPlainObject(t)?t:{element:t,location:i,placement:n,onDraw:s},t=e.getElement(a.element),r(this.currentOverlays,t)>=0)return this;var l=o(this,a);return this.currentOverlays.push(l),l.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:t,location:a.location,placement:a.placement}),this},updateOverlay:function(i,n,o){var s;return i=e.getElement(i),(s=r(this.currentOverlays,i))>=0&&(this.currentOverlays[s].update(n,o),t[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:i,location:n,placement:o})),this},removeOverlay:function(i){var n;return i=e.getElement(i),(n=r(this.currentOverlays,i))>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),t[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:i})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return t[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(t){var i;return t=e.getElement(t),(i=r(this.currentOverlays,t))>=0?this.currentOverlays[i]:null},_updateSequenceButtons:function(e){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==e?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(e>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var i=e.makeNeutralElement("div");i.appendChild(document.createTextNode(t)),this.messageDiv=e.makeCenteredNode(i),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var e=this.messageDiv;e&&(e.parentNode.removeChild(e),delete this.messageDiv)},gestureSettingsByDeviceType:function(e){switch(e){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var e,t=this.currentOverlays.length;for(e=0;e<t;e++)this.currentOverlays[e].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(e){function t(e){e.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(e.position)),this.viewer.viewport.applyConstraints())}function i(e){this.viewer.viewport&&(this.panHorizontal||(e.delta.x=0),this.panVertical||(e.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(e.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function n(e){e.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function o(e){return this.viewer.raiseEvent("navigator-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),!1}function r(e,t){e.style.webkitTransform="rotate("+t+"deg)",e.style.mozTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.oTransform="rotate("+t+"deg)",e.style.transform="rotate("+t+"deg)"}e.Navigator=function(s){var a,l,c,u,d=s.viewer,h=this;function m(e){r(h.displayRegionContainer,e),r(h.displayRegion,-e),h.viewport.setRotation(e)}s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),s.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"==s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==s.position?s.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==s.position?s.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"==s.position&&(s.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",(s=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize,minZoomImageRatio:1})).minPixelRatio=this.minPixelRatio=d.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!=e.ControlAnchor.NONE&&(c=this.element.style,u=this.borderWidth,c.margin="0px",c.border=u+"px solid #555",c.padding="0px",c.background="#000",c.opacity=.8,c.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(e,t){e.position="relative",e.top="0px",e.left="0px",e.fontSize="0px",e.overflow="hidden",e.border=t+"px solid #900",e.margin="0px",e.padding="0px",e.background="transparent",e.float="left",e.cssFloat="left",e.styleFloat="left",e.zIndex=999999999,e.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",d.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!=e.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!=e.ControlAnchor.NONE,this._resizeWithViewer&&(s.width&&s.height?(this.element.style.height="number"==typeof s.height?s.height+"px":s.height,this.element.style.width="number"==typeof s.width?s.width+"px":s.width):(a=e.getElementSize(d.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a),l=e.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate&&(m(s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0),s.viewer.addHandler("rotate",(function(e){m(e.degrees)}))),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,i),clickHandler:e.delegate(this,t),releaseHandler:e.delegate(this,n),scrollHandler:e.delegate(this,o)}),this.addHandler("reset-size",(function(){h.viewport&&h.viewport.goHome(!0)})),d.world.addHandler("item-index-change",(function(e){window.setTimeout((function(){var t=h.world.getItemAt(e.previousIndex);h.world.setItemIndex(t,e.newIndex)}),1)})),d.world.addHandler("remove-item",(function(e){var t=e.item,i=h._getMatchingItem(t);i&&h.world.removeItem(i)})),this.update(d.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var t=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);t.equals(this.oldContainerSize)||(this.viewport.resize(t,!0),this.viewport.goHome(!0),this.oldContainerSize=t,this.drawer.clear(),this.world.draw())}},update:function(t){var i,n,o,r,s,a;if(i=e.getElementSize(this.viewer.element),this._resizeWithViewer&&i.x&&i.y&&!i.equals(this.oldViewerSize)&&(this.oldViewerSize=i,this.maintainSizeRatio||!this.elementArea?(n=i.x*this.sizeRatio,o=i.y*this.sizeRatio):(n=Math.sqrt(this.elementArea*(i.x/i.y)),o=this.elementArea/n),this.element.style.width=Math.round(n)+"px",this.element.style.height=Math.round(o)+"px",this.elementArea||(this.elementArea=n*o),this.updateSize()),t&&this.viewport){r=t.getBoundsNoRotate(!0),s=this.viewport.pixelFromPointNoRotate(r.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(r.getBottomRight(),!1).minus(this.totalBorderWidths);var l=this.displayRegion.style;l.display=this.world.getItemCount()?"block":"none",l.top=Math.round(s.y)+"px",l.left=Math.round(s.x)+"px";var c=Math.abs(s.x-a.x),u=Math.abs(s.y-a.y);l.width=Math.round(Math.max(c,0))+"px",l.height=Math.round(Math.max(u,0))+"px"}},addTiledImage:function(t){var i=this,n=t.originalTiledImage;delete t.original;var o=e.extend({},t,{success:function(e){var t=e.item;function o(){i._matchBounds(t,n)}t._originalForNavigator=n,i._matchBounds(t,n,!0),n.addHandler("bounds-change",o),n.addHandler("clip-change",o),n.addHandler("opacity-change",(function(){i._matchOpacity(t,n)})),n.addHandler("composite-operation-change",(function(){i._matchCompositeOperation(t,n)}))}});return e.Viewer.prototype.addTiledImage.apply(this,[o])},_getMatchingItem:function(e){for(var t,i=this.world.getItemCount(),n=0;n<i;n++)if((t=this.world.getItemAt(n))._originalForNavigator===e)return t;return null},_matchBounds:function(e,t,i){var n=t.getBoundsNoRotate();e.setPosition(n.getTopLeft(),i),e.setWidth(n.width,i),e.setRotation(t.getRotation(),i),e.setClip(t.getClip())},_matchOpacity:function(e,t){e.setOpacity(t.opacity)},_matchCompositeOperation:function(e,t){e.setCompositeOperation(t.compositeOperation)}})}(OpenSeadragon),function(e){var t={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};e.extend(e,{getString:function(i){var n,o=i.split("."),r=null,s=arguments,a=t;for(n=0;n<o.length-1;n++)a=a[o[n]]||{};return"string"!=typeof(r=a[o[n]])&&(e.console.log("Untranslated source string:",i),r=""),r.replace(/\{\d+\}/g,(function(e){var t=parseInt(e.match(/\d+/),10)+1;return t<s.length?s[t]:""}))},setString:function(e,i){var n,o=e.split("."),r=t;for(n=0;n<o.length-1;n++)r[o[n]]||(r[o[n]]={}),r=r[o[n]];r[o[n]]=i}})}(OpenSeadragon),function(e){e.Point=function(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(t){return new e.Point(this.x+t.x,this.y+t.y)},minus:function(t){return new e.Point(this.x-t.x,this.y-t.y)},times:function(t){return new e.Point(this.x*t,this.y*t)},divide:function(t){return new e.Point(this.x/t,this.y/t)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},squaredDistanceTo:function(e){return Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)},apply:function(t){return new e.Point(t(this.x),t(this.y))},equals:function(t){return t instanceof e.Point&&this.x===t.x&&this.y===t.y},rotate:function(t,i){var n,o;if(i=i||new e.Point(0,0),t%90==0)switch(e.positiveModulo(t,360)){case 0:n=1,o=0;break;case 90:n=0,o=1;break;case 180:n=-1,o=0;break;case 270:n=0,o=-1}else{var r=t*Math.PI/180;n=Math.cos(r),o=Math.sin(r)}var s=n*(this.x-i.x)-o*(this.y-i.y)+i.x,a=o*(this.x-i.x)+n*(this.y-i.y)+i.y;return new e.Point(s,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(t,i,n,o,r,s){var a,l,c=this,u=arguments;if(a=e.isPlainObject(t)?t:{width:u[0],height:u[1],tileSize:u[2],tileOverlap:u[3],minLevel:u[4],maxLevel:u[5]},e.EventSource.call(this),e.extend(!0,this,a),!this.success)for(l=0;l<arguments.length;l++)if(e.isFunction(arguments[l])){this.success=arguments[l];break}this.success&&this.addHandler("ready",(function(e){c.success(e)})),"string"==e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new e.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(t){return e.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(e){return this._tileWidth?this._tileWidth:this.getTileSize(e)},getTileHeight:function(e){return this._tileHeight?this._tileHeight:this.getTileSize(e)},getLevelScale:function(e){var t,i={};for(t=0;t<=this.maxLevel;t++)i[t]=1/Math.pow(2,this.maxLevel-t);return this.getLevelScale=function(e){return i[e]},this.getLevelScale(e)},getNumTiles:function(t){var i=this.getLevelScale(t),n=Math.ceil(i*this.dimensions.x/this.getTileWidth(t)),o=Math.ceil(i*this.dimensions.y/this.getTileHeight(t));return new e.Point(n,o)},getPixelRatio:function(t){var i=this.dimensions.times(this.getLevelScale(t)),n=1/i.x,o=1/i.y;return new e.Point(n,o)},getClosestLevel:function(){var e,t;for(e=this.minLevel+1;e<=this.maxLevel&&!((t=this.getNumTiles(e)).x>1||t.y>1);e++);return e-1},getTileAtPoint:function(t,i){var n=i.x>=0&&i.x<=1&&i.y>=0&&i.y<=1/this.aspectRatio;e.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var o=this.dimensions.x*this.getLevelScale(t),r=i.x*o,s=i.y*o,a=Math.floor(r/this.getTileWidth(t)),l=Math.floor(s/this.getTileHeight(t));return i.x>=1&&(a=this.getNumTiles(t).x-1),i.y>=1/this.aspectRatio-1e-16&&(l=this.getNumTiles(t).y-1),new e.Point(a,l)},getTileBounds:function(t,i,n){var o=this.dimensions.times(this.getLevelScale(t)),r=this.getTileWidth(t),s=this.getTileHeight(t),a=0===i?0:r*i-this.tileOverlap,l=0===n?0:s*n-this.tileOverlap,c=r+(0===i?1:2)*this.tileOverlap,u=s+(0===n?1:2)*this.tileOverlap,d=1/o.x;return c=Math.min(c,o.x-a),u=Math.min(u,o.y-l),new e.Rect(a*d,l*d,c*d,u*d)},getImageInfo:function(t){var i,n,o,r,s,a,l,c=this;t&&(l=(a=(s=t.split("/"))[s.length-1]).lastIndexOf("."))>-1&&(s[s.length-1]=a.slice(0,l)),n=function(i){"string"==typeof i&&(i=e.parseXml(i));var n=e.TileSource.determineType(c,i,t);n?(void 0===(r=n.prototype.configure.apply(c,[i,t])).ajaxWithCredentials&&(r.ajaxWithCredentials=c.ajaxWithCredentials),o=new n(r),c.ready=!0,c.raiseEvent("ready",{tileSource:o})):c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(i=t.split("/").pop().replace(".js",""),e.jsonp({url:t,async:!1,callbackName:i,callback:n})):e.makeAjaxRequest({url:t,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var i=function(t){var i,n,o=t.responseText,r=t.status;if(!t)throw new Error(e.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw i=404==(r=t.status)?"Not Found":t.statusText,new Error(e.getString("Errors.Status",r,i));if(o.match(/\s*<.*/))try{n=t.responseXML&&t.responseXML.documentElement?t.responseXML:e.parseXml(o)}catch(e){n=t.responseText}else if(o.match(/\s*[\{\[].*/))try{n=e.parseJSON(o)}catch(e){n=o}else n=o;return n}(t);n(i)},error:function(e,i){var n;try{n="HTTP "+e.status+" attempting to load TileSource"}catch(e){n=(void 0!==i&&i.toString?i.toString():"Unknown error")+" attempting to load TileSource"}c.raiseEvent("open-failed",{message:n,source:t})}})},supports:function(e,t){return!1},configure:function(e,t){throw new Error("Method not implemented.")},getTileUrl:function(e,t,i){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(e,t,i){return{}},tileExists:function(e,t,i){var n=this.getNumTiles(e);return e>=this.minLevel&&e<=this.maxLevel&&t>=0&&i>=0&&t<n.x&&i<n.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(t,i,n){var o;for(o in OpenSeadragon)if(o.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[o])&&e.isFunction(OpenSeadragon[o].prototype.supports)&&OpenSeadragon[o].prototype.supports.call(t,i,n))return OpenSeadragon[o];e.console.error("No TileSource was able to open %s %s",n,i)}}(OpenSeadragon),function(e){function t(t,i){var n,o,r=i.Image,s=r.Url,a=r.Format,l=r.Size,c=r.DisplayRect||[],u=parseInt(l.Width,10),d=parseInt(l.Height,10),h=parseInt(r.TileSize,10),m=parseInt(r.Overlap,10),p=[];for(o=0;o<c.length;o++)n=c[o].Rect,p.push(new e.DisplayRect(parseInt(n.X,10),parseInt(n.Y,10),parseInt(n.Width,10),parseInt(n.Height,10),parseInt(n.MinLevel,10),parseInt(n.MaxLevel,10)));return e.extend(!0,{width:u,height:d,tileSize:h,tileOverlap:m,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:p},i)}e.DziTileSource=function(t,i,n,o,r,s,a,l,c){var u,d,h,m;if(m=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=m.tilesUrl,this.fileFormat=m.fileFormat,this.displayRects=m.displayRects,this.displayRects)for(u=this.displayRects.length-1;u>=0;u--)for(h=(d=this.displayRects[u]).minLevel;h<=d.maxLevel;h++)this._levelRects[h]||(this._levelRects[h]=[]),this._levelRects[h].push(d);e.TileSource.apply(this,[m])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){var i;return e.Image?i=e.Image.xmlns:e.documentElement&&("Image"!=e.documentElement.localName&&"Image"!=e.documentElement.tagName||(i=e.documentElement.namespaceURI)),-1!==(i=(i||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==i.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(i,n){var o;return o=e.isPlainObject(i)?t(0,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var o,r,s,a,l,c=n.documentElement,u=c.localName||c.tagName,d=n.documentElement.namespaceURI,h=null,m=[];if("Image"==u)try{if(void 0===(a=c.getElementsByTagName("Size")[0])&&(a=c.getElementsByTagNameNS(d,"Size")[0]),h={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:c.getAttribute("Url"),Format:c.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(c.getAttribute("Overlap"),10),TileSize:parseInt(c.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!e.imageFormatSupported(h.Image.Format))throw new Error(e.getString("Errors.ImageFormat",h.Image.Format.toUpperCase()));for(void 0===(o=c.getElementsByTagName("DisplayRect"))&&(o=c.getElementsByTagNameNS(d,"DisplayRect")[0]),l=0;l<o.length;l++)void 0===(s=(r=o[l]).getElementsByTagName("Rect")[0])&&(s=r.getElementsByTagNameNS(d,"Rect")[0]),m.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(r.getAttribute("MinLevel"),10),MaxLevel:parseInt(r.getAttribute("MaxLevel"),10)}});return m.length&&(h.Image.DisplayRect=m),t(0,h)}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.Dzi"))}else{if("Collection"==u)throw new Error(e.getString("Errors.Dzc"));if("Error"==u){var p=c.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(p)}}throw new Error(e.getString("Errors.Dzi"))}(0,i),n&&!o.tilesUrl&&(o.tilesUrl=n.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=n.search(/\.(dzi|xml|js)\?/)?o.queryParams=n.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(e,t,i){return[this.tilesUrl,e,"/",t,"_",i,".",this.fileFormat,this.queryParams].join("")},tileExists:function(e,t,i){var n,o,r,s,a,l,c,u=this._levelRects[e];if(!u||!u.length)return!0;for(c=u.length-1;c>=0;c--)if(!(e<(n=u[c]).minLevel||e>n.maxLevel)&&(o=this.getLevelScale(e),r=n.x*o,s=n.y*o,a=r+n.width*o,l=s+n.height*o,r=Math.floor(r/this._tileWidth),s=Math.floor(s/this._tileWidth),a=Math.ceil(a/this._tileWidth),l=Math.ceil(l/this._tileWidth),r<=t&&t<a&&s<=i&&i<l))return!0;return!1}})}(OpenSeadragon),function(e){function t(i,n,o){var r,s;if(3==i.nodeType&&o)(s=i.nodeValue.trim()).match(/^\d*$/)&&(s=Number(s)),n[o]?(e.isArray(n[o])||(n[o]=[n[o]]),n[o].push(s)):n[o]=s;else if(1==i.nodeType)for(r=0;r<i.childNodes.length;r++)t(i.childNodes[r],n,i.nodeName)}e.IIIFTileSource=function(t){if(e.extend(!0,this,t),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(t.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)t.tileWidth=this.tile_width,t.tileHeight=this.tile_height;else if(this.tile_width)t.tileSize=this.tile_width;else if(this.tile_height)t.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)t.tileWidth=this.tiles[0].width,t.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var i=0;i<this.tiles.length;i++)for(var n=0;n<this.tiles[i].scaleFactors.length;n++){var o=this.tiles[i].scaleFactors[n];this.scale_factors.push(o),t.tileSizePerScaleFactor[o]={width:this.tiles[i].width,height:this.tiles[i].height||this.tiles[i].width}}}else if(c=t.profile,-1==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"].indexOf(c[0])||-1!=c.indexOf("sizeByW")){for(var r=Math.min(this.height,this.width),s=[256,512,1024],a=[],l=0;l<s.length;l++)s[l]<=r&&a.push(s[l]);a.length>0?t.tileSize=Math.max.apply(null,a):t.tileSize=r}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,t.levels=function(e){for(var t=[],i=0;i<e.sizes.length;i++)t.push({url:e["@id"]+"/full/"+e.sizes[i].width+",/0/default.jpg",width:e.sizes[i].width,height:e.sizes[i].height});return t.sort((function(e,t){return e.width-t.width}))}(this),e.extend(!0,t,{width:t.levels[t.levels.length-1].width,height:t.levels[t.levels.length-1].height,tileSize:Math.max(t.height,t.width),tileOverlap:0,minLevel:0,maxLevel:t.levels.length-1}),this.levels=t.levels):e.console.error("Nothing in the info.json to construct image pyramids from");var c;t.maxLevel||this.emulateLegacyImagePyramid||(this.scale_factors?t.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):t.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),e.TileSource.apply(this,[t])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return!!(e.protocol&&"http://iiif.io/api/image"==e.protocol||e["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"==e["@context"]||"http://iiif.io/api/image/1/context.json"==e["@context"])||e.profile&&0===e.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||e.identifier&&e.width&&e.height||e.documentElement&&"info"==e.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==e.documentElement.namespaceURI)},configure:function(i,n){if(e.isPlainObject(i))return i["@context"]||(i["@context"]="http://iiif.io/api/image/1.0/context.json",i["@id"]=n.replace("/info.json","")),i;var o=function(i){if(!i||!i.documentElement)throw new Error(e.getString("Errors.Xml"));var n=i.documentElement,o=null;if("info"==n.tagName)try{return t(n,o={}),o}catch(t){throw t instanceof Error?t:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(i);return o["@context"]="http://iiif.io/api/image/1.0/context.json",o["@id"]=n.replace("/info.xml",""),o},getTileWidth:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].width:this._tileWidth},getTileHeight:function(t){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,t);var i=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[i]?this.tileSizePerScaleFactor[i].height:this._tileHeight},getLevelScale:function(t){if(this.emulateLegacyImagePyramid){var i=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(i=this.levels[t].width/this.levels[this.maxLevel].width),i}return e.TileSource.prototype.getLevelScale.call(this,t)},getNumTiles:function(t){return this.emulateLegacyImagePyramid?this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,t)},getTileAtPoint:function(t,i){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,t,i)},getTileUrl:function(e,t,i){if(this.emulateLegacyImagePyramid){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}var o,r,s,a,l,c,u,d,h,m,p,g=Math.pow(.5,this.maxLevel-e),f=Math.ceil(this.width*g),v=Math.ceil(this.height*g);return o=this.getTileWidth(e),r=this.getTileHeight(e),s=Math.ceil(o/g),a=Math.ceil(r/g),p=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",f<o&&v<r?(m=f+",",l="full"):(c=t*s,u=i*a,d=Math.min(s,this.width-c),h=Math.min(a,this.height-u),m=Math.ceil(d*g)+",",l=[c,u,d,h].join(",")),[this["@id"],l,m,"0",p].join("/")}})}(OpenSeadragon),function(e){e.OsmTileSource=function(t,i,n,o,r){var s;(s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,e.TileSource.apply(this,[s])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"openstreetmaps"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,i){return this.tilesUrl+(e-8)+"/"+t+"/"+i+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(t,i,n,o,r){var s;s=e.isPlainObject(t)?t:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,l=256*Math.ceil(s.width/256),c=256*Math.ceil(s.height/256);a=l>c?l/256:c/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=l,s.height=c,e.TileSource.apply(this,[s])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"tiledmapservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,i){var n=this.getNumTiles(e).y-1;return this.tilesUrl+e+"/"+t+"/"+(n-i)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(e){e.tileSize=256;var t={x:e.width,y:e.height};for(e.imageSizes=[{x:e.width,y:e.height}],e.gridSize=[this._getGridSize(e.width,e.height,e.tileSize)];parseInt(t.x,10)>e.tileSize||parseInt(t.y,10)>e.tileSize;)t.x=Math.floor(t.x/2),t.y=Math.floor(t.y/2),e.imageSizes.push({x:t.x,y:t.y}),e.gridSize.push(this._getGridSize(t.x,t.y,e.tileSize));e.imageSizes.reverse(),e.gridSize.reverse(),e.minLevel=0,e.maxLevel=e.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[e])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(e,t,i){return{x:Math.ceil(e/i),y:Math.ceil(t/i)}},_calculateAbsoluteTileNumber:function(e,t,i){for(var n=0,o={},r=0;r<e;r++)n+=(o=this.gridSize[r]).x*o.y;return n+((o=this.gridSize[e]).x*i+t)},supports:function(e,t){return e.type&&"zoomifytileservice"==e.type},configure:function(e,t){return e},getTileUrl:function(e,t,i){var n,o=this._calculateAbsoluteTileNumber(e,t,i);return n=Math.floor(o/256),this.tilesUrl+"TileGroup"+n+"/"+e+"-"+t+"-"+i+".jpg"}})}(OpenSeadragon),function(e){function t(e,t){return t.levels}e.LegacyTileSource=function(t){var i,n,o;e.isArray(t)&&(i={type:"legacy-image-pyramid",levels:t}),i.levels=function(t){var i,n,o=[];for(n=0;n<t.length;n++)(i=t[n]).height&&i.width&&i.url?o.push({url:i.url,width:Number(i.width),height:Number(i.height)}):e.console.error("Unsupported image format: %s",i.url?i.url:"<no URL>");return o.sort((function(e,t){return e.height-t.height}))}(i.levels),i.levels.length>0?(n=i.levels[i.levels.length-1].width,o=i.levels[i.levels.length-1].height):(n=0,o=0,e.console.error("No supported image formats found")),e.extend(!0,i,{width:n,height:o,tileSize:Math.max(o,n),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),e.TileSource.apply(this,[i]),this.levels=i.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"legacy-image-pyramid"==e.type||e.documentElement&&"legacy-image-pyramid"==e.documentElement.getAttribute("type")},configure:function(i,n){return e.isPlainObject(i)?t(0,i):function(i,n){if(!n||!n.documentElement)throw new Error(e.getString("Errors.Xml"));var o,r,s=n.documentElement,a=s.tagName,l=null,c=[];if("image"==a)try{for(l={type:s.getAttribute("type"),levels:[]},c=s.getElementsByTagName("level"),r=0;r<c.length;r++)o=c[r],l.levels.push({url:o.getAttribute("url"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)});return t(0,l)}catch(e){throw e instanceof Error?e:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}(0,i)},getLevelScale:function(e){var t=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n}})}(OpenSeadragon),function(e){e.ImageTileSource=function(t){t=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},t),e.TileSource.apply(this,[t])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(e,t){return e.type&&"image"===e.type},configure:function(e,t){return e},getImageInfo:function(t){var i=this._image=new Image,n=this;this.crossOriginPolicy&&(i.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(i.useCredentials=this.ajaxWithCredentials),e.addEvent(i,"load",(function(){n.width=Object.prototype.hasOwnProperty.call(i,"naturalWidth")?i.naturalWidth:i.width,n.height=Object.prototype.hasOwnProperty.call(i,"naturalHeight")?i.naturalHeight:i.height,n.aspectRatio=n.width/n.height,n.dimensions=new e.Point(n.width,n.height),n._tileWidth=n.width,n._tileHeight=n.height,n.tileOverlap=0,n.minLevel=0,n.levels=n._buildLevels(),n.maxLevel=n.levels.length-1,n.ready=!0,n.raiseEvent("ready",{tileSource:n})})),e.addEvent(i,"error",(function(){n.raiseEvent("open-failed",{message:"Error loading image at "+t,source:t})})),i.src=t},getLevelScale:function(e){var t=NaN;return e>=this.minLevel&&e<=this.maxLevel&&(t=this.levels[e].width/this.levels[this.maxLevel].width),t},getNumTiles:function(t){return this.getLevelScale(t)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].url),n},getContext2D:function(e,t,i){var n=null;return e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].context2D),n},_buildLevels:function(){var t=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,t;var i=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,n=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,o=document.createElement("canvas"),r=o.getContext("2d");if(o.width=i,o.height=n,r.drawImage(this._image,0,0,i,n),t[0].context2D=r,delete this._image,e.isCanvasTainted(o))return t;for(;i>=2&&n>=2;){i=Math.floor(i/2),n=Math.floor(n/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=i,s.height=n,a.drawImage(o,0,0,i,n),t.splice(0,0,{context2D:a,width:i,height:n}),o=s,r=a}return t}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(t,i,n,o){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function t(i){e.requestAnimationFrame((function(){!function(i){var n;i.shouldFade&&(n=1-(e.now()-i.fadeBeginTime)/i.fadeLength,n=Math.min(1,n),n=Math.max(0,n),i.imgGroup&&e.setElementOpacity(i.imgGroup,n,!0),n>0&&t(i))}(i)}))}function i(t,i){t.element.disabled||(i>=e.ButtonState.GROUP&&t.currentState==e.ButtonState.REST&&(function(t){t.shouldFade=!1,t.imgGroup&&e.setElementOpacity(t.imgGroup,1,!0)}(t),t.currentState=e.ButtonState.GROUP),i>=e.ButtonState.HOVER&&t.currentState==e.ButtonState.GROUP&&(t.imgHover&&(t.imgHover.style.visibility=""),t.currentState=e.ButtonState.HOVER),i>=e.ButtonState.DOWN&&t.currentState==e.ButtonState.HOVER&&(t.imgDown&&(t.imgDown.style.visibility=""),t.currentState=e.ButtonState.DOWN))}function n(i,n){i.element.disabled||(n<=e.ButtonState.HOVER&&i.currentState==e.ButtonState.DOWN&&(i.imgDown&&(i.imgDown.style.visibility="hidden"),i.currentState=e.ButtonState.HOVER),n<=e.ButtonState.GROUP&&i.currentState==e.ButtonState.HOVER&&(i.imgHover&&(i.imgHover.style.visibility="hidden"),i.currentState=e.ButtonState.GROUP),n<=e.ButtonState.REST&&i.currentState==e.ButtonState.GROUP&&(function(i){i.shouldFade=!0,i.fadeBeginTime=e.now()+i.fadeDelay,window.setTimeout((function(){t(i)}),i.fadeDelay)}(i),i.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(t){var o=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},t),this.element=t.element||e.makeNeutralElement("div"),t.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor==e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){t.insideElementPressed?(i(o,e.ButtonState.DOWN),o.raiseEvent("enter",{originalEvent:t.originalEvent})):t.buttonDownAny||i(o,e.ButtonState.HOVER)},focusHandler:function(e){this.enterHandler(e),o.raiseEvent("focus",{originalEvent:e.originalEvent})},exitHandler:function(t){n(o,e.ButtonState.GROUP),t.insideElementPressed&&o.raiseEvent("exit",{originalEvent:t.originalEvent})},blurHandler:function(e){this.exitHandler(e),o.raiseEvent("blur",{originalEvent:e.originalEvent})},pressHandler:function(t){i(o,e.ButtonState.DOWN),o.raiseEvent("press",{originalEvent:t.originalEvent})},releaseHandler:function(t){t.insideElementPressed&&t.insideElementReleased?(n(o,e.ButtonState.HOVER),o.raiseEvent("release",{originalEvent:t.originalEvent})):t.insideElementPressed?n(o,e.ButtonState.GROUP):i(o,e.ButtonState.HOVER)},clickHandler:function(e){e.quick&&o.raiseEvent("click",{originalEvent:e.originalEvent})},keyHandler:function(e){return 13!==e.keyCode||(o.raiseEvent("click",{originalEvent:e.originalEvent}),o.raiseEvent("release",{originalEvent:e.originalEvent}),!1)}}),n(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){i(this,e.ButtonState.GROUP)},notifyGroupExit:function(){n(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(e){e.ButtonGroup=function(t){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},t);var i,n=this.buttons.concat([]),o=this;if(this.element=t.element||e.makeNeutralElement("div"),!t.group)for(this.label=e.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),i=0;i<n.length;i++)this.element.appendChild(n[i].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){var t;for(t=0;t<o.buttons.length;t++)o.buttons[t].notifyGroupEnter()},exitHandler:function(e){var t;if(!e.insideElementPressed)for(t=0;t<o.buttons.length;t++)o.buttons[t].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(e){e.Rect=function(t,i,n,o,r){var s,a;this.x="number"==typeof t?t:0,this.y="number"==typeof i?i:0,this.width="number"==typeof n?n:0,this.height="number"==typeof o?o:0,this.degrees="number"==typeof r?r:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(s=this.getTopRight(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(s=this.getBottomRight(),this.x=s.x,this.y=s.y,this.degrees-=180):this.degrees>=90&&(s=this.getBottomLeft(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(t,i,n){var o=t.distanceTo(i),r=t.distanceTo(n),s=i.minus(t),a=Math.atan(s.y/s.x);return s.x<0?a+=Math.PI:s.y<0&&(a+=2*Math.PI),new e.Rect(t.x,t.y,o,r,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(t){return t instanceof e.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new e.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new e.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var i=this.getBoundingBox(),n=t.getBoundingBox(),o=Math.min(i.x,n.x),r=Math.min(i.y,n.y),s=Math.max(i.x+i.width,n.x+n.width),a=Math.max(i.y+i.height,n.y+n.height);return new e.Rect(o,r,s-o,a-r)},intersection:function(t){var i=1e-10,n=[],o=this.getTopLeft();t.containsPoint(o,i)&&n.push(o);var r=this.getTopRight();t.containsPoint(r,i)&&n.push(r);var s=this.getBottomLeft();t.containsPoint(s,i)&&n.push(s);var a=this.getBottomRight();t.containsPoint(a,i)&&n.push(a);var l=t.getTopLeft();this.containsPoint(l,i)&&n.push(l);var c=t.getTopRight();this.containsPoint(c,i)&&n.push(c);var u=t.getBottomLeft();this.containsPoint(u,i)&&n.push(u);var d=t.getBottomRight();this.containsPoint(d,i)&&n.push(d);for(var h=this._getSegments(),m=t._getSegments(),p=0;p<h.length;p++)for(var g=h[p],f=0;f<m.length;f++){var v=m[f],y=w(g[0],g[1],v[0],v[1]);y&&n.push(y)}function w(t,n,o,r){var s=n.minus(t),a=r.minus(o),l=-a.x*s.y+s.x*a.y;if(0===l)return null;var c=(s.x*(t.y-o.y)-s.y*(t.x-o.x))/l,u=(a.x*(t.y-o.y)-a.y*(t.x-o.x))/l;return-1e-10<=c&&c<=1-i&&-1e-10<=u&&u<=1-i?new e.Point(t.x+u*s.x,t.y+u*s.y):null}if(0===n.length)return null;for(var S=n[0].x,E=n[0].x,b=n[0].y,T=n[0].y,x=1;x<n.length;x++){var L=n[x];L.x<S&&(S=L.x),L.x>E&&(E=L.x),L.y<b&&(b=L.y),L.y>T&&(T=L.y)}return new e.Rect(S,b,E-S,T-b)},_getSegments:function(){var e=this.getTopLeft(),t=this.getTopRight(),i=this.getBottomLeft(),n=this.getBottomRight();return[[e,t],[t,n],[n,i],[i,e]]},rotate:function(t,i){if(0===(t=e.positiveModulo(t,360)))return this.clone();i=i||this.getCenter();var n=this.getTopLeft().rotate(t,i),o=this.getTopRight().rotate(t,i).minus(n);o=o.apply((function(e){return Math.abs(e)<1e-15?0:e}));var r=Math.atan(o.y/o.x);return o.x<0?r+=Math.PI:o.y<0&&(r+=2*Math.PI),new e.Rect(n.x,n.y,this.width,this.height,r/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),i=this.getTopRight(),n=this.getBottomLeft(),o=this.getBottomRight(),r=Math.min(t.x,i.x,n.x,o.x),s=Math.max(t.x,i.x,n.x,o.x),a=Math.min(t.y,i.y,n.y,o.y),l=Math.max(t.y,i.y,n.y,o.y);return new e.Rect(r,a,s-r,l-a)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),i=Math.floor(t.x),n=Math.floor(t.y),o=Math.ceil(t.width+t.x-i),r=Math.ceil(t.height+t.y-n);return new e.Rect(i,n,o,r)},containsPoint:function(e,t){t=t||0;var i=this.getTopLeft(),n=this.getTopRight(),o=this.getBottomLeft(),r=n.minus(i),s=o.minus(i);return(e.x-i.x)*r.x+(e.y-i.y)*r.y>=-t&&(e.x-n.x)*r.x+(e.y-n.y)*r.y<=t&&(e.x-i.x)*s.x+(e.y-i.y)*s.y>=-t&&(e.x-o.x)*s.x+(e.y-o.y)*s.y<=t},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var t={};function i(t){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-t.delta.x>0?i>-(r-a.x)&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,a.x,i+2*t.delta.x)):-t.delta.x<0&&i<0&&(this.element.style.marginLeft=i+2*t.delta.x+"px",o(this,a.x,i+2*t.delta.x)):-t.delta.y>0?n>-(s-a.y)&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,a.y,n+2*t.delta.y)):-t.delta.y<0&&n<0&&(this.element.style.marginTop=n+2*t.delta.y+"px",o(this,a.y,n+2*t.delta.y))),!1}function n(t){var i=Number(this.element.style.marginLeft.replace("px","")),n=Number(this.element.style.marginTop.replace("px","")),r=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=e.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?t.scroll>0?i>-(r-a.x)&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,a.x,i-60*t.scroll)):t.scroll<0&&i<0&&(this.element.style.marginLeft=i-60*t.scroll+"px",o(this,a.x,i-60*t.scroll)):t.scroll<0?n>a.y-s&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,a.y,n+60*t.scroll)):t.scroll>0&&n<0&&(this.element.style.marginTop=n+60*t.scroll+"px",o(this,a.y,n+60*t.scroll))),!1}function o(t,i,n){var o,r,s,a,l,c,u;for(o="horizontal"==t.scroll?t.panelWidth:t.panelHeight,r=Math.ceil(i/o)+5,c=r=(r=(s=Math.ceil((Math.abs(n)+i)/o)+1)-r)<0?0:r;c<s&&c<t.panels.length;c++)if(!(u=t.panels[c]).activePanel){var d,h=t.viewer.tileSources[c];d=h.referenceStripThumbnailUrl?{type:"image",url:h.referenceStripThumbnailUrl}:h,(a=new e.Viewer({id:u.id,tileSources:[d],element:u,navigatorSizeRatio:t.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0})).displayRegion=e.makeNeutralElement("div"),a.displayRegion.id=u.id+"-displayregion",a.displayRegion.className="displayregion",(l=a.displayRegion.style).position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l.float="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=t.panelWidth-4+"px",l.height=t.panelHeight-4+"px",a.displayRegion.innerTracker=new e.MouseTracker({element:a.displayRegion,startDisabled:!0}),u.getElementsByTagName("div")[0].appendChild(a.displayRegion),t.miniViewers[u.id]=a,u.activePanel=!0}}function r(e){var t=e.eventSource.element;return"horizontal"==this.scroll?t.style.marginBottom="0px":t.style.marginLeft="0px",!1}function s(t){var i=t.eventSource.element;return"horizontal"==this.scroll?i.style.marginBottom="-"+e.getElementSize(i).y/2+"px":i.style.marginLeft="-"+e.getElementSize(i).x/2+"px",!1}function a(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:case 39:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;default:return!0}}function l(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 61:case 48:case 119:case 87:case 100:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:case 115:case 83:case 97:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;default:return!0}}e.ReferenceStrip=function(c){var u,d,h,m=c.viewer,p=e.getElementSize(m.element);for(c.id||(c.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=c.id,this.element.className="referencestrip"),c=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},c,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),e.extend(this,c),t[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(d=this.element.style).marginTop="0px",d.marginRight="0px",d.marginBottom="0px",d.marginLeft="0px",d.left="0px",d.bottom="0px",d.border="0px",d.background="#000",d.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=m,this.innerTracker=new e.MouseTracker({element:this.element,dragHandler:e.delegate(this,i),scrollHandler:e.delegate(this,n),enterHandler:e.delegate(this,r),exitHandler:e.delegate(this,s),keyDownHandler:e.delegate(this,a),keyHandler:e.delegate(this,l)}),c.width&&c.height?(this.element.style.width=c.width+"px",this.element.style.height=c.height+"px",m.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"==c.scroll?(this.element.style.width=p.x*c.sizeRatio*m.tileSources.length+12*m.tileSources.length+"px",this.element.style.height=p.y*c.sizeRatio+"px",m.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=p.y*c.sizeRatio*m.tileSources.length+12*m.tileSources.length+"px",this.element.style.width=p.x*c.sizeRatio+"px",m.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=p.x*this.sizeRatio+8,this.panelHeight=p.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},h=0;h<m.tileSources.length;h++)(u=e.makeNeutralElement("div")).id=this.element.id+"-"+h,u.style.width=this.panelWidth+"px",u.style.height=this.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",e.setElementTouchActionNone(u),u.innerTracker=new e.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(t){t.eventSource.dragging=e.now()},releaseHandler:function(t){var i=t.eventSource,n=i.element.id,o=Number(n.split("-")[2]),r=e.now();t.insideElementPressed&&t.insideElementReleased&&i.dragging&&r-i.dragging<i.clickTimeThreshold&&(i.dragging=null,m.goToPage(o))}}),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);o(this,"vertical"==this.scroll?p.y:p.x,0),this.setFocus(0)},e.extend(e.ReferenceStrip.prototype,e.EventSource.prototype,e.Viewer.prototype,{setFocus:function(t){var i,n=e.getElement(this.element.id+"-"+t),s=e.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),c=-Number(this.element.style.marginLeft.replace("px","")),u=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==n&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=n,this.currentSelected.style.background="#999","horizontal"==this.scroll?(i=Number(t)*(this.panelWidth+3))>c+s.x-this.panelWidth?(i=Math.min(i,a-s.x),this.element.style.marginLeft=-i+"px",o(this,s.x,-i)):i<c&&(i=Math.max(0,i-s.x/2),this.element.style.marginLeft=-i+"px",o(this,s.x,-i)):(i=Number(t)*(this.panelHeight+3))>u+s.y-this.panelHeight?(i=Math.min(i,l-s.y),this.element.style.marginTop=-i+"px",o(this,s.y,-i)):i<u&&(i=Math.max(0,i-s.y/2),this.element.style.marginTop=-i+"px",o(this,s.y,-i)),this.currentPage=t,r.call(this,{eventSource:this.innerTracker}))},update:function(){return!!t[this.id].animating&&(e.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var e in this.miniViewers)this.miniViewers[e].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(e){e.DisplayRect=function(t,i,n,o,r,s){e.Rect.apply(this,[t,i,n,o]),this.minLevel=r,this.maxLevel=s},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(t){var i=arguments;"object"!=_typeof(t)&&(t={initial:i.length&&"number"==typeof i[0]?i[0]:void 0,springStiffness:i.length>1?i[1].springStiffness:5,animationTime:i.length>1?i[1].animationTime:1.5}),e.console.assert("number"==typeof t.springStiffness&&0!==t.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof t.animationTime&&t.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),t.exponential&&(this._exponential=!0,delete t.exponential),e.extend(!0,this,t),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=t,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(t){e.console.assert(!this._exponential||0!==t,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(t){this.start.value+=t,this.target.value+=t,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(t){this._exponential=t,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var t,i;this.current.time=e.now(),this._exponential?(t=this.start._logValue,i=this.target._logValue):(t=this.start.value,i=this.target.value);var n,o,r=this.current.time>=this.target.time?i:t+(i-t)*(n=this.springStiffness,o=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(n*-o))/(1-Math.exp(-n))),s=this.current.value;return this._exponential?this.current.value=Math.exp(r):this.current.value=r,s!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function t(t){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},t),this.image=null}t.prototype={errorMsg:null,start:function(){var t=this,i=this.abort;this.image=new Image,this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.errorMsg="Image load aborted",t.finish(!1)},this.jobId=window.setTimeout((function(){t.errorMsg="Image load exceeded timeout",t.finish(!1)}),this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(e){var i;try{i=new window.Blob([e.response])}catch(t){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&n){var o=new n;o.append(e.response),i=o.getBlob()}}0===i.size&&(t.errorMsg="Empty image response.",t.finish(!1));var r=(window.URL||window.webkitURL).createObjectURL(i);t.image.src=r},error:function(e){t.errorMsg="Image load aborted - XHR error",t.finish(!1)}}),this.abort=function(){t.request.abort(),"function"==typeof i&&i()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(e){this.image.onload=this.image.onerror=this.image.onabort=null,e||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(t){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},t)},e.ImageLoader.prototype={addJob:function(e){var i=this,n=new t({src:e.src,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.loadWithAjax?e.ajaxHeaders:null,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:function(t){!function(e,t,i){e.jobsInProgress--,(!e.jobLimit||e.jobsInProgress<e.jobLimit)&&e.jobQueue.length>0&&(e.jobQueue.shift().start(),e.jobsInProgress++),i(t.image,t.errorMsg,t.request)}(i,t,e.callback)},abort:e.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(n.start(),this.jobsInProgress++):this.jobQueue.push(n)},clear:function(){for(var e=0;e<this.jobQueue.length;e++){var t=this.jobQueue[e];"function"==typeof t.abort&&t.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(e,t,i,n,o,r,s,a,l){this.level=e,this.x=t,this.y=i,this.bounds=n,this.exists=o,this.url=r,this.context2D=s,this.loadWithAjax=a,this.ajaxHeaders=l,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(t){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=t&&t.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(t,i,n,o){var r,s=this.position.times(e.pixelDensityRatio),a=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(r=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&r?(t.save(),t.globalAlpha=this.opacity,"number"==typeof n&&1!==n&&(s=s.times(n),a=a.times(n)),o instanceof e.Point&&(s=s.plus(o)),1===t.globalAlpha&&this._hasTransparencyChannel()&&t.clearRect(s.x+1,s.y+1,a.x-2,a.y-2),i({context:t,tile:this,rendered:r}),t.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,s.x,s.y,a.x,a.y),t.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var t;if(this.cacheImageRecord)t=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;t=this.context2D}return t.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(t,i,n){var o=Math.max(1,Math.ceil((n.x-i.x)/2)),r=Math.max(1,Math.ceil((n.y-i.y)/2));return new e.Point(o,r).minus(this.position.times(e.pixelDensityRatio).times(t||1).apply((function(e){return e%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(t,i,n){var o;o=e.isPlainObject(t)?t:{element:t,location:i,placement:n},this.element=o.element,this.style=o.element.style,this._init(o)},e.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?e.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,i){var n=e.Placement.properties[this.placement];n&&(n.isHorizontallyCentered?t.x-=i.x/2:n.isRight&&(t.x-=i.x),n.isVerticallyCentered?t.y-=i.y/2:n.isBottom&&(t.y-=i.y))},destroy:function(){var t=this.element,i=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(i.display="none",document.body.appendChild(t))),this.onDraw=null,i.top="",i.left="",i.position="",null!==this.width&&(i.width=""),null!==this.height&&(i.height="");var n=e.getCssPropertyWithVendorPrefix("transformOrigin"),o=e.getCssPropertyWithVendorPrefix("transform");n&&o&&(i[n]="",i[o]="")},drawHTML:function(t,i){var n=this.element;n.parentNode!==t&&(n.prevElementParent=n.parentNode,n.prevNextSibling=n.nextSibling,t.appendChild(n),this.style.position="absolute",this.size=e.getElementSize(n));var o=this._getOverlayPositionAndSize(i),r=o.position,s=this.size=o.size,a=o.rotate;if(this.onDraw)this.onDraw(r,s,this.element);else{var l=this.style;l.left=r.x+"px",l.top=r.y+"px",null!==this.width&&(l.width=s.x+"px"),null!==this.height&&(l.height=s.y+"px");var c=e.getCssPropertyWithVendorPrefix("transformOrigin"),u=e.getCssPropertyWithVendorPrefix("transform");c&&u&&(a?(l[c]=this._getTransformOrigin(),l[u]="rotate("+a+"deg)"):(l[c]="",l[u]="")),"none"!==l.display&&(l.display="block")}},_getOverlayPositionAndSize:function(t){var i=t.pixelFromPoint(this.location,!0),n=this._getSizeInPixels(t);this.adjust(i,n);var o=0;if(t.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var r=new e.Rect(i.x,i.y,n.x,n.y),s=this._getBoundingBox(r,t.degrees);i=s.getTopLeft(),n=s.getSize()}else o=t.degrees;return{position:i,size:n,rotate:o}},_getSizeInPixels:function(t){var i=this.size.x,n=this.size.y;if(null!==this.width||null!==this.height){var o=t.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(i=o.x),null!==this.height&&(n=o.y)}if(this.checkResize&&(null===this.width||null===this.height)){var r=this.size=e.getElementSize(this.element);null===this.width&&(i=r.x),null===this.height&&(n=r.y)}return new e.Point(i,n)},_getBoundingBox:function(e,t){var i=this._getPlacementPoint(e);return e.rotate(t,i).getBoundingBox()},_getPlacementPoint:function(t){var i=new e.Point(t.x,t.y),n=e.Placement.properties[this.placement];return n&&(n.isHorizontallyCentered?i.x+=t.width/2:n.isRight&&(i.x+=t.width),n.isVerticallyCentered?i.y+=t.height/2:n.isBottom&&(i.y+=t.height)),i},_getTransformOrigin:function(){var t="",i=e.Placement.properties[this.placement];return i?(i.isLeft?t="left":i.isRight&&(t="right"),i.isTop?t+=" top":i.isBottom&&(t+=" bottom"),t):t},update:function(t,i){var n=e.isPlainObject(t)?t:{location:t,placement:i};this._init({location:n.location||this.location,placement:void 0!==n.placement?n.placement:this.placement,onDraw:n.onDraw||this.onDraw,checkResize:n.checkResize||this.checkResize,width:void 0!==n.width?n.width:this.width,height:void 0!==n.height?n.height:this.height,rotationMode:n.rotationMode||this.rotationMode})},getBounds:function(t){e.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var i=this.width,n=this.height;if(null===i||null===n){var o=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===i&&(i=o.x),null===n&&(n=o.y)}var r=this.location.clone();return this.adjust(r,new e.Point(i,n)),this._adjustBoundsForRotation(t,new e.Rect(r.x,r.y,i,n))},_adjustBoundsForRotation:function(t,i){if(!t||0===t.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return i;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return i;var n=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new e.Rect(n.position.x,n.position.y,n.size.x,n.size.y))}return i.rotate(-t.degrees,this._getPlacementPoint(i))}}}(OpenSeadragon),function(e){e.Drawer=function(t){e.console.assert(t.viewer,"[Drawer] options.viewer is required");var i=arguments;if(e.isPlainObject(t)||(t={source:i[0],viewport:i[1],element:i[2]}),e.console.assert(t.viewport,"[Drawer] options.viewport is required"),e.console.assert(t.element,"[Drawer] options.element is required"),t.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,t.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(t.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var n=this._calculateCanvasSize();this.canvas.width=n.x,this.canvas.height=n.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},e.Drawer.prototype={addOverlay:function(t,i,n,o){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,i,n,o),this},updateOverlay:function(t,i,n){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,i,n),this},removeOverlay:function(t){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(t){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var i=this.viewer.world,n=0;n<i.getItemCount();n++)i.getItemAt(n).setOpacity(t);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,i=0,n=0;n<t.getItemCount();n++){var o=t.getItemAt(n).getOpacity();o>i&&(i=o)}return i},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var e=this._calculateCanvasSize();if((this.canvas.width!=e.x||this.canvas.height!=e.y)&&(this.canvas.width=e.x,this.canvas.height=e.y,null!==this.sketchCanvas)){var t=this._calculateSketchCanvasSize();this.sketchCanvas.width=t.x,this.sketchCanvas.height=t.y}this._clear()}},_clear:function(e,t){if(this.useCanvas){var i=this._getContext(e);if(t)i.clearRect(t.x,t.y,t.width,t.height);else{var n=i.canvas;i.clearRect(0,0,n.width,n.height)}}},viewportToDrawerRectangle:function(t){var i=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),n=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new e.Rect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},drawTile:function(t,i,n,o,r){if(e.console.assert(t,"[Drawer.drawTile] tile is required"),e.console.assert(i,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var s=this._getContext(n);o=o||1,t.drawCanvas(s,i,o,r)}else t.drawHTML(this.canvas)},_getContext:function(e){var t=this.context;if(e){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var i=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=i.x,this.sketchCanvas.height=i.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var n=this;this.viewer.addHandler("rotate",(function e(){if(0!==n.viewport.getRotation()){n.viewer.removeHandler("rotate",e);var t=n._calculateSketchCanvasSize();n.sketchCanvas.width=t.x,n.sketchCanvas.height=t.y}}))}}t=this.sketchContext}return t},saveContext:function(e){this.useCanvas&&this._getContext(e).save()},restoreContext:function(e){this.useCanvas&&this._getContext(e).restore()},setClip:function(e,t){if(this.useCanvas){var i=this._getContext(t);i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()}},drawRectangle:function(e,t,i){if(this.useCanvas){var n=this._getContext(i);n.save(),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height),n.restore()}},blendSketch:function(t,i,n,o){var r=t;if(e.isPlainObject(r)||(r={opacity:t,scale:i,translate:n,compositeOperation:o}),this.useCanvas&&this.sketchCanvas){t=r.opacity,o=r.compositeOperation;var s=r.bounds;if(this.context.save(),this.context.globalAlpha=t,o&&(this.context.globalCompositeOperation=o),s)s.x<0&&(s.width+=s.x,s.x=0),s.x+s.width>this.canvas.width&&(s.width=this.canvas.width-s.x),s.y<0&&(s.height+=s.y,s.y=0),s.y+s.height>this.canvas.height&&(s.height=this.canvas.height-s.y),this.context.drawImage(this.sketchCanvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height);else{i=r.scale||1;var a=(n=r.translate)instanceof e.Point?n:new e.Point(0,0),l=0,c=0;if(n){var u=this.sketchCanvas.width-this.canvas.width,d=this.sketchCanvas.height-this.canvas.height;l=Math.round(u/2),c=Math.round(d/2)}this.context.drawImage(this.sketchCanvas,a.x-l*i,a.y-c*i,(this.canvas.width+2*l)*i,(this.canvas.height+2*c)*i,-l,-c,this.canvas.width+2*l,this.canvas.height+2*c)}this.context.restore()}},drawDebugInfo:function(t,i,n,o){if(this.useCanvas){var r=this.viewer.world.getIndexOfItem(o)%this.debugGridColor.length,s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",s.strokeStyle=this.debugGridColor[r],s.fillStyle=this.debugGridColor[r],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),o.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:o.getRotation(!0),point:o.viewport.pixelFromPointNoRotate(o._getRotationPoint(!0),!0)}),s.strokeRect(t.position.x*e.pixelDensityRatio,t.position.y*e.pixelDensityRatio,t.size.x*e.pixelDensityRatio,t.size.y*e.pixelDensityRatio);var a=(t.position.x+t.size.x/2)*e.pixelDensityRatio,l=(t.position.y+t.size.y/2)*e.pixelDensityRatio;s.translate(a,l),s.rotate(Math.PI/180*-this.viewport.degrees),s.translate(-a,-l),0===t.x&&0===t.y&&(s.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*e.pixelDensityRatio,(t.position.y-30)*e.pixelDensityRatio),s.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*e.pixelDensityRatio,(t.position.y-20)*e.pixelDensityRatio)),s.fillText("Level: "+t.level,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+20)*e.pixelDensityRatio),s.fillText("Column: "+t.x,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+30)*e.pixelDensityRatio),s.fillText("Row: "+t.y,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+40)*e.pixelDensityRatio),s.fillText("Order: "+n+" of "+i,(t.position.x+10)*e.pixelDensityRatio,(t.position.y+50)*e.pixelDensityRatio),s.fillText("Size: "+t.size.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+60)*e.pixelDensityRatio),s.fillText("Position: "+t.position.toString(),(t.position.x+10)*e.pixelDensityRatio,(t.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),o.getRotation(!0)%360!=0&&this._restoreRotationChanges(),s.restore()}},debugRect:function(t){if(this.useCanvas){var i=this.context;i.save(),i.lineWidth=2*e.pixelDensityRatio,i.strokeStyle=this.debugGridColor[0],i.fillStyle=this.debugGridColor[0],i.strokeRect(t.x*e.pixelDensityRatio,t.y*e.pixelDensityRatio,t.width*e.pixelDensityRatio,t.height*e.pixelDensityRatio),i.restore()}},getCanvasSize:function(t){var i=this._getContext(t).canvas;return new e.Point(i.width,i.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var i=t.point?t.point.times(e.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(t.useSketch);n.save(),n.translate(i.x,i.y),n.rotate(Math.PI/180*t.degrees),n.translate(-i.x,-i.y)},_restoreRotationChanges:function(e){this._getContext(e).restore()},_calculateCanvasSize:function(){var t=e.pixelDensityRatio,i=this.viewport.getContainerSize();return{x:i.x*t,y:i.y*t}},_calculateSketchCanvasSize:function(){var e=this._calculateCanvasSize();if(0===this.viewport.getRotation())return e;var t=Math.ceil(Math.sqrt(e.x*e.x+e.y*e.y));return{x:t,y:t}}}}(OpenSeadragon),function(e){e.Viewport=function(t){var i=arguments;i.length&&i[0]instanceof e.Point&&(t={containerSize:i[0],contentSize:i[1],config:i[2]}),t.config&&(e.extend(!0,t,t.config),delete t.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(t){return e.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(t instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(t.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(t.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,i){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,i)},_setContentBounds:function(t,i){e.console.assert(t,"[Viewport._setContentBounds] bounds is required"),e.console.assert(t instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(t.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(t.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(i),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(i),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:i,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var e=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?e>=1?e:1:e>=1?1:e)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),i=1/this.getHomeZoom(),n=i/this.getAspectRatio();return new e.Rect(t.x-i/2,t.y-n/2,i,n)},goHome:function(e){return this.viewer&&this.viewer.raiseEvent("home",{immediately:e}),this.fitBounds(this.getHomeBounds(),e)},getMinZoom:function(){var e=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*e},getMaxZoom:function(){var e=this.maxZoomLevel;return e||(e=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,e/=this._contentBounds.width),Math.max(e,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(t){e.console.assert("object"===e.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var i=this.getCenter(t),n=1/this.getZoom(t),o=n/this.getAspectRatio();return new e.Rect(i.x-n/2,i.y-o/2,n,o)},getBoundsWithMargins:function(e){return this.getBoundsNoRotateWithMargins(e).rotate(-this.getRotation(),this.getCenter(e))},getBoundsNoRotateWithMargins:function(e){var t=this.getBoundsNoRotate(e),i=this._containerInnerSize.x*this.getZoom(e);return t.x-=this._margins.left/i,t.y-=this._margins.top/i,t.width+=(this._margins.left+this._margins.right)/i,t.height+=(this._margins.top+this._margins.bottom)/i,t},getCenter:function(t){var i,n,o,r,s,a,l=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),c=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?l:this.zoomPoint?(i=this.pixelFromPoint(this.zoomPoint,!0),r=(o=1/(n=this.getZoom()))/this.getAspectRatio(),s=new e.Rect(l.x-o/2,l.y-r/2,o,r),a=this._pixelFromPoint(this.zoomPoint,s).minus(i).divide(this._containerInnerSize.x*n),c.plus(a)):c},getZoom:function(e){return e?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(e){return Math.max(Math.min(e,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var i=new e.Rect(t.x,t.y,t.width,t.height);if(this.wrapHorizontal);else{var n=this.visibilityRatio*i.width,o=i.x+i.width,r=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,s=this._contentBoundsNoRotate.x-o+n,a=r-i.x-n;n>this._contentBoundsNoRotate.width?i.x+=(s+a)/2:a<0?i.x+=a:s>0&&(i.x+=s)}if(this.wrapVertical);else{var l=this.visibilityRatio*i.height,c=i.y+i.height,u=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,d=this._contentBoundsNoRotate.y-c+l,h=u-i.y-l;l>this._contentBoundsNoRotate.height?i.y+=(d+h)/2:h<0?i.y+=h:d>0&&(i.y+=d)}return i},_raiseConstraintsEvent:function(e){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:e})},applyConstraints:function(e){var t=this.getZoom(),i=this._applyZoomConstraints(t);t!==i&&this.zoomTo(i,this.zoomPoint,e);var n=this.getBoundsNoRotate(),o=this._applyBoundaryConstraints(n);return this._raiseConstraintsEvent(e),(n.x!==o.x||n.y!==o.y||e)&&this.fitBounds(o.rotate(-this.getRotation()),e),this},ensureVisible:function(e){return this.applyConstraints(e)},_fitBounds:function(t,i){var n=(i=i||{}).immediately||!1,o=i.constraints||!1,r=this.getAspectRatio(),s=t.getCenter(),a=new e.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=r?a.height=a.width/r:a.width=a.height*r,a.x=s.x-a.width/2,a.y=s.y-a.height/2;var l=1/a.width;if(o){var c=a.getAspectRatio(),u=this._applyZoomConstraints(l);l!==u&&(l=u,a.width=1/l,a.x=s.x-a.width/2,a.height=a.width/c,a.y=s.y-a.height/2),s=(a=this._applyBoundaryConstraints(a)).getCenter(),this._raiseConstraintsEvent(n)}if(n)return this.panTo(s,!0),this.zoomTo(l,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var d=this.getBounds(),h=this.getZoom();if(0===h||Math.abs(l/h-1)<1e-8)return this.zoomTo(l,!0),this.panTo(s,n);var m=(a=a.rotate(-this.getRotation())).getTopLeft().times(l).minus(d.getTopLeft().times(h)).divide(l-h);return this.zoomTo(l,m,n)},fitBounds:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!1})},fitBoundsWithConstraints:function(e,t){return this._fitBounds(e,{immediately:t,constraints:!0})},fitVertically:function(t){var i=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(i,t)},fitHorizontally:function(t){var i=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(i,t)},getConstrainedBounds:function(e){var t;return t=this.getBounds(e),this._applyBoundaryConstraints(t)},panBy:function(t,i){var n=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(n.plus(t),i)},panTo:function(e,t){return t?(this.centerSpringX.resetTo(e.x),this.centerSpringY.resetTo(e.y)):(this.centerSpringX.springTo(e.x),this.centerSpringY.springTo(e.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:e,immediately:t}),this},zoomBy:function(e,t,i){return this.zoomTo(this.zoomSpring.target.value*e,t,i)},zoomTo:function(t,i,n){var o=this;return this.zoomPoint=i instanceof e.Point&&!isNaN(i.x)&&!isNaN(i.y)?i:null,n?this._adjustCenterSpringsForZoomPoint((function(){o.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:i,immediately:n}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,t){var i,n=this.getBoundsNoRotate(),o=n;return this.containerSize.x=e.x,this.containerSize.y=e.y,this._updateContainerInnerSize(),t&&(i=e.x/this.containerSize.x,o.width=n.width*i,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:t}),this.fitBounds(o,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var e=this;this._adjustCenterSpringsForZoomPoint((function(){e.zoomSpring.update()})),this.centerSpringX.update(),this.centerSpringY.update();var t=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,t},_adjustCenterSpringsForZoomPoint:function(e){if(this.zoomPoint){var t=this.pixelFromPoint(this.zoomPoint,!0);e();var i=this.pixelFromPoint(this.zoomPoint,!0).minus(t),n=this.deltaPointsFromPixels(i,!0);this.centerSpringX.shiftBy(n.x),this.centerSpringY.shiftBy(n.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else e()},deltaPixelsFromPointsNoRotate:function(e,t){return e.times(this._containerInnerSize.x*this.getZoom(t))},deltaPixelsFromPoints:function(e,t){return this.deltaPixelsFromPointsNoRotate(e.rotate(this.getRotation()),t)},deltaPointsFromPixelsNoRotate:function(e,t){return e.divide(this._containerInnerSize.x*this.getZoom(t))},deltaPointsFromPixels:function(e,t){return this.deltaPointsFromPixelsNoRotate(e,t).rotate(-this.getRotation())},pixelFromPointNoRotate:function(e,t){return this._pixelFromPointNoRotate(e,this.getBoundsNoRotate(t))},pixelFromPoint:function(e,t){return this._pixelFromPoint(e,this.getBoundsNoRotate(t))},_pixelFromPointNoRotate:function(t,i){return t.minus(i.getTopLeft()).times(this._containerInnerSize.x/i.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(e,t){return this._pixelFromPointNoRotate(e.rotate(this.getRotation(),this.getCenter(!0)),t)},pointFromPixelNoRotate:function(t,i){var n=this.getBoundsNoRotate(i);return t.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/n.width).plus(n.getTopLeft())},pointFromPixel:function(e,t){return this.pointFromPixelNoRotate(e,t).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t*this._contentSizeNoRotate.x/n,i*this._contentSizeNoRotate.x/n)},viewportToImageCoordinates:function(t,i){if(t instanceof e.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,i,!0)}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,i-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,i){var n=this._contentBoundsNoRotate.width;return new e.Point(t/this._contentSizeNoRotate.x*n,i/this._contentSizeNoRotate.x*n)},imageToViewportCoordinates:function(t,i){if(t instanceof e.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,i,!0)}var o=this._imageToViewportDelta(t,i);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(t,i,n,o){var r=t;if(r instanceof e.Rect||(r=new e.Rect(t,i,n,o)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===s)return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,i,n,o,!0)}var a=this.imageToViewportCoordinates(r.x,r.y),l=this._imageToViewportDelta(r.width,r.height);return new e.Rect(a.x,a.y,l.x,l.y,r.degrees)},viewportToImageRectangle:function(t,i,n,o){var r=t;if(r instanceof e.Rect||(r=new e.Rect(t,i,n,o)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===s)return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,i,n,o,!0)}var a=this.viewportToImageCoordinates(r.x,r.y),l=this._viewportToImageDelta(r.width,r.height);return new e.Rect(a.x,a.y,l.x,l.y,r.degrees)},viewerElementToImageCoordinates:function(e){var t=this.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.pixelFromPoint(t,!0)},windowToImageCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(i)},imageToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(e){return this.pointFromPixel(e,!0)},viewportToViewerElementCoordinates:function(e){return this.pixelFromPoint(e,!0)},viewerElementToViewportRectangle:function(t){return e.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return e.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var i=t.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(i)},viewportToWindowCoordinates:function(t){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===i)return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}var n=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/n*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var i=this.viewer.world.getItemCount();if(i>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===i)return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)}}}(OpenSeadragon),function(e){function t(e,t,n,o,r,s,l,c,u){var d=l.getBoundingBox().getTopLeft(),h=l.getBoundingBox().getBottomRight();e.viewer&&e.viewer.raiseEvent("update-level",{tiledImage:e,havedrawn:t,level:o,opacity:r,visibility:s,drawArea:l,topleft:d,bottomright:h,currenttime:c,best:u}),a(e.coverage,o),a(e.loadingCoverage,o);for(var m=e._getCornerTiles(o,d,h),p=m.topLeft,g=m.bottomRight,f=e.source.getNumTiles(o),v=e.viewport.pixelFromPoint(e.viewport.getCenter()),y=p.x;y<=g.x;y++)for(var w=p.y;w<=g.y;w++){if(!e.wrapHorizontal&&!e.wrapVertical){var S=e.source.getTileBounds(o,y,w);if(null===l.intersection(S))continue}u=i(e,n,t,y,w,o,r,s,v,f,c,u)}return u}function i(t,i,o,a,l,c,u,d,h,m,p,g){var f=function(t,i,n,o,r,s,a,l,c,u){var d,h,m,p,g,f,v,y;return s[n]||(s[n]={}),s[n][t]||(s[n][t]={}),s[n][t][i]||(d=(l.x+t%l.x)%l.x,h=(l.y+i%l.y)%l.y,m=r.getTileBounds(n,d,h),p=r.tileExists(n,d,h),g=r.getTileUrl(n,d,h),o.loadTilesWithAjax?(f=r.getTileAjaxHeaders(n,d,h),e.isPlainObject(o.ajaxHeaders)&&(f=e.extend({},o.ajaxHeaders,f))):f=null,v=r.getContext2D?r.getContext2D(n,d,h):void 0,m.x+=(t-d)/l.x,m.y+=u/c*((i-h)/l.y),y=new e.Tile(n,t,i,m,p,g,v,o.loadTilesWithAjax,f),d===l.x-1&&(y.isRightMost=!0),h===l.y-1&&(y.isBottomMost=!0),s[n][t][i]=y),(y=s[n][t][i]).lastTouchTime=a,y}(a,l,c,t,t.source,t.tilesMatrix,p,m,t._worldWidthCurrent,t._worldHeightCurrent),v=o;t.viewer&&t.viewer.raiseEvent("update-tile",{tiledImage:t,tile:f}),s(t.coverage,c,a,l,!1);var y=f.loaded||f.loading||r(t.loadingCoverage,c,a,l);if(s(t.loadingCoverage,c,a,l,y),!f.exists)return g;if(i&&!v&&(r(t.coverage,c,a,l)?s(t.coverage,c,a,l,!0):v=!0),!v)return g;if(function(t,i,n,o,r,s){var a=t.bounds.getTopLeft();a.x*=s._scaleSpring.current.value,a.y*=s._scaleSpring.current.value,a.x+=s._xSpring.current.value,a.y+=s._ySpring.current.value;var l=t.bounds.getSize();l.x*=s._scaleSpring.current.value,l.y*=s._scaleSpring.current.value;var c=n.pixelFromPointNoRotate(a,!0),u=n.pixelFromPointNoRotate(a,!1),d=n.deltaPixelsFromPointsNoRotate(l,!0),h=n.deltaPixelsFromPointsNoRotate(l,!1),m=u.plus(h.divide(2)),p=o.squaredDistanceTo(m);i||(d=d.plus(new e.Point(1,1))),t.isRightMost&&s.wrapHorizontal&&(d.x+=.75),t.isBottomMost&&s.wrapVertical&&(d.y+=.75),t.position=c,t.size=d,t.squaredDistance=p,t.visibility=r}(f,t.source.tileOverlap,t.viewport,h,d,t),!f.loaded)if(f.context2D)n(t,f);else{var w=t._tileCache.getImageRecord(f.cacheKey);w&&n(t,f,w.getImage())}if(f.loaded){var S=function(e,t,i,n,o,r,a){var l,c,u=1e3*e.blendTime;if(t.blendStart||(t.blendStart=a),l=a-t.blendStart,c=u?Math.min(1,l/u):1,e.alwaysBlend&&(c*=r),t.opacity=c,e.lastDrawn.push(t),1==c)s(e.coverage,o,i,n,!0),e._hasOpaqueTile=!0;else if(l<u)return!0;return!1}(t,f,a,l,c,u,p);S&&(t._needsDraw=!0)}else f.loading?t._tilesLoading++:y||(g=function(e,t){return e?t.visibility>e.visibility||t.visibility==e.visibility&&t.squaredDistance<e.squaredDistance?t:e:t}(g,f));return g}function n(e,t,i,n,o){var r=0;function s(){return r++,a}function a(){0==--r&&(t.loading=!1,t.loaded=!0,t.context2D||e._tileCache.cacheTile({image:i,tile:t,cutoff:n,tiledImage:e}),e._needsDraw=!0)}e.viewer.raiseEvent("tile-loaded",{tile:t,tiledImage:e,tileRequest:o,image:i,getCompletionCallback:s}),s()()}function o(e,t,i,n){var o,r,s,a;if(!e[t])return!1;if(void 0===i||void 0===n){for(s in o=e[t])if(o.hasOwnProperty(s))for(a in r=o[s])if(r.hasOwnProperty(a)&&!r[a])return!1;return!0}return void 0===e[t][i]||void 0===e[t][i][n]||!0===e[t][i][n]}function r(e,t,i,n){return void 0===i||void 0===n?o(e,t+1):o(e,t+1,2*i,2*n)&&o(e,t+1,2*i,2*n+1)&&o(e,t+1,2*i+1,2*n)&&o(e,t+1,2*i+1,2*n+1)}function s(t,i,n,o,r){t[i]?(t[i][n]||(t[i][n]={}),t[i][n][o]=r):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",i)}function a(e,t){e[t]={}}e.TiledImage=function(t){var i=this;e.console.assert(t.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(t.drawer,"[TiledImage] options.drawer is required"),e.console.assert(t.viewer,"[TiledImage] options.viewer is required"),e.console.assert(t.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(t.source,"[TiledImage] options.source is required"),e.console.assert(!t.clip||t.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=t.tileCache,delete t.tileCache,this._drawer=t.drawer,delete t.drawer,this._imageLoader=t.imageLoader,delete t.imageLoader,t.clip instanceof e.Rect&&(this._clip=t.clip.clone()),delete t.clip;var n=t.x||0;delete t.x;var o=t.y||0;delete t.y,this.normHeight=t.source.dimensions.y/t.source.dimensions.x,this.contentAspectX=t.source.dimensions.x/t.source.dimensions.y;var r=1;t.width?(r=t.width,delete t.width,t.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete t.height)):t.height&&(r=t.height/this.normHeight,delete t.height);var s=t.fitBounds;delete t.fitBounds;var a=t.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete t.fitBoundsPlacement;var l=t.degrees||0;delete t.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},t),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:n,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:l,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),s&&this.fitBounds(s,a,!0),this._drawingHandler=function(t){i.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:i},t))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(e){e!==this._fullyLoaded&&(this._fullyLoaded=e,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var e=this._xSpring.update(),t=this._ySpring.update(),i=this._scaleSpring.update(),n=this._degreesSpring.update();return!!(e||t||i||n)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){(0!==this.opacity||this._preload)&&(this._midDraw=!0,this._updateViewport(),this._midDraw=!1)},destroy:function(){this.reset()},getBounds:function(e){return this.getBoundsNoRotate(e).rotate(this.getRotation(e),this._getRotationPoint(e))},getBoundsNoRotate:function(t){return t?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(t){var i=this.getBoundsNoRotate(t);if(this._clip){var n=(t?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,o=this._clip.times(n);i=new e.Rect(i.x+o.x,i.y+o.y,o.width,o.height)}return i.rotate(this.getRotation(t),this._getRotationPoint(t))},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(t,i,n){var o=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t*(this.source.dimensions.x/o),i*(this.source.dimensions.y*this.contentAspectX/o))},viewportToImageCoordinates:function(t,i,n){var o;return t instanceof e.Point?(n=i,o=t):o=new e.Point(t,i),o=o.rotate(-this.getRotation(n),this._getRotationPoint(n)),n?this._viewportToImageDelta(o.x-this._xSpring.current.value,o.y-this._ySpring.current.value):this._viewportToImageDelta(o.x-this._xSpring.target.value,o.y-this._ySpring.target.value)},_imageToViewportDelta:function(t,i,n){var o=n?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(t/this.source.dimensions.x*o,i/this.source.dimensions.y/this.contentAspectX*o)},imageToViewportCoordinates:function(t,i,n){t instanceof e.Point&&(n=i,i=t.y,t=t.x);var o=this._imageToViewportDelta(t,i);return n?(o.x+=this._xSpring.current.value,o.y+=this._ySpring.current.value):(o.x+=this._xSpring.target.value,o.y+=this._ySpring.target.value),o.rotate(this.getRotation(n),this._getRotationPoint(n))},imageToViewportRectangle:function(t,i,n,o,r){var s=t;s instanceof e.Rect?r=i:s=new e.Rect(t,i,n,o);var a=this.imageToViewportCoordinates(s.getTopLeft(),r),l=this._imageToViewportDelta(s.width,s.height,r);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees+this.getRotation(r))},viewportToImageRectangle:function(t,i,n,o,r){var s=t;t instanceof e.Rect?r=i:s=new e.Rect(t,i,n,o);var a=this.viewportToImageCoordinates(s.getTopLeft(),r),l=this._viewportToImageDelta(s.width,s.height,r);return new e.Rect(a.x,a.y,l.x,l.y,s.degrees-this.getRotation(r))},viewerElementToImageCoordinates:function(e){var t=this.viewport.pointFromPixel(e,!0);return this.viewportToImageCoordinates(t)},imageToViewerElementCoordinates:function(e){var t=this.imageToViewportCoordinates(e);return this.viewport.pixelFromPoint(t,!0)},windowToImageCoordinates:function(e){var t=e.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(t)},imageToWindowCoordinates:function(e){return this.imageToViewerElementCoordinates(e).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(t){var i=this._scaleSpring.current.value;return t=t.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((t.x-this._xSpring.current.value)/i,(t.y-this._ySpring.current.value)/i,t.width/i,t.height/i,t.degrees)},viewportToImageZoom:function(e){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*e},imageToViewportZoom:function(e){return e/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(e,t){var i=this._xSpring.target.value===e.x&&this._ySpring.target.value===e.y;if(t){if(i&&this._xSpring.current.value===e.x&&this._ySpring.current.value===e.y)return;this._xSpring.resetTo(e.x),this._ySpring.resetTo(e.y),this._needsDraw=!0}else{if(i)return;this._xSpring.springTo(e.x),this._ySpring.springTo(e.y),this._needsDraw=!0}i||this._raiseBoundsChange()},setWidth:function(e,t){this._setScale(e,t)},setHeight:function(e,t){this._setScale(e/this.normHeight,t)},fitBounds:function(t,i,n){i=i||e.Placement.CENTER;var o=e.Placement.properties[i],r=this.contentAspectX,s=0,a=0,l=1,c=1;if(this._clip&&(r=this._clip.getAspectRatio(),l=this._clip.width/this.source.dimensions.x,c=this._clip.height/this.source.dimensions.y,t.getAspectRatio()>r?(s=this._clip.x/this._clip.height*t.height,a=this._clip.y/this._clip.height*t.height):(s=this._clip.x/this._clip.width*t.width,a=this._clip.y/this._clip.width*t.width)),t.getAspectRatio()>r){var u=t.height/c,d=0;o.isHorizontallyCentered?d=(t.width-t.height*r)/2:o.isRight&&(d=t.width-t.height*r),this.setPosition(new e.Point(t.x-s+d,t.y-a),n),this.setHeight(u,n)}else{var h=t.width/l,m=0;o.isVerticallyCentered?m=(t.height-t.width/r)/2:o.isBottom&&(m=t.height-t.width/r),this.setPosition(new e.Point(t.x-s,t.y-a+m),n),this.setWidth(h,n)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(t){e.console.assert(!t||t instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),t instanceof e.Rect?this._clip=t.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(e){e!==this.opacity&&(this.opacity=e,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(e){this._preload=!!e,this._needsDraw=!0},getRotation:function(e){return e?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(e,t){this._degreesSpring.target.value===e&&this._degreesSpring.isAtTargetValue()||(t?this._degreesSpring.resetTo(e):this._degreesSpring.springTo(e),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(e){return this.getBoundsNoRotate(e).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(e){e!==this.compositeOperation&&(this.compositeOperation=e,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(e,t){var i=this._scaleSpring.target.value===e;if(t){if(i&&this._scaleSpring.current.value===e)return;this._scaleSpring.resetTo(e),this._updateForScale(),this._needsDraw=!0}else{if(i)return;this._scaleSpring.springTo(e),this._updateForScale(),this._needsDraw=!0}i||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var e=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),t=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,i=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(t/this.minPixelRatio)/Math.log(2))));return{lowestLevel:e=Math.min(e,i),highestLevel:i}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;)this.lastDrawn.pop().beingDrawn=!1;var i,r,s,a=this.viewport,l=this._viewportToTiledImageRectangle(a.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var c=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(l=l.intersection(c)))return}for(var u=this._getLevelsInterval(),d=u.lowestLevel,h=u.highestLevel,m=null,p=!1,g=e.now(),f=h;f>=d;f--){var v=!1,y=a.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(f),!0).x*this._scaleSpring.current.value;if(f===d||!p&&y>=this.minPixelRatio)v=!0,p=!0;else if(!p)continue;var w=a.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(f),!1).x*this._scaleSpring.current.value,S=a.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,E=this.immediateRender?1:S;if(m=t(this,p,v,f,Math.min(1,(y-.5)/.5),E/Math.abs(E-w),l,g,m),o(this.coverage,f))break}!function(t,i){if(0!==t.opacity&&(0!==i.length||t.placeholderFillStyle)){var n,o,r,s=i[0];s&&(n=t.opacity<1||t.compositeOperation&&"source-over"!==t.compositeOperation||!t._isBottomItem()&&s._hasTransparencyChannel());var a,l=t.viewport.getZoom(!0),c=t.viewportToImageZoom(l);i.length>1&&c>t.smoothTileEdgesMinZoom&&!t.iOSDevice&&t.getRotation(!0)%360==0&&e.supportsCanvas&&(n=!0,o=s.getScaleForEdgeSmoothing(),r=s.getTranslationForEdgeSmoothing(o,t._drawer.getCanvasSize(!1),t._drawer.getCanvasSize(!0))),n&&(o||(a=t.viewport.viewportToViewerElementRectangle(t.getClippedBounds(!0)).getIntegerBoundingBox().times(e.pixelDensityRatio)),t._drawer._clear(!0,a)),o||(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:n}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:n}));var u=!1;if(t._clip){t._drawer.saveContext(n);var d=t.imageToViewportRectangle(t._clip,!0);d=d.rotate(-t.getRotation(!0),t._getRotationPoint(!0));var h=t._drawer.viewportToDrawerRectangle(d);o&&(h=h.times(o)),r&&(h=h.translate(r)),t._drawer.setClip(h,n),u=!0}if(t.placeholderFillStyle&&!1===t._hasOpaqueTile){var m=t._drawer.viewportToDrawerRectangle(t.getBounds(!0));o&&(m=m.times(o)),r&&(m=m.translate(r));var p;p="function"==typeof t.placeholderFillStyle?t.placeholderFillStyle(t,t._drawer.context):t.placeholderFillStyle,t._drawer.drawRectangle(m,p,n)}for(var g=i.length-1;g>=0;g--)s=i[g],t._drawer.drawTile(s,t._drawingHandler,n,o,r),s.beingDrawn=!0,t.viewer&&t.viewer.raiseEvent("tile-drawn",{tiledImage:t,tile:s});u&&t._drawer.restoreContext(n),o||(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(n),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(n)),n&&(o&&(0!==t.viewport.degrees&&t._drawer._offsetForRotation({degrees:t.viewport.degrees,useSketch:!1}),t.getRotation(!0)%360!=0&&t._drawer._offsetForRotation({degrees:t.getRotation(!0),point:t.viewport.pixelFromPointNoRotate(t._getRotationPoint(!0),!0),useSketch:!1})),t._drawer.blendSketch({opacity:t.opacity,scale:o,translate:r,compositeOperation:t.compositeOperation,bounds:a}),o&&(t.getRotation(!0)%360!=0&&t._drawer._restoreRotationChanges(!1),0!==t.viewport.degrees&&t._drawer._restoreRotationChanges(!1))),function(t,i){if(t.debugMode)for(var n=i.length-1;n>=0;n--){var o=i[n];try{t._drawer.drawDebugInfo(o,i.length,n,t)}catch(t){e.console.error(t)}}}(t,i)}}(this,this.lastDrawn),m&&!m.context2D?(i=this,s=g,(r=m).loading=!0,i._imageLoader.addJob({src:r.url,loadWithAjax:r.loadWithAjax,ajaxHeaders:r.ajaxHeaders,crossOriginPolicy:i.crossOriginPolicy,ajaxWithCredentials:i.ajaxWithCredentials,callback:function(t,o,a){!function(t,i,o,r,s,a){if(!r)return e.console.log("Tile %s failed to load: %s - error: %s",i,i.url,s),t.viewer.raiseEvent("tile-load-failed",{tile:i,tiledImage:t,time:o,message:s,tileRequest:a}),i.loading=!1,void(i.exists=!1);if(o<t.lastResetTime)return e.console.log("Ignoring tile %s loaded before reset: %s",i,i.url),void(i.loading=!1);var l=function(){var e=t.source.getClosestLevel();n(t,i,r,e,a)};t._midDraw?window.setTimeout(l,1):l()}(i,r,s,t,o,a)},abort:function(){r.loading=!1}}),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(t,i,n){var o,r,s,a;this.wrapHorizontal?(o=e.positiveModulo(i.x,1),r=e.positiveModulo(n.x,1)):(o=Math.max(0,i.x),r=Math.min(1,n.x));var l=1/this.source.aspectRatio;this.wrapVertical?(s=e.positiveModulo(i.y,l),a=e.positiveModulo(n.y,l)):(s=Math.max(0,i.y),a=Math.min(l,n.y));var c=this.source.getTileAtPoint(t,new e.Point(o,s)),u=this.source.getTileAtPoint(t,new e.Point(r,a)),d=this.source.getNumTiles(t);return this.wrapHorizontal&&(c.x+=d.x*Math.floor(i.x),u.x+=d.x*Math.floor(n.x)),this.wrapVertical&&(c.y+=d.y*Math.floor(i.y/l),u.y+=d.y*Math.floor(n.y/l)),{topLeft:c,bottomRight:u}}})}(OpenSeadragon),function(e){var t=function(t){e.console.assert(t,"[TileCache.cacheTile] options is required"),e.console.assert(t.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(t.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=t.tile,this.tiledImage=t.tiledImage},i=function(t){e.console.assert(t,"[ImageRecord] options is required"),e.console.assert(t.image,"[ImageRecord] options.image is required"),this._image=t.image,this._tiles=[]};i.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height,this._renderedContext=e.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(t){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=t},addTile:function(t){e.console.assert(t,"[ImageRecord.addTile] tile is required"),this._tiles.push(t)},removeTile:function(t){for(var i=0;i<this._tiles.length;i++)if(this._tiles[i]===t)return void this._tiles.splice(i,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",t)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(t){t=t||{},this._maxImageCacheCount=t.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(n){e.console.assert(n,"[TileCache.cacheTile] options is required"),e.console.assert(n.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(n.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(n.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var o=n.cutoff||0,r=this._tilesLoaded.length,s=this._imagesLoaded[n.tile.cacheKey];if(s||(e.console.assert(n.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),s=this._imagesLoaded[n.tile.cacheKey]=new i({image:n.image}),this._imagesLoadedCount++),s.addTile(n.tile),n.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,l,c,u,d,h,m=null,p=-1,g=null,f=this._tilesLoaded.length-1;f>=0;f--)(a=(h=this._tilesLoaded[f]).tile).level<=o||a.beingDrawn||(m?(u=a.lastTouchTime,l=m.lastTouchTime,d=a.level,c=m.level,(u<l||u==l&&d>c)&&(m=a,p=f,g=h)):(m=a,p=f,g=h));m&&p>=0&&(this._unloadTile(g),r=p)}this._tilesLoaded[r]=new t({tile:n.tile,tiledImage:n.tiledImage})},clearTilesFor:function(t){var i;e.console.assert(t,"[TileCache.clearTilesFor] tiledImage is required");for(var n=0;n<this._tilesLoaded.length;++n)(i=this._tilesLoaded[n]).tiledImage===t&&(this._unloadTile(i),this._tilesLoaded.splice(n,1),n--)},getImageRecord:function(t){return e.console.assert(t,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[t]},_unloadTile:function(t){e.console.assert(t,"[TileCache._unloadTile] tileRecord is required");var i=t.tile,n=t.tiledImage;i.unload(),i.cacheImageRecord=null;var o=this._imagesLoaded[i.cacheKey];o.removeTile(i),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[i.cacheKey],this._imagesLoadedCount--),n.viewer.raiseEvent("tile-unloaded",{tile:i,tiledImage:n})}}}(OpenSeadragon),function(e){e.World=function(t){var i=this;e.console.assert(t.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(e){i._autoRefigureSizes?i._figureSizes():i._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(t,i){if(e.console.assert(t,"[World.addItem] item is required"),e.console.assert(t instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(i=i||{}).index){var n=Math.max(0,Math.min(this._items.length,i.index));this._items.splice(n,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return e.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return e.console.assert(t,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,i){e.console.assert(t,"[World.setItemIndex] item is required"),e.console.assert(void 0!==i,"[World.setItemIndex] index is required");var n=this.getIndexOfItem(t);if(i>=this._items.length)throw new Error("Index bigger than number of layers.");i!==n&&-1!==n&&(this._items.splice(n,1),this._items.splice(i,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:n,newIndex:i}))},removeItem:function(t){e.console.assert(t,"[World.removeItem] item is required");var i=e.indexOf(this._items,t);-1!==i&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(i,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var e,t;for(this.viewer._cancelPendingImages(),t=0;t<this._items.length;t++)(e=this._items[t]).removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy();var i=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,t=0;t<i.length;t++)e=i[t],this._raiseRemoveItem(e)},resetItems:function(){for(var e=0;e<this._items.length;e++)this._items[e].reset()},update:function(){for(var e=!1,t=0;t<this._items.length;t++)e=this._items[t].update()||e;return e},draw:function(){for(var e=0;e<this._items.length;e++)this._items[e].draw();this._needsDraw=!1},needsDraw:function(){for(var e=0;e<this._items.length;e++)if(this._items[e].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(e){this._autoRefigureSizes=e,e&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var i,n=(t=t||{}).immediately||!1,o=t.layout||e.DEFAULT_SETTINGS.collectionLayout,r=t.rows||e.DEFAULT_SETTINGS.collectionRows,s=t.columns||e.DEFAULT_SETTINGS.collectionColumns,a=t.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,l=a+(t.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);i=!t.rows&&s?s:Math.ceil(this._items.length/r);var c,u,d,h,m,p=0,g=0;this.setAutoRefigureSizes(!1);for(var f=0;f<this._items.length;f++)f&&f%i==0&&("horizontal"===o?(g+=l,p=0):(p+=l,g=0)),h=(d=(u=(c=this._items[f]).getBounds()).width>u.height?a:a*(u.width/u.height))*(u.height/u.width),m=new e.Point(p+(a-d)/2,g+(a-h)/2),c.setPosition(m,n),c.setWidth(d,n),"horizontal"===o?p+=l:g+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,i=this._contentSize?this._contentSize.clone():null,n=this._contentFactor||0;if(this._items.length){var o=this._items[0],r=o.getBounds();this._contentFactor=o.getContentSize().x/r.width;for(var s=o.getClippedBounds().getBoundingBox(),a=s.x,l=s.y,c=s.x+s.width,u=s.y+s.height,d=1;d<this._items.length;d++)r=(o=this._items[d]).getBounds(),this._contentFactor=Math.max(this._contentFactor,o.getContentSize().x/r.width),s=o.getClippedBounds().getBoundingBox(),a=Math.min(a,s.x),l=Math.min(l,s.y),c=Math.max(c,s.x+s.width),u=Math.max(u,s.y+s.height);this._homeBounds=new e.Rect(a,l,c-a,u-l),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;this._contentFactor===n&&this._homeBounds.equals(t)&&this._contentSize.equals(i)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(e){this.raiseEvent("remove-item",{item:e})}})}(OpenSeadragon)},90864:function(e,t){var i,n,o;!function(){"use strict";n=[],void 0===(o="function"==typeof(i=function(){var e="sans-serif",t="serif",i={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal",window},n=["display:block","position:absolute","top:-999px","left:-999px","font-size:48px","width:auto","height:auto","line-height:normal","margin:0","padding:0","font-variant:normal","white-space:nowrap"],o='<div style="%s" aria-hidden="true">AxmTYklsjo190QW</div>',r=function(){this.fontFamily="",this.appended=!1,this.serif=void 0,this.sansSerif=void 0,this.parent=void 0,this.options={}};return r.prototype.getMeasurements=function(){return{sansSerif:{width:this.sansSerif.offsetWidth,height:this.sansSerif.offsetHeight},serif:{width:this.serif.offsetWidth,height:this.serif.offsetHeight}}},r.prototype.load=function(){var i,r=new Date,s=this,a=s.serif,l=s.sansSerif,c=s.parent,u=s.appended,d=s.options,h=d.reference;function m(e){return n.concat(["font-weight:"+d.weight,"font-style:"+d.style]).concat("font-family:"+e).join(";")}var p=o.replace(/\%s/,m(e)),g=o.replace(/\%s/,m(t));function f(e,t,i){return Math.abs(e.width-t.offsetWidth)>i||Math.abs(e.height-t.offsetHeight)>i}c||(c=s.parent=d.window.document.createElement("div")),c.innerHTML=p+g,l=s.sansSerif=c.firstChild,a=s.serif=l.nextSibling,d.glyphs&&(l.innerHTML+=d.glyphs,a.innerHTML+=d.glyphs),function n(){h||(h=d.window.document.body),!u&&h&&(h.appendChild(c),u=s.appended=!0,i=s.getMeasurements(),l.style.fontFamily=s.fontFamily+", "+e,a.style.fontFamily=s.fontFamily+", "+t),u&&i&&(f(i.sansSerif,l,d.tolerance)||f(i.serif,a,d.tolerance))?d.success():(new Date).getTime()-r.getTime()>d.timeout?d.error():!u&&"requestAnimationFrame"in d.window?d.window.requestAnimationFrame(n):d.window.setTimeout(n,d.delay)}()},r.prototype.cleanFamilyName=function(e){return e.replace(/[\'\"]/g,"").toLowerCase()},r.prototype.cleanWeight=function(e){return""+({normal:"400",bold:"700"}[e]||e)},r.prototype.checkFontFaces=function(e){var t=this;t.options.window.document.fonts.forEach((function(i){t.cleanFamilyName(i.family)===t.cleanFamilyName(t.fontFamily)&&t.cleanWeight(i.weight)===t.cleanWeight(t.options.weight)&&i.style===t.options.style&&i.load().then((function(){t.options.success(i),t.options.window.clearTimeout(e)}))}))},r.prototype.init=function(e,t){var n;for(var o in i)t.hasOwnProperty(o)||(t[o]=i[o]);this.options=t,this.fontFamily=e,!t.glyphs&&"fonts"in t.window.document?(t.timeout&&(n=t.window.setTimeout((function(){t.error()}),t.timeout)),this.checkFontFaces(n)):this.load()},function(e,t){var i=new r;return i.init(e,t),i}})?i.apply(t,n):i)||(e.exports=o)}()},27870:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){var t=Object.prototype.toString.call(e).match(/\[.* (.*)\]/)[1].toLowerCase();return"array"==t||"htmlcollection"==t||"nodelist"==t}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i.r(t),i.d(t,"textContrast",(function(){return s}));var s=function(){function e(e){var t=function(e){var t,i,r;if("string"==typeof e){var s;switch(function(e){if(e)return e=e.toString().trim().toUpperCase(),/^#?([0-9a-fA-F]{3}){1,2}$/.test(e)?"hex":/RGB/.test(e)?"rgb":void 0}(e)){case"hex":s=function(e){if("string"!=typeof e)throw new Error("Invalid hex code");var t=e.replace("#","").toUpperCase();if(t.length%3!=0)throw new Error("Invalid hex code");if(3===t.length&&(t=t.replace(/(.)(.)(.)/,"$1$1$2$2$3$3")),!/[0-9A-F]{6}/.test(t))throw new Error("Invalid hex code");return[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]}(e);break;case"rgb":s=function(e){var t=e.match(/rgba?\((\d+),\s?(\d+),\s?(\d+)/);if(t){var i=n(t,4);return[(i[0],i[1]),i[2],i[3]].map((function(e){return parseInt(e)}))}}(e);break;default:throw new Error("Unknown color type - ".concat(e))}t=s[0],i=s[1],r=s[2]}else{if(!o(e))throw new Error("Unknown color type - ".concat(e));t=e[0],i=e[1],r=e[2]}return[t,i,r].forEach((function(e){if(!/^[0-9]{1,3}$/.test(e))throw new Error("Error converting color to RGB array")})),[t,i,r]}(e);if(t)return function(e){if(!o(e))throw new Error("RGB array not valid");e.forEach((function(e){if(t=e,isNaN(parseFloat(t))||!isFinite(t))throw new Error("RGB component ".concat(e," not valid"));var t}));var t=n(e,3);return(299*t[0]+587*t[1]+114*t[2])/1e3}(t)>=128}return{fix:function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return o(t)?r(t).forEach((function(t){return e(t,i,n)})):"string"==typeof t?r(document.querySelectorAll(t)).forEach((function(t){return e(t,i,n)})):function(e,t,i){var n=function(e){return window.getComputedStyle(e)["background-color"]}(e);e.style.color=isLight(n)?i:t}(t,i,n)},isLight:e,isDark:function(t){var i=e(t);return void 0===i?void 0:!i},isLightOrDark:function(t){return e(t)?"light":"dark"}}}()}])}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{accordion:()=>M,addHistory:()=>Ee,ajaxFormSubmit:()=>Te,autocomplete:()=>le,bannerParallax:()=>j,blurMyBackground:()=>de,calendar:()=>R,clearHistory:()=>Se,closeModal:()=>ve,closeNavMobile:()=>ee,closeRoadblock:()=>fe,contrastText:()=>$e,dragScroll:()=>I,dropdown:()=>C,editorialHeader:()=>je,emailSubscriptions:()=>ze,exploreFurther:()=>Ne,filterToggleShowMore:()=>Z,filterWhittleDown:()=>X,fitText:()=>Me,fixedOnScroll:()=>Ae,formSelectFocus:()=>A,formUnsubscribe:()=>k,getUrl:()=>me,globalSearch:()=>oe,globalSearchClose:()=>se,globalSearchOpen:()=>re,gridboard:()=>q,headerGallery:()=>U,hideStickySidebar:()=>Q,imageInfo:()=>W,imageSlider:()=>Be,imageZoomArea:()=>$,infoButtonTrigger:()=>te,injectContent:()=>we,limitSearch:()=>Pe,linksBar:()=>ie,loadMore:()=>he,loadRelatedSidebar:()=>We,magazineHeader:()=>He,mask:()=>z,maskEmail:()=>be,mediaPlayPauseVideo:()=>Le,mobileSearch:()=>ne,navMobile:()=>K,newsletter:()=>ce,notification:()=>H,openImageFullScreen:()=>ue,openNavMobile:()=>J,pinboard:()=>N,primaryNavigation:()=>qe,printPage:()=>D,rangedAccordion:()=>Ue,relatedSidebar:()=>Fe,reportSearchToGoogleTagManager:()=>xe,restrictDownload:()=>Ce,searchBarBlock:()=>_e,selectDate:()=>O,shareMenu:()=>F,sharePage:()=>B,showAdmissionTooltip:()=>Oe,showStickySidebar:()=>Y,stickyDigitalPublicationHeader:()=>Ve,stickyFilters:()=>ye,stickySidebar:()=>ke,textCount:()=>h,toggleFee:()=>Re,triggerMediaInline:()=>ge,triggerMediaModal:()=>pe});const t={toObject(e){if("string"!=typeof e)return{};var t={};return(e&&e.indexOf("?")>-1?e.split("?")[1]:location.search).replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(function(e,i,n,o){t[i]=o})),t},fromObject(e){var t="",i=0;if(Object.getOwnPropertyNames(e).length>0)for(var n in t="?",e)e.hasOwnProperty(n)&&(t+=(i>0?"&":"")+n+"="+encodeURIComponent(e[n]).replace(/[!'()]/g,"").replace(/\*/g,"%2A").replace(/%2B/gi,"+"),i++);return t},updateParameter(e,t,i){var n=new RegExp("([?&])"+t+"=.*?(&|#|$)","i");if(e.match(n))return e.replace(n,"$1"+t+"="+i+"$2");var o="";-1!==e.indexOf("#")&&(o=e.replace(/.*#/,"#"),e=e.replace(/#.*/,""));var r=-1!==e.indexOf("?")?"&":"?";return e+r+t+"="+i+o}},i=function(e){var i=e,n=new XMLHttpRequest,o=i.url;if(i.queryString="",void 0!==i.data){if(!t.fromObject)throw new ReferenceError("Missing: queryStringHandler.fromObject");i.queryString=t.fromObject(i.data)}if("POST"!==i.type&&(o+=o.indexOf("?")>0?i.queryString.replace("?","&"):i.queryString),n.open(i.type,o,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===i.type&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),void 0!==i.requestHeaders&&i.requestHeaders.length>0)for(var r=0;r<i.requestHeaders.length;r++){var s=i.requestHeaders[r].header,a=i.requestHeaders[r].value;void 0!==s&&void 0!==a&&n.setRequestHeader(s,a)}n.onload=function(){n.status>=200&&n.status<400?"function"===(typeof i.onSuccess).toLowerCase()&&i.onSuccess.call(this,n.responseText,n.status):("function"===(typeof i.onError).toLowerCase()&&i.onError.call(this,n.responseText,n.status),console.log("We reached our target server, but it returned an error: "+n.statusText))},n.onerror=function(){console.log("There was a connection error of some sort"),"function"===(typeof i.onError).toLowerCase()&&i.onError.call(this,n.responseText,n.status)},n.send("POST"===i.type?i.queryString.replace("?",""):"")},n={create(e,t,i){var n="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toGMTString()}document.cookie=e+"="+t+n+"; path=/"},delete(e){e&&this.create(e,"",-1)},read(e){if(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}return null}},o=function(e){if("string"==typeof e){var t=document.createElement("div"),i=document.createTextNode(e.replace(/<[^>]*>?/g,""));return t.appendChild(i),encodeURIComponent(t.textContent)}return""};__webpack_require__(90864);const r=function(e,t,i){for(let n=0;n<e.length;n++)t.call(i,n,e[n])},s=function(){function e(e){return e.replace(/'/gi,"").replace(/"/gi,"")}return window.opera?e(window.getComputedStyle(document.body,":after").getPropertyValue("content"))||"large":window.getComputedStyle&&e(window.getComputedStyle(document.head,null).getPropertyValue("font-family"))||"large"},a=function(e){if(e){var t=e.getBoundingClientRect();return{top:t.top+(document.documentElement.scrollTop||document.body.scrollTop),left:t.left+(document.documentElement.scrollLeft||document.body.scrollLeft),bottom:t.bottom+(document.documentElement.scrollTop||document.body.scrollTop),right:t.right+(document.documentElement.scrollLeft||document.body.scrollLeft),width:t.width,height:t.height}}return null},l=function(e){var t,i={};if("object"==typeof e&&"FORM"===e.nodeName)for(var n=e.elements.length,o=0;o<n;o++)if((t=e.elements[o]).name&&!t.disabled&&"file"!==t.type&&"reset"!==t.type&&"submit"!==t.type&&"button"!==t.type)if("select-multiple"===t.type)for(var r=e.elements[o].options.length-1;r>=0;r--)t.options[r].selected&&(i[t.name]=t.options[r].value);else("checkbox"!==t.type&&"radio"!==t.type||t.checked)&&(i[t.name]=t.value);return i},c=function(e,t,i){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),n.data=i||{},n.eventName=t,e.dispatchEvent(n)},u=function(e){var t,i={el:document,offset:0,duration:250,easing:"linear"},n=Date.now(),o=0,r=!1,s={linear:function(e){return e},easeIn:function(e){return e*e*e},easeOut:function(e){return--e*e*e+1},easeInOut:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}},a=window.requestAnimationFrame;for(var l in e)void 0!==e[l]&&(i[l]=e[l]);function c(){if(r&&0===o)document.documentElement.scrollTop=1,document.body.scrollTop=1,o=1,i.el=document.documentElement.scrollTop?document.documentElement:document.body,requestAnimationFrame(c);else{var e=1<(d=(Date.now()-n)/i.duration)?1:d,l=s[i.easing](e);i.el.scrollTop=l*(i.offset-o)+o,e<1?u():(function(){if(a)try{cancelAnimationFrame(t)}catch(e){}else clearTimeout(t)}(),"function"===(typeof i.onComplete).toLowerCase()&&i.onComplete.call(this))}var d}function u(){t=a?requestAnimationFrame(c):setTimeout((function(){c()}),1e3/60)}i.el===document&&(r=!0,i.el=document.documentElement.scrollTop?document.documentElement:document.body),(o=i.el.scrollTop)!==i.offset&&u()},d=function(e){e.focus(),e!==document.activeElement&&(e.setAttribute("tabindex","-1"),e.focus())},h=function(e){var t=e.querySelector("input"),i=e.querySelector("output");function n(){var e=t.value,n=e.length,o=e.match(/(\r\n|\n|\r)/g);null!==o&&(n+=o.length),i.value=n}this.destroy=function(){t.removeEventListener("input",n),A17.Helpers.purgeProperties(this)},this.init=function(){t.addEventListener("input",n,!1),n()}},m=function(e){if(e||e.element||e.target){var t=e.element,i=e.target,n=void 0===e.padding?{left:0,top:0}:e.padding,o=void 0===e.position?"bottom left":e.position,r=e.breakpoints||!1;n.left=void 0===e.padding||void 0===e.padding.left?0:n.left,n.top=void 0===e.padding||void 0===e.padding.top?0:n.top,t.style.opacity=0,document.getElementById("a17").getBoundingClientRect();var s=i.getBoundingClientRect(),a=t.getBoundingClientRect(),l=document.documentElement.scrollTop||document.body.scrollTop,c=0,u=0;"auto"!==n.left?(o.indexOf("left")>-1&&h(),o.indexOf("center")>-1&&(h(),c+=s.width/2-a.width/2-n.left),o.indexOf("right")>-1&&m()):h(),o.indexOf("top")>-1?u=s.top+l-n.top-a.height:d(),l>u&&d(),"auto"!==n.left&&(c+a.width>window.innerWidth?m():c<n.left&&(c=n.left)),t.classList.add("js-positioned"),!r||r&&r[A17.currentMediaQuery]?("auto"!==n.left&&(t.style.left=Math.round(c)+"px"),t.style.top=Math.round(u)+"px"):(t.style.left="125px",t.style.top="",t.style.width="300px"),t.style.opacity=1}function d(){u=s.top+s.height+l+n.top}function h(){c=s.left+n.left}function m(){c=s.left+s.width-a.width-n.left}},p=function(){var e,t,i=!1;function n(){window.picturefill&&window.picturefill(),window.requestAnimationFrame((function(){c(document,"page:updated"),c(document,"loader:complete"),c(document,"ajaxPageLoadMask:hide"),c(document,"ajaxPageLoad:complete"),c(document,"setScrollDirection:machineScroll",{machineScroll:!1})})),i=!1}function o(o){if(!A17.ajaxLinksActive)return window.location.href=o.href,!1;if(!i){switch(i=!0,c(document,"shareMenu:close"),c(document,"selectDate:close"),c(document,"fullScreenImage:close"),c(document,"collectionSearch:close"),c(document,"infoButtonInfo:close"),c(document,"stickySidebar:clean"),c(document,"modal:close"),c(document,"roadblock:close"),c(document,"globalSearch:close"),c(document,"navMobile:close"),c(document,"dropdown:close"),t=null,c(document,"ajaxPageLoadMask:show"),c(document,"loader:start"),o.type){case"tab":document.documentElement.classList.add("s-page-nav");break;case"modal":break;default:(s=document.querySelector("#a17")).style.minHeight=s.offsetHeight+"px",document.documentElement.classList.add("s-page-nav")}var s,l=document.querySelector('meta[name="csrf-token"]');l=l?l.getAttribute("content"):"",_({url:o.href,type:"GET",requestHeaders:[{header:"X-CSRF-Token",value:l}],onSuccess:function(s,l,h){try{clearTimeout(e)}catch(e){}try{o.href=h,c(document,"setScrollDirection:machineScroll",{machineScroll:!0});var m=L(s,"native");switch(o.type){case"tab":!function(e,t){var i=document.getElementById(e.ajaxTabTarget);i.innerHTML=t.getElementById(e.ajaxTabTarget).innerHTML;var o=Math.round(a(i).top);u({el:document,offset:o,duration:500,easing:"easeInOut",onComplete:function(){setTimeout((function(){d(i)}),0)}}),document.documentElement.classList.remove("s-page-nav"),c(document,"page:updated"),c(document,"gtm:push",{event:"Pageview",url:e.href}),n()}(o,m);break;case"modal":!function(e,t){document.querySelector("[data-modal]").className="g-modal "+(e.modalClass?e.modalClass:""),document.querySelector("[data-modal-content]").innerHTML=t.querySelector("body").innerHTML,c(document,"modal:show",{opener:e.opener}),n()}(o,m);break;default:!function(e,i){document.documentElement.classList.add("s-page-nav-swapping"),setTimeout((function(){var t=document.querySelector("#a17");t.innerHTML=i.querySelector("#a17").innerHTML,t.style.minHeight="",function(e){if(e.documentElement.classList.contains("s-unsticky-header")?document.documentElement.classList.add("s-unsticky-header"):document.documentElement.classList.remove("s-unsticky-header"),e.documentElement.classList.contains("s-contrast-header")?document.documentElement.classList.add("s-contrast-header"):document.documentElement.classList.remove("s-contrast-header"),e.documentElement.classList.contains("s-filled-logo")?document.documentElement.classList.add("s-filled-logo"):document.documentElement.classList.remove("s-filled-logo"),e.documentElement.classList.contains("s-gallery-header")?document.documentElement.classList.add("s-gallery-header"):document.documentElement.classList.remove("s-gallery-header"),e.documentElement.classList.contains("s-roadblock-defined")){var t=e.querySelector(".g-modal--promo");t&&(Array.prototype.forEach.call(t,(function(e){var t=e.cloneNode(!0);document.body.append(t)})),document.documentElement.classList.add("s-roadblock-defined"))}else document.documentElement.classList.remove("s-roadblock-defined");var i=/p-\S*/g,n=document.documentElement.className.match(i),o=e.documentElement.className.match(i);r(n,(function(e,t){document.documentElement.classList.remove(t)})),r(o,(function(e,t){document.documentElement.classList.add(t)}))}(i),window.requestAnimationFrame((function(){var t=0,i=null;e.popstate&&e.popstate.data.scrollY?t=e.popstate.data.scrollY:window.location.hash?i=document.getElementById(window.location.hash.replace("#","")):e.ajaxScrollTarget&&(i=document.getElementById(e.ajaxScrollTarget)),i&&(t=Math.round(a(i).top)),document.documentElement.scrollTop=t,document.body.scrollTop=t,document.documentElement.classList.remove("s-page-nav"),document.documentElement.classList.remove("s-page-nav-swapping"),c(document,"page:updated"),i&&setTimeout((function(){d(i)}),0),n()}))}),1),t=i.title,document.title=t,e.popstate||c(document,"history:pushstate",{url:e.href,type:e.type,title:t}),A17.currentPathname=window.location.pathname,c(document,"gtm:push",{event:"Pageview",url:e.href})}(o,m)}}catch(e){c(document,"loader:error"),c(document,"ajaxPageLoadMask:hide"),document.documentElement.classList.remove("s-page-nav"),document.documentElement.classList.remove("s-page-nav-swapping"),i=!1,A17.ajaxLinksFailSafe?location.href=o.href:console.log(e)}},onError:function(t){clearTimeout(e),c(document,"loader:error"),c(document,"ajaxPageLoadMask:hide"),document.documentElement.classList.remove("s-page-nav"),document.documentElement.classList.remove("s-page-nav-swapping"),i=!1,A17.ajaxLinksFailSafe?location.href=o.href:console.log(t)}}),e=setTimeout((function(){A17.ajaxLinksFailSafe?location.href=o.href:console.log("Ajax response taking a long time to complete")}),5e3)}}function s(e,t,i){t&&window.addEventListener("beforeunload",(function(){c(document,"gtm:push",t)}))}document.addEventListener("ajax:getPage",(function(e){e.data.url&&(v(e.data.url,e)?(history.state||e.data.type&&(!e.data.type||"modal"===e.data.type)||c(document,"history:replacestate",{url:location.href,type:e.data.type||"page",scrollY:window.scrollY||0}),o({href:e.data.url,type:e.data.type||"page",popstate:!1,modalClass:e.data.modalClass?e.data.modalClass:null,opener:e.data.opener?e.data.opener:null,ajaxScrollTarget:e.data.ajaxScrollTarget?e.data.ajaxScrollTarget:null})):window.location.href=e.data.url)})),document.addEventListener("ajax:pageload:popstate",(function(e){A17.currentPathname===window.location.pathname||e.data.type&&"page"!==e.data.type||(e.preventDefault(),o({href:e.data.url,type:e.data.type,title:e.data.title,popstate:e}))})),document.addEventListener("click",(function(e){var t=g(e.target,"A"),n=T(t);if(A17.ajaxLinksActive){var r=f(t,e);if(r){if(e.preventDefault(),!i){t.classList.contains("checkbox")&&(t.classList.contains("s-checked")?t.classList.remove("s-checked"):t.classList.add("s-checked")),n&&c(document,"gtm:push",n);var a=t.getAttribute("data-ajax-tab-target"),l=t.getAttribute("data-ajax-scroll-target"),u=null;null!==a&&null!==l&&(a=null),null!==a&&((u=document.getElementById(a))||(l=a,a=null)),u||c(document,"history:replacestate",{url:location.href,type:"page",scrollY:window.scrollY||0}),o({href:r.href,type:a?"tab":"page",popstate:!1,link:t,ajaxTabTarget:a||null,ajaxScrollTarget:l||null})}}else s(0,n)}else s(0,n)}))},g=function(e,t){for(;e&&e.tagName!==t;)e=e.parentElement;return e},f=function(e,t){if(!e||!t)return!1;var i=e,n=i.href;return"A"===e.tagName&&!!v(n,t)&&!i.hasAttribute("data-no-ajax")&&!i.hasAttribute("download")&&(!i.target||"_blank"===i.target)&&!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)&&{href:n,el:i}},v=function(e,t){if(!e||"#"===e)return!1;var i=document.createElement("a");if(i.href=e,window.location.protocol!==i.protocol||window.location.hostname!==i.hostname)return!1;var n=t.target;if("A"!==n.tagName){if(n===document)return!0;n=n.closest("a")}return null!==n&&(n.host!==window.location.host||n.pathname!==window.location.pathname||!n.hash)&&n.host===window.location.host&&n.pathname===window.location.pathname};var y=__webpack_require__(38501),w=__webpack_require__.n(y);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}const E=function(e){if("object"!==S(e).toLowerCase())return!1;var t=0,i=e.variants.length,o="A17_fonts_cookie_"+e.name,r=n.read(o)||"";function s(){if(++t>=i){n.create(o,i,1);var r="s-"+e.name+"-loaded",s=document.documentElement;s.classList.contains(r)||(s.classList.add(r),c(document,"content:populated"))}}if(r&&r===i.toString())t=r,s();else for(var a=0;a<i;a++)w()(e.variants[a].name,{success:s,error:s,weight:e.variants[a].weight||"",timeout:3e3})},b=function(e){return"all"===e||e===A17.currentMediaQuery||"small+"===e&&A17.currentMediaQuery.indexOf("xsmall")<0||"medium+"===e&&A17.currentMediaQuery.indexOf("small")<0||"large+"===e&&A17.currentMediaQuery.indexOf("small")<0&&A17.currentMediaQuery.indexOf("medium")<0||"small-"===e&&A17.currentMediaQuery.indexOf("small")>=0||"medium-"===e&&(A17.currentMediaQuery.indexOf("small")>=0||"medium"===A17.currentMediaQuery)||"large-"===e&&(A17.currentMediaQuery.indexOf("small")>=0||"medium"===A17.currentMediaQuery||"large"===A17.currentMediaQuery)},T=function(e){if(!e||!e.dataset)return!1;var t=!1,i={};for(var n in e.dataset)if(e.dataset.hasOwnProperty(n)&&n.indexOf("gtm")>-1){var o=n.replace(/^gtm/,"").replace(/^-/,""),r=e.dataset[n],s=o.replace(/[^\d+]/g,"")||0;o=(o=o.replace(/^\d+/,"")).charAt(0).toLowerCase()+o.slice(1),"::document.title::"===r&&(r=document.title.replace(/ \| The Art Institute of Chicago/gi,"")),i.hasOwnProperty(s)||(i[s]={}),i[s][o]=r,t=!0}return i=Object.values(i),!!t&&i},x=function(e){var t,i,n={25:!1,50:!1,75:!1,100:!1};function o(){var e=Math.round(t.getCurrentTime()/t.getDuration()*100);for(var i in n)e>=(100===i?99:i)&&!n[i]&&(n[i]=!0,c(document,"gtm:push",{event:i+"%",eventCategory:"video-engagement"}))}function r(e){if(1===t.getPlayerState())i=setInterval(o,250),c(document,"gtm:push",{event:"playing",eventCategory:"video-engagement"});else{2===t.getPlayerState()&&c(document,"gtm:push",{event:"paused",eventCategory:"video-engagement"});try{clearInterval(i)}catch(e){}}}if(!document.getElementById("youtubeapijs")){var s=document.createElement("script");s.src="https://www.youtube.com/iframe_api",s.id="youtubeapijs";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}e.id||(e.id="youtube_"+Math.random().toString(36).substr(2,9)),function i(){A17.onYouTubeIframeAPIReady?t=new YT.Player(e.id,{origin:window.location.origin,events:{onStateChange:r}}):setTimeout(i,250)}()},L=function(e,t){if("native"===t)return(new DOMParser).parseFromString(e,"text/html");var i=document.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?i.documentElement.innerHTML=e:i.body.innerHTML=e,i};function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}const _=function(e){var i=e,n=new XMLHttpRequest,o=i.url;if(i.queryString="",void 0!==i.data){if(!t.fromObject)throw new ReferenceError("Missing: queryStringHandler.fromObject");i.queryString=t.fromObject(i.data)}if("POST"!==i.type&&(o+=o.indexOf("?")>0?i.queryString.replace("?","&"):i.queryString),n.open(i.type,o,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===i.type&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),void 0!==i.requestHeaders&&i.requestHeaders.length>0)for(var r=0;r<i.requestHeaders.length;r++){var s=i.requestHeaders[r].header,a=i.requestHeaders[r].value;void 0!==s&&void 0!==a&&n.setRequestHeader(s,a)}n.onload=function(){n.status>=200&&n.status<400?"function"===P(i.onSuccess).toLowerCase()&&i.onSuccess.call(this,n.responseText,n.status,n.responseURL):("function"===P(i.onError).toLowerCase()&&i.onError.call(this,n.responseText,n.status,n.responseURL),console.log("We reached our target server, but it returned an error: "+n.statusText))},n.onerror=function(){console.log("There was a connection error of some sort"),"function"===P(i.onError).toLowerCase()&&i.onError.call(this,n.responseText,n.status)},n.send("POST"===i.type?i.queryString.replace("?",""):"")},C=function(e){var t=!1,i=!1,n=!0,o=e.getAttribute("data-dropdown-breakpoints")||"all";function r(t){n&&(t&&t.stopPropagation(),(t.target.classList.contains("dropdown__trigger")?t.target:t.target.querySelector(".dropdown__trigger")||t.target.parentNode).querySelector("button").setAttribute("aria-expanded","true"),c(document,"dropdown:close"),e.classList.add("s-active"),setTimeout((function(){var t=e.querySelector("ul");d(t),s()}),0),i=!0)}function s(t){if(i){var n=e.querySelector("ul");n.removeAttribute("style");var o=n.getBoundingClientRect(),r=document.getElementById("content").getBoundingClientRect();o.x+o.width>r.x+r.width&&n.setAttribute("style","left: "+(r.x+r.width-(o.x+o.width)).toString()+"px")}}function a(t){t&&t.data.el&&t.data.el===e&&n&&!i&&r()}function l(t){if(i){if(t){var n=null;"focus"===t.type&&"INPUT"===document.activeElement.tagName&&(n=document.activeElement).blur(),t.stopPropagation(),n&&window.requestAnimationFrame((function(){n.focus()}))}(t.target.classList.contains("dropdown__trigger")?t.target:t.target.querySelector(".dropdown__trigger")||t.target.parentNode).querySelector("button").setAttribute("aria-expanded","false"),e.classList.remove("s-active"),i=!1}}function u(e){i&&l()}function h(t){document.activeElement===e||e.contains(document.activeElement)?(t.stopPropagation(),i?document.activeElement!==e&&document.activeElement!==e.firstElementChild||(l(t),setTimeout((function(){d(e.parentNode)}),0)):r(t)):l(t)}function m(t){document.activeElement!==e&&!e.contains(document.activeElement)&&i&&l(t)}function p(){t&&(i=!1,window.removeEventListener("resize",s),document.removeEventListener("focus",h),document.removeEventListener("click",m),document.removeEventListener("dropdown:open",a),document.removeEventListener("dropdown:close",u),t=!1)}function g(){!t&&b(o)?t||(e.setAttribute("tabindex","0"),i=e.classList.contains("s-active"),window.addEventListener("resize",s,!0),document.addEventListener("focus",h,!0),document.addEventListener("click",m,!1),document.addEventListener("dropdown:open",a,!1),document.addEventListener("dropdown:close",u,!1),t=!0):t&&!b(o)&&p()}this.destroy=function(){document.removeEventListener("mediaQueryUpdated",g),p(),A17.Helpers.purgeProperties(this)},this.init=function(){document.addEventListener("mediaQueryUpdated",g,!0),g(),window.addEventListener("popstate",(function(e){location.reload()}))}},A=function(e){function t(){e.classList.add("s-focus")}function i(){e.classList.remove("s-focus")}this.destroy=function(){e.querySelector("select").removeEventListener("focus",t),e.querySelector("select").removeEventListener("blur",i),A17.Helpers.purgeProperties(this)},this.init=function(){e.querySelector("select").addEventListener("focus",t,!1),e.querySelector("select").addEventListener("blur",i,!1)}},k=function(e){var t=document.getElementById("subscriptions-OptMuseum"),i=document.getElementById("subscriptions-OptShop"),n=Array.from(document.querySelectorAll('input[type=checkbox][name^="subscriptions[]"]:not([id="subscriptions-OptMuseum"]):not([id="subscriptions-OptShop"])')),o=document.getElementById("unsubscribeFromMuseum"),s=document.getElementById("unsubscribeFromShop"),a=document.getElementById("unsubscribeFromAll"),l=e.querySelector('input[type=checkbox][name^="unsubscribe"]');function c(e){r(e,(function(e,t){!0!==t.disabled&&(t.savedState=t.checked,t.setAttribute("disabled","true"),t.removeAttribute("checked"),t.checked=!1)}))}function u(e){r(e,(function(e,t){t.removeAttribute("disabled"),t.hasOwnProperty("savedState")&&(t.checked=t.savedState,delete t.savedState)}))}function d(e){!function(e){e.preventDefault(),e.stopPropagation(),l.checked=!l.checked,"unsubscribeFromAll"==l.id&&(o.checked=a.checked,s.checked=a.checked),("unsubscribeFromMuseum"==l.id||"unsubscribeFromShop"==l.id)&&o.checked&&s.checked&&(a.checked=!0),!a.checked||o.checked&&s.checked||(a.checked=!1),o.checked?c(n):u(n),s.checked?c([i]):u([i]),t.checked=!o.checked}(e)}this.destroy=function(){e.removeEventListener("click",d),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",d,!1)}},R=function(e){e.getAttribute("data-calendar-url");var i,n,o,s,a,l,u,d,h=0,m=[],p=!1,g=[],f=[],v="",y={},w="single",S="start";function E(e){return new Date(parseInt(e.substring(0,4)),parseInt(e.substring(4,6))-1,parseInt(e.substring(6,8)))}function b(){o>11&&(o=0,s++),o<0&&(o=11,s--)}function T(e,o,r){new Date(o,r);var s=1===new Date(o,1,29).getMonth();f[1]=s?29:28;for(var a=new Date(o,r).getDay(),l=f[r]+a;l%7>0;)l++;v="<tr>";for(var c=1;c<=l;c++){var u="",d="";if(c<=a||c>f[r]+a)u="&nbsp;";else{var h=c-a,m=new Date(o,r,h),p=m.getTime()===i.getTime(),w=m.getTime()<n.getTime();if(p&&(d="m-calendar__today"),y.start.dateObj&&m.getTime()===y.start.dateObj.getTime()&&(d+=" s-start"),y.end.dateObj&&m.getTime()===y.end.dateObj.getTime()&&(d+=" s-end"),y.start.dateObj&&y.end.dateObj&&!(m.getTime()<=y.start.dateObj.getTime()||m.getTime()>=y.end.dateObj.getTime())&&(d+=" s-range"),p||!w){var S=g[r]+" "+h+", "+o,E=r+1;E=E<10?"0"+E:E.toString();var b=h<10?"0"+h:h.toString();u='<a href="'+t.updateParameter(window.location.href,"date",o.toString()+E+b)+'" data-date="'+o.toString()+E+b+'" title="'+S+'">'+h+"</a>"}else u=h}v=v+'<td class="'+d+'">'+u+"</td>\n"+(0!==c&&c!==l&&c%7==0?"</tr>\n<tr>\n":"")}v+="</tr>",e.querySelector("[data-calendar-title]").textContent=g[r]+" "+o,e.querySelector("tbody").innerHTML=v}function x(e,t){if(m.length!==h)for(var i=0;i<h;i++){var n=l.cloneNode(!0);n.removeAttribute("data-calendar-month-template"),n.removeAttribute("style"),a.insertBefore(n,l),m.push(n)}s=e,o=t-1;for(var r=0;r<h;r++)o+=1,b(),T(m[r],s,o)}function L(e){if(y.start.dateObj&&e&&(!y.end.dateObj||y.end.dateObj.getTime()===e.getTime())){r(a.querySelectorAll(".s-range"),(function(e,t){t.classList.remove("s-range")}));var t=new Date(y.start.dateObj);for(t.setDate(t.getDate()+1);t.getTime()<e.getTime();){var i=t.getMonth()+1,n=t.getDate();i=i<10?"0"+i:i.toString(),n=n<10?"0"+n:n.toString(),r(a.querySelectorAll('[data-date="'+t.getFullYear()+i+n+'"]'),(function(e,t){t.parentNode.classList.add("s-range")})),t.setDate(t.getDate()+1)}}}function P(e){"start"!==e&&"all"!==e||r(a.querySelectorAll(".s-start"),(function(e,t){t.classList.remove("s-start")})),"end"!==e&&"all"!==e||(r(a.querySelectorAll(".s-range"),(function(e,t){t.classList.remove("s-range")})),r(a.querySelectorAll(".s-end"),(function(e,t){t.classList.remove("s-end")})))}function _(){0===Object.keys(y.start).length?c(document,"selectDate:close"):(0===Object.keys(y.end).length&&(y.end=y.start),c(p,"calendar:datesSelected",{dates:y}))}function C(e){if("end"===e&&(S="start",y.end={},u.classList.add("s-active"),d.classList.remove("s-has-date"),d.classList.remove("s-active"),d.textContent="To"),"all"===e){S="start",y.start={},y.end={},u.classList.add("s-active"),u.classList.remove("s-has-date"),u.textContent="From",d.classList.remove("s-active"),d.classList.remove("s-has-date"),d.textContent="To";var t=a.querySelector(".s-start");t&&t.classList.remove("s-start");var i=a.querySelector(".s-end");i&&i.classList.remove("s-end")}P(e)}function A(e){e.preventDefault(),e.stopPropagation();var t=e.target;if(t.blur(),null!==t.getAttribute("data-calendar-next")&&(o++,b(),x(s,o)),null!==t.getAttribute("data-calendar-prev")){for(var i=1;i<2*h;i++)o-=1,b();x(s,o)}null!==t.getAttribute("data-calendar-start")&&C("end"),null!==t.getAttribute("data-calendar-end")&&(S="end",u.classList.remove("s-active"),d.classList.add("s-active")),null!==t.getAttribute("data-calendar-reset")&&C("all"),null!==t.getAttribute("data-calendar-close")&&c(document,"selectDate:close"),null!==t.getAttribute("data-calendar-done")&&_(),null!==t.getAttribute("data-date")&&function(e){var t=e.getAttribute("data-date"),i=E(t),n=e.getAttribute("title"),o=i.toISOString().substr(0,10),r=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear().toString().slice(-2),s=i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear().toString().slice(-2);y[S]={string:t,dateObj:i,friendlyString:n,iso:o,short:r,shortUS:s},"start"===S?(S="end",y.end={},u.classList.remove("s-active"),u.classList.add("s-has-date"),u.textContent=n,d.classList.add("s-active"),d.textContent="To",P("all"),e.parentNode.classList.add("s-start"),c(p,"calendar:dateSelected",{start:y.start}),"single"===w&&_()):"end"===S&&(d.textContent=n,P("end"),e.parentNode.classList.add("s-end"),L(y.end.dateObj),c(p,"calendar:dateSelected",{end:y.end}),A17.currentMediaQuery.indexOf("small")<0&&_())}(t)}function k(e){null!==e.target.getAttribute("data-date")&&L(E(e.target.getAttribute("data-date")))}function R(t){i=new Date,i=new Date(i.getFullYear(),i.getMonth(),i.getDate()),n=i,o=i.getMonth(),s=i.getFullYear(),h=A17.currentMediaQuery.indexOf("xsmall")<0?2:1,v="",y.start={},y.end={},r(m,(function(e,t){t.parentNode.removeChild(t)})),m=[],a=e.querySelector("[data-calendar-months]"),l=a.querySelector("[data-calendar-month-template]"),u=e.querySelector("[data-calendar-start]"),d=e.querySelector("[data-calendar-end]"),C("all"),t&&t.data.el&&(p=t.data.el),n=t&&t.data.minDate&&"today"!==t.data.minDate?t.data.minDate:i,w=t&&t.data.mode&&"range"===t.data.mode?"range":"single",e.setAttribute("data-calendar-mode",w),x(n.getFullYear(),n.getMonth())}y.start={},y.end={},g[0]="Jan",g[1]="Feb",g[2]="Mar",g[3]="Apr",g[4]="May",g[5]="Jun",g[6]="Jul",g[7]="Aug",g[8]="Sep",g[9]="Oct",g[10]="Nov",g[11]="Dec",f[0]=31,f[1]=28,f[2]=31,f[3]=30,f[4]=31,f[5]=30,f[6]=31,f[7]=31,f[8]=30,f[9]=31,f[10]=30,f[11]=31,this.destroy=function(){e.removeEventListener("click",A),e.removeEventListener("mouseover",k),e.removeEventListener("calendar:opener",R),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",A,!1),e.addEventListener("mouseover",k,!1),e.addEventListener("calendar:opener",R,!1)}},O=function(e){var i=document.getElementById("calendar"),n="range"===e.getAttribute("data-selectDate-mode")?"range":"single",o=e.getAttribute("data-selectDate-displayFormat")||"shortUS",r=e.querySelector("[data-selectDate-open]"),s=e.querySelector("[data-selectDate-display]"),a="s-date-selected",l=!1,u="";function h(){"input"===s.tagName.toLowerCase()?s.value=u:s.textContent=u}function p(t){t||(u="",h(),e.classList.remove(a)),l&&(document.documentElement.classList.remove("s-calendar-active"),c(document,"body:unlock"),i.classList.remove("js-positioned"),i.removeAttribute("style"),c(document,"focus:untrap"),setTimeout((function(){d(e.parentNode)}),0),l=!1)}function g(t){if(t.preventDefault(),t.stopPropagation(),r.blur(),l)p();else{document.documentElement.classList.add("s-calendar-active"),c(i,"calendar:opener",{el:e,minDate:"today",mode:n}),c(document,"body:lock",{breakpoints:"xsmall small"}),A17.currentMediaQuery.indexOf("small")<0&&m({element:i,target:e,padding:{left:-20,top:20}}),setTimeout((function(){d(i)}),0),c(document,"focus:trap",{element:i}),l=!0;var o=T(e);o&&c(document,"gtm:push",o)}}function f(t){t&&t.data&&"range"===n&&(t.data.start&&(u=t.data.start[o]),t.data.end&&(u+=" – "+t.data.end[o]),(t.data.start||t.data.end)&&(h(),e.classList.add(a)))}function v(i){if(l&&i){if(i&&i.data&&i.data.dates&&(u=i.data.dates.start[o],u=i.data.dates.start.string!==i.data.dates.end.string?i.data.dates.start[o]+" – "+i.data.dates.end[o]:i.data.dates.start[o],h(),e.classList.add(a),"input"!==s.tagName.toLowerCase())){var n=t.updateParameter(window.location.href,"start",i.data.dates.start.iso);n=(n=t.updateParameter(n,"end",i.data.dates.end.iso)).replace(/time=weekend&/gi,""),c(document,"ajax:getPage",{url:n})}p(!0)}}function y(e){l&&(e.preventDefault(),e.stopPropagation(),p())}function w(e){var t="INPUT"===e.target.tagName;l&&27===e.keyCode&&!t&&p()}function S(){p(!0)}this.destroy=function(){r.removeEventListener("click",g),e.removeEventListener("calendar:dateSelected",f),e.removeEventListener("calendar:datesSelected",v),document.removeEventListener("selectDate:close",p),document.removeEventListener("click",y),window.removeEventListener("keyup",w),window.removeEventListener("resized",S),A17.Helpers.purgeProperties(this)},this.init=function(){r.addEventListener("click",g,!1),e.addEventListener("calendar:dateSelected",f,!1),e.addEventListener("calendar:datesSelected",v,!1),document.addEventListener("selectDate:close",p,!1),document.addEventListener("click",y,!1),window.addEventListener("keyup",w,!1),window.addEventListener("resized",S,!1)}},I=function(e){var t,i,n=0,o=0,r=!1,s=!0,a=0,l=!1,c=!1,u=null,d=[];function h(){(l=c||e.scrollWidth>e.clientWidth)?(e.classList.add("s-scrollable"),t&&t.classList.remove("s-hidden"),i&&i.classList.remove("s-hidden"),c=!0):(e.classList.remove("s-scrollable"),e.classList.remove("s-dragging"),e.classList.remove("s-mousedown"),e.parentElement.classList.remove("s-scroll-start"),e.parentElement.classList.remove("s-scroll-end"),t&&t.classList.add("s-hidden"),i&&i.classList.add("s-hidden")),u=null,w()}function m(t,i){if(l){var o=n-t;e.scrollLeft=o,n=o}}function p(){l&&!r&&(Math.abs(a)>0&&(a=a>0?a-1:a+1),Math.abs(a)>0&&(m(a),window.requestAnimationFrame(p)))}function g(e){l&&!s&&(e.preventDefault(),e.stopPropagation())}function f(t){l&&(t.preventDefault(),e.classList.add("s-mousedown"),a=0,n=e.scrollLeft,o=t.clientX,r=!0)}function v(t){l&&(r=!1,Math.abs(a)>0&&window.requestAnimationFrame(p),e.classList.remove("s-dragging"),e.classList.remove("s-mousedown"),setTimeout((function(){s=!0}),50))}function y(t){l&&r&&(m(a=-o+t.clientX),o=t.clientX,s=!(Math.abs(a)>3),e.classList.add("s-dragging"))}function w(){(n=e.scrollLeft)!==u&&(u=n,n>0?(e.parentElement.classList.add("s-scroll-start"),t&&(t.disabled=!1)):(e.parentElement.classList.remove("s-scroll-start"),t&&(t.disabled=!0)),e.clientWidth+n>=e.scrollWidth?(e.parentElement.classList.add("s-scroll-end"),i&&(i.disabled=!0)):(e.parentElement.classList.remove("s-scroll-end"),i&&(i.disabled=!1)))}function S(t){e.scrollTo({top:0,left:Math.max(e.scrollLeft-.5*e.clientWidth,0),behavior:"smooth"})}function E(t){e.scrollTo({top:0,left:Math.min(e.scrollLeft+.5*e.clientWidth,e.scrollWidth),behavior:"smooth"})}this.destroy=function(){e.removeEventListener("click",g),e.removeEventListener("mousedown",f),e.removeEventListener("scroll",w),window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",y),window.removeEventListener("resized",h);for(var n=0;n<d.length;n++)d[n].removeEventListener("load",h);t.removeEventListener("click",S),i.removeEventListener("click",E),A17.Helpers.purgeProperties(this)},this.init=function(){!function(){e.addEventListener("click",g,!1),e.addEventListener("mousedown",f,!1),e.addEventListener("scroll",w,!1),window.addEventListener("mouseup",v,!1),window.addEventListener("mousemove",y,!1),window.addEventListener("resized",h,!1),d=e.querySelectorAll("img,iframe");for(var n=0;n<d.length;n++)d[n].addEventListener("load",h,!1);var o=e.parentNode;o&&(o=o.parentNode),o&&(t=o.querySelector(".b-drag-scroll__btn-prev"),i=o.querySelector(".b-drag-scroll__btn-next")),t&&t.addEventListener("click",S,!1),i&&i.addEventListener("click",E,!1),h()}()}},M=function(e){function t(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function i(e){var t=e.firstElementChild.offsetHeight;e.style.height=t+"px"}function n(){this.removeAttribute("style"),this.removeEventListener("transitionend",n),c(document,"page:updated")}function o(e){if(e.target.classList.contains("o-accordion__trigger")||e.target.parentNode.classList.contains("o-accordion__trigger")){e.preventDefault(),e.stopPropagation();var t=e.target.classList.contains("o-accordion__trigger")?e.target:e.target.parentNode,o=t.parentElement.nextElementSibling||t.nextElementSibling,r=o.classList.contains("o-accordion__panel");if(t.classList.contains("s-inactive"))return;if(r){if(t.blur(),"true"===t.getAttribute("aria-expanded"))i(o),t.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true"),o.offsetHeight,o.style.height=0,o.style.overflow="hidden";else{o.style.height=0,o.style.overflow="hidden",t.setAttribute("aria-expanded","true"),o.setAttribute("aria-hidden","false"),setTimeout((function(){setTimeout((function(){d(o)}),0)}),0),i(o);var s=T(t);s&&c(document,"gtm:push",s)}o.addEventListener("transitionend",n,!1)}}}function s(e){o(e)}function l(e){13!==e.keyCode&&8!==e.keyCode||o(e)}function u(i){try{e.querySelector(".o-accordion__trigger.s-focus").classList.remove("s-focus")}catch(e){}if(9===i.keyCode&&e.contains(document.activeElement)){document.activeElement.classList.contains("o-accordion__trigger")&&document.activeElement.classList.add("s-focus");var n=t(document.activeElement,"o-accordion__panel");n&&"true"===n.getAttribute("aria-hidden")&&function(e){if(e){e.blur();var i=t(e,"o-accordion__panel"),n=!1;i&&!i.getAttribute("tabindex")&&(i.setAttribute("tabindex","0"),n=!0);var o=[];if(r(document.querySelectorAll('a:not([disabled]), button:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])'),(function(e,n){var r=!0;(n.offsetWidth<=0||n.offsetWidth<=0||"true"===n.getAttribute("aria-hidden"))&&(r=!1);var s=t(n,"o-accordion__panel");s&&"true"===s.getAttribute("aria-hidden")&&(r=!1),n===i&&(r=!0),r&&o.push(n)})),n&&i.removeAttribute("tabindex"),o.length>0){var s=o.indexOf(i);s>-1&&(o[s+1]||o[0]).focus()}}}(document.activeElement)}}this.destroy=function(){e.removeEventListener("click",s),e.removeEventListener("keyup",l),window.removeEventListener("keyup",u),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",s,!1),e.addEventListener("keyup",l,!1),window.addEventListener("keyup",u,!1),function(){if(window.location.hash&&"#"!==window.location.hash){var t=document.getElementById(window.location.hash.replace(/#/gi,""));if(e.contains(t)){var i=Math.round(a(t).top);window.scrollTo(0,i),t.click()}}}()}},H=function(e){var t=e.querySelectorAll("[data-notification-closer]"),i="has_seen_notification",o=e.getAttribute("data-notification-hash");function s(){this.parentNode.removeChild(this),e.removeEventListener("transitionend",s)}function a(r){r.preventDefault(),r.stopPropagation(),e.classList.add("s-hide"),e.addEventListener("transitionend",s,!1);var a=Array.prototype.map.call(t,(function(e){return e.dataset.expires}))[0];o&&(a>0?n.create(i,o,a):n.create(i,o,-3600))}this.destroy=function(){r(t,(function(e,t){t.removeEventListener("click",a)})),t=void 0,A17.Helpers.purgeProperties(this)},this.init=function(){var s;s=n.read(i)||"",o&&s===o?e.parentNode.removeChild(e):(e.classList.add("m-notification--header-loaded"),c(document,"notification:confirmed",{}),r(t,(function(e,t){t.addEventListener("click",a,!1)})))}},D=function(e){function i(e){e.preventDefault(),window.open(t.updateParameter(window.location.href,"print","true"),"AIC_printWindow")}this.destroy=function(){e.removeEventListener("click",i),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",i,!1)}},B=function(e){var t,i,n=document.getElementById("shareMenu"),o=!1,r=!1;function s(){m({element:n,target:e,position:"top left",padding:{top:12},breakpoints:{xsmall:!1,small:!1,medium:!0,large:!0,xlarge:!0}})}function a(){o&&setTimeout(s,100)}function l(){o&&(h(),p())}function u(e){t&&i&&("default"===e?(t.setAttribute("class",i),t.querySelector("use").setAttribute("xlink:href","#"+i)):(t.setAttribute("class","icon--close"),t.querySelector("use").setAttribute("xlink:href","#icon--close")))}function h(){o&&(document.documentElement.classList.remove("s-shareMenu-active"),r||c(document,"body:unlock"),n.removeAttribute("style"),c(document,"focus:untrap"),setTimeout((function(){d(e.parentNode)}),0),u("default"),e.classList.remove("s-active"),e.setAttribute("aria-label","Share page"),o=!1)}function p(t){t&&(t.preventDefault(),t.stopPropagation()),e.blur(),o?h():((r=document.documentElement.classList.contains("s-body-locked"))||c(document,"body:lock",{breakpoints:"xsmall small"}),window.requestAnimationFrame((function(){o=!0,e.classList.add("s-active"),u("active"),document.documentElement.classList.add("s-shareMenu-active"),s(),setTimeout((function(){d(n)}),0),c(document,"focus:trap",{element:n}),c(n,"shareMenu:opened",{url:e.getAttribute("data-share-url"),title:e.getAttribute("data-share-title")}),e.setAttribute("aria-label","Close share page menu")})))}function g(e){e.preventDefault(),e.stopPropagation(),function(e){o?h():p(e)}(e)}function f(e){o&&(e.preventDefault(),e.stopPropagation(),h())}function v(e){var t="INPUT"===e.target.tagName;o&&27===e.keyCode&&!t&&h()}this.destroy=function(){e.removeEventListener("click",g),document.removeEventListener("shareMenu:close",h),document.removeEventListener("click",f),window.removeEventListener("resized",a),document.removeEventListener("mediaQueryUpdated",l),window.removeEventListener("keyup",v),A17.Helpers.purgeProperties(this)},this.init=function(){t=e.querySelector("svg[class*=icon--]"),i=t?t.getAttribute("class"):null,e.addEventListener("click",g,!1),document.addEventListener("shareMenu:close",h,!1),document.addEventListener("click",f,!1),window.addEventListener("resized",a,!1),document.addEventListener("mediaQueryUpdated",l,!1),window.addEventListener("keyup",v,!1)}},F=function(e){var t,i,n,s=[],a="%0D%0A";function l(){return o(i)}function u(){return o(n)}function d(e){e.preventDefault(),e.stopPropagation();var n=e.target,o=e.target.getAttribute("data-shareMenu");e.target.blur(),"copy"===o?function(e,t){if(navigator.clipboard&&"Promise"in window&&"https:"==window.location.protocol)navigator.clipboard.writeText(e).then((function(){console.log(t)}),(function(e){console.error("Could not copy text: ",e)}));else{var i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.textContent=e,document.body.appendChild(i);var n=document.getSelection(),o=document.createRange();o.selectNode(i),n.removeAllRanges(),n.addRange(o);try{document.execCommand("copy")?window.alert(t||"Copied to clipboard"):console.log("Could not copy text")}catch(e){console.log("Could not copy text")}document.body.removeChild(i)}}(i,"Copied!"):r(s,(function(i,n){n.name===o&&function(e,i){i||(i={});var n=i.width||575,o=i.height||400,r=(window.outerWidth-n)/2,s="status=1,width="+n+",height="+o+",top="+(window.outerHeight-o)/2+",left="+r;t&&!t.closed&&t.close(),setTimeout((function(){(t=window.open(e,"AIC_Share",s)).opener=null}),250)}(e.target.href,n.windowOptions)}));var a=T(n);a&&c(document,"gtm:push",a),c(document,"shareMenu:close")}function h(t){i=window.location.href,n=document.title,t&&t.data&&(i=t.data.url||window.location.href,n=t.data.title||document.title),r(s,(function(t,i){var n=e.querySelector("[data-shareMenu="+i.name+"]");n&&(n.href=i.href(),n.setAttribute("target","_blank"))}))}this.destroy=function(){e.removeEventListener("click",d),e.removeEventListener("shareMenu:opened",h),A17.Helpers.purgeProperties(this)},this.init=function(){s.push({name:"facebook",href:function(){return"https://www.facebook.com/sharer/sharer.php?u="+l()},windowOptions:{}}),s.push({name:"twitter",href:function(){return"https://twitter.com/intent/tweet?url="+l()+"&text="+u()+(e.getAttribute("data-share-twitter-via")?"&via="+e.getAttribute("data-share-twitter-via"):"")},windowOptions:{height:253}}),s.push({name:"google",href:function(){return"https://plus.google.com/share?url="+l()},windowOptions:{width:515,height:505}}),s.push({name:"pinterest",href:function(){var e=document.getElementsByTagName("img")[0];return"http://pinterest.com/pin/create/button/?url="+l()+"&media="+o(e.getAttribute("data-pin-media")||e.getAttribute("src")||"")+"&description="+u()},windowOptions:{width:750,height:675}}),s.push({name:"email",href:function(){return"mailto:?Subject="+u()+"&Body="+o()+a+a+l()+a+a},windowOptions:{}}),e.addEventListener("click",d,!1),e.addEventListener("shareMenu:opened",h,!1),h()}},z=function(e){function t(t){t.preventDefault(),t.stopPropagation(),e.blur(),c(document,"shareMenu:close"),c(document,"selectDate:close"),c(document,"fullScreenImage:close"),c(document,"collectionSearch:close"),c(document,"collectionFilters:close"),c(document,"stickySidebar:close"),c(document,"infoButtonInfo:close"),c(document,"modal:close"),c(document,"roadblock:close"),c(document,"globalSearch:close"),c(document,"navMobile:close"),c(document,"dropdown:close")}this.destroy=function(){e.removeEventListener("touchend",t),e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("touchend",t,!1),e.addEventListener("click",t,!1)}},N=function(e){var t,i={},n=0,o=0,s=!1,a=!1,l=(e.className,e.getAttribute("data-pinboard-option-layout")),u=/([0-9])-col@(\w*)/gi;function d(e){for(var t;null!==(t=u.exec(e));)i[t[2]]=t[1]}function h(i){var s=e.children;if(0!==s.length){var l=e.firstElementChild,u=l.offsetWidth,d=(e.offsetWidth-u*n)/(n-1);l.classList.add("s-repositioning");var h,m,p=(h=l,m=window.getComputedStyle(h),parseInt(m.getPropertyValue("margin-top")));l.classList.remove("s-repositioning"),p="number"==typeof p?p:60,o=0,r(s,(function(n,r){if(!r.classList.contains("s-positioned")||i){var s,l,h;r.style.height="auto",a?(s=t[o],h=(l=o)*(u+d),o=o<t.length-1?o+1:0):(b=t,s=Math.min.apply(Math,b),h=(l=t.indexOf(s))*(u+d));var m=r.querySelector("img");if(m&&r.classList.contains("m-listing--variable-height")){var g=r.offsetWidth,f=Math.round(4*g/3),v=Math.round(parseInt(m.getAttribute("height"))/parseInt(m.getAttribute("width"))*g);m.parentNode.style.height=v>f?f+"px":v+"px"}var y=window.getComputedStyle(r),w=parseFloat(y.paddingTop)||0,S=parseFloat(y.paddingBottom)||0,E=r.offsetHeight+w+S+12;r.style.left=Math.round(h)+"px",r.style.top=Math.round(s)+"px",r.style.height=Math.round(E)+"px",setTimeout((function(){r.classList.add("s-positioned")}),250),t[l]=s+E+p,e.style.height=function(e){return Math.max.apply(Math,e)}(t)+"px",c(document,"page:updated")}var b}))}}function m(){if(n=i[A17.currentMediaQuery]){t=[];for(var o=0;o<n;o++)t.push(0);s=!0,h(!0)}else s&&(r(e.children,(function(e,t){t.style.left="",t.style.top="",t.style.height="",t.classList.remove("s-positioned")})),e.style.height=""),s=!1}function p(){h()}function g(){setTimeout((function(){d(document.documentElement.classList.contains("s-collection-filters-active")&&l?l:e.className),m()}),32)}function f(){b("medium+")&&setTimeout((function(){d(l),m()}),432)}function v(){b("medium+")&&setTimeout((function(){d(e.className),m()}),432)}this.destroy=function(){e.removeEventListener("pinboard:contentAdded",p),document.removeEventListener("resized",g),document.removeEventListener("ajaxPageLoad:complete",g),document.removeEventListener("collectionFilters:open",f),document.removeEventListener("collectionFilters:close",v),A17.Helpers.purgeProperties(this)},this.init=function(){a="true"===e.getAttribute("data-pinboard-maintain-order"),d(document.documentElement.classList.contains("s-collection-filters-active")&&l?l:e.className),setTimeout((function(){m()}),32),e.addEventListener("pinboard:contentAdded",p,!1),document.addEventListener("resized",g,!1),document.addEventListener("ajaxPageLoad:complete",g,!1),document.addEventListener("collectionFilters:open",f,!1),document.addEventListener("collectionFilters:close",v,!1)}},q=function(e){var i,n={},o=0,s=!1,a=Array.from(e.querySelectorAll(".o-gridboard__btn-random")),l=Array.from(e.querySelectorAll(".o-gridboard__btn-page")),u=/([0-9])-col@(\w*)/gi;function d(e){for(var t;null!==(t=u.exec(e));)n[t[2]]=t[1]}function h(t){var i=e.getElementsByClassName("o-gridboard")[0].children,n=Array.from(i).filter((function(e){return"none"!==window.getComputedStyle(e).display}));if(0!==n.length){var s=n[0];s.classList.add("s-repositioning");var a,l,u=(a=s,l=window.getComputedStyle(a),parseInt(l.getPropertyValue("margin-top")));u="number"==typeof u?u:60,s.classList.remove("s-repositioning");var d=s.offsetWidth,h=(e.getElementsByClassName("o-gridboard")[0].offsetWidth-d*o)/(o-1),m=[],p=[],g=0;r(n,(function(i,n){if(!n.classList.contains("s-positioned")||t){var r=i%o,s=Math.floor(i/o);s!==m.length&&(m.push(p),p=[],g=0),p.push(n);var a=0,l=0;0!==s&&(a=m[s-1][0].offsetTop,l=m[s-1].reduce((function(e,t){return Math.max(e,t.offsetHeight)}),0));var f=l+a+u,v=r*(d+h);n.style.position="absolute",n.style.left="".concat(Math.round(v),"px"),n.style.top="".concat(Math.round(f),"px"),g=Math.max(g,n.offsetHeight),e.getElementsByClassName("o-gridboard")[0].style.height=f+g+"px",setTimeout((function(){n.classList.add("s-positioned")}),250),c(document,"page:updated")}}))}}function m(){if(o=n[A17.currentMediaQuery]){i=[];for(var t=0;t<o;t++)i.push(0);s=!0,h(!0)}else s&&(r(e.getElementsByClassName("o-gridboard")[0].children,(function(e,t){t.style.left="",t.style.top="",t.style.height="",t.classList.remove("s-positioned")})),e.getElementsByClassName("o-gridboard")[0].style.height=""),s=!1}function p(){h()}function g(){setTimeout((function(){d(e.getElementsByClassName("o-gridboard")[0].className),m()}),32)}function f(t,i){var n=e.getElementsByClassName("o-gridboard")[0].children;if(0!==n.length){var o=i.split("");r(n,(function(e,t){"1"==o[e]?t.style.display="flex":t.style.display="none"})),setTimeout((function(){var e;m(),c(document,"page:updated"),c(document,"history:pushstate",{url:"?tag="+(e=t,e.replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map((function(e){return e.toLowerCase()})).join("-"))})}),32)}}function v(t){var i=e.getElementsByClassName("o-gridboard")[0].children;0!==i.length&&(r(i,(function(e,i){Math.floor(e/50)+1==t?i.style.display="flex":i.style.display="none"})),setTimeout((function(){m(),c(document,"page:updated",{page:t}),c(document,"history:pushstate",{url:"?page="+t})}),32))}this.destroy=function(){e.removeEventListener("gridboard:contentAdded",p),document.removeEventListener("resized",g),document.removeEventListener("ajaxPageLoad:complete",g),r(l,(function(e,t){t.removeEventListener("click",v.bind(this,t.innerText),!1)})),r(a,(function(e,t){t.removeEventListener("click",f.bind(this,t.innerText,t.getAttribute("data-hash")),!1)})),A17.Helpers.purgeProperties(this)},this.init=function(){!function(){d(e.getElementsByClassName("o-gridboard")[0].className);var i,n,o,s=(i="page",n=window.location.search,void 0!==(o=t.toObject(n||void 0))[i]?o[i]:void 0);s?v(s):setTimeout((function(){m()}),32),e.getElementsByClassName("o-gridboard")[0].addEventListener("gridboard:contentAdded",p,!1),document.addEventListener("resized",g,!1),document.addEventListener("ajaxPageLoad:complete",g,!1),r(a,(function(e,t){t.addEventListener("click",f.bind(this,t.innerText,t.getAttribute("data-hash")),!1)})),r(l,(function(e,t){t.addEventListener("click",v.bind(this,t.innerText),!1)}))}()}},j=function(e){var t,i=!1;function n(){if("small"!==A17.currentMediaQuery&&i){var o=e.getBoundingClientRect(),r=o.top+o.height;if(r-o.height-window.innerHeight<0&&r>0){var s=Math.round(100-r/(window.innerHeight+o.height)*100);t.style.transform="translate3D(0px, "+s+"px, 0px)"}}window.requestAnimationFrame(n)}this.destroy=function(){i=!1,A17.Helpers.purgeProperties(this)},this.init=function(){i=!0,t=e.querySelector("[data-parallax-img]"),window.requestAnimationFrame(n)}},W=function(e){var t=e.nextElementSibling,i=!1;function n(){i?(e.setAttribute("aria-expanded","false"),e.setAttribute("aria-selected","false"),t.setAttribute("aria-hidden","true"),i=!1):(e.setAttribute("aria-expanded","true"),e.setAttribute("aria-selected","true"),t.setAttribute("aria-hidden","false"),i=!0)}function o(){e.blur(),n()}function r(){t.blur(),n()}this.destroy=function(){e.removeEventListener("click",o),t.removeEventListener("click",r),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",o,!1),t.addEventListener("click",r,!1)}},U=function(e){var t={},i={},n=0;function o(){var r=t.hero.querySelector("img");r.removeEventListener("load",o),r.setAttribute("srcset",i[n].srcset),e.classList.remove("s-updating")}function s(s){r(t.thumbButtons,(function(e,t){e!==n?(i[e].active=!1,t.removeAttribute("disabled")):(i[e].active=!0,t.setAttribute("disabled","disabled"))})),r(t.share,(function(e,t){t.setAttribute("data-share-url",i[n].shareUrl),t.setAttribute("data-share-title",i[n].shareTitle)})),s||(e.classList.add("s-updating"),setTimeout((function(){var e,r=t.hero.querySelector("img");r.removeAttribute("srcset"),r.removeAttribute("data-srcset"),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.addEventListener("load",o,!1),r.src=i[n].src,r.width=i[n].width,r.height=i[n].height,r.alt=i[n].alt,e=document.createElement("span"),i[n].credit?(i[n].creditUrl&&((e=document.createElement("a")).href=i[n].creditUrl),e.innerHTML=i[n].credit||i[n].creditUrl):e.innerHTML="",e.className="m-article-header__img-credit f-caption",e.setAttribute("data-gallery-credit",""),t.credit.parentNode.replaceChild(e,t.credit),t.credit=e}),150))}function a(e){"BUTTON"===e.target.tagName&&(e.preventDefault(),n=function(e,t){for(var i=t||e.parentNode.childNodes,n=i.length,o=0,r=0;r<n;r++){if(i[r]===e)return o;1===i[r].nodeType&&o++}return-1}(e.target,t.thumbButtons),s(),c(document,"gtm:push",{event:"artwork-alternate-image",eventCategory:"in-page"}))}function l(e){var t=document.createElement("a");document.body.appendChild(t),t.download=i[n].downloadName,t.href=i[n].downloadUrl,t.setAttribute("target","_blank"),t.click(),document.body.removeChild(t),c(document,"gtm:push",{event:"artwork-download",eventCategory:"in-page"})}function u(e){e.preventDefault(),c(document,"fullScreenImage:open",{img:i[n]})}function d(){s(!0)}this.destroy=function(){t.thumbs.removeEventListener("click",a),t.download.removeEventListener("click",l),t.fullscreen.removeEventListener("click",u),document.removeEventListener("resized",d),t={},i={},A17.Helpers.purgeProperties(this)},this.init=function(){t.hero=e.querySelector("[data-gallery-hero]")||!1,t.credit=e.querySelector("[data-gallery-credit]")||!1,t.fullscreen=e.querySelectorAll("[data-gallery-fullscreen]")||!1,t.download=e.querySelectorAll("[data-gallery-download]")||!1,t.share=e.querySelectorAll("[data-gallery-share]")||!1,t.thumbs=e.querySelector("[data-gallery-thumbs]")||!1,t.thumbButtons=t.thumbs.querySelectorAll("button")||!1,r(t.thumbButtons,(function(e,t){var o=t.getAttribute("disabled");o&&(n=e),i[e]={src:t.getAttribute("data-gallery-img-src")||t.nextElementSibling.getAttribute("src")||"",srcset:t.getAttribute("data-gallery-img-srcset")||t.nextElementSibling.getAttribute("srcset")||"",width:t.getAttribute("data-gallery-img-width")||t.nextElementSibling.getAttribute("width")||"",height:t.getAttribute("data-gallery-img-height")||t.nextElementSibling.getAttribute("height")||"",credit:t.getAttribute("data-gallery-img-credit")||"",alt:t.getAttribute("data-gallery-img-alt")||t.nextElementSibling.getAttribute("alt")||"",creditUrl:t.getAttribute("data-gallery-img-credit-url")||"",shareUrl:t.getAttribute("data-gallery-img-share-url")||"",shareTitle:t.getAttribute("data-gallery-img-share-title")||"",downloadUrl:t.getAttribute("data-gallery-img-download-url")||"",downloadName:t.getAttribute("data-gallery-img-download-name")||"",iiifId:t.getAttribute("data-gallery-img-iiifId")||t.nextElementSibling.getAttribute("data-gallery-img-iiifId")||null,active:o},""!==i[e].shareUrl&&"#"!==i[e].shareUrl||(i[e].shareUrl=window.location.href),""===i[e].shareTitle&&(i[e].shareTitle=document.title),""!==i[e].downloadUrl&&"#"!==i[e].downloadUrl||(i[e].downloadUrl=i[e].srcset.split(" ")[0]),""===i[e].downloadName&&(i[e].downloadName="image")})),t.thumbs&&t.thumbs.addEventListener("click",a,!1),t.download&&r(t.download,(function(e,t){t.addEventListener("click",l,!1)})),t.fullscreen&&r(t.fullscreen,(function(e,t){t.addEventListener("click",u,!1)})),document.addEventListener("resized",d,!1),s(!0)}};var V=__webpack_require__(76990),G=__webpack_require__.n(V);const $=function(e){var t,i,n,o,r,s,a,l,u,h,m,p=null,g=!1,f=null,v=null,y=0,w=0,S=!1;function E(e){S=!0,T(),f.click(),S=!1}function b(e){S=!0,T(),v.click(),S=!1}function T(i){g&&(S||(c(document,"body:unlock"),c(document,"focus:untrap"),document.documentElement.classList.remove("s-fullscreenImage-active"),setTimeout((function(){d(document.getElementById("a17"))}),0),e.classList.remove("s-zoomable")),a.removeAttribute("width"),a.removeAttribute("height"),a.removeAttribute("srcset"),a.removeAttribute("sizes"),a.removeAttribute("src"),a.classList.remove("restrict"),a.removeEventListener("contextmenu",L),a.removeEventListener("mousedown",L),t&&(t.removeAllHandlers(),t.destroy(),t=null,l.innerHTML=""),p=null,g=!1)}function x(){0!==y&&0!==w||(a.removeEventListener("load",x),y=a.naturalWidth,w=a.naturalHeight),a.setAttribute("width",y),a.setAttribute("height",w),a.setAttribute("src",p.src),a.setAttribute("srcset",p.srcset),a.setAttribute("sizes","(min-width: 1280px) 1280px, (min-height: 1024px) 1280px, 100vw"),p.restrict&&(a.setAttribute("class","restrict"),a.addEventListener("contextmenu",L),a.addEventListener("mousedown",L)),window.picturefill&&window.picturefill(a)}function L(e){e.preventDefault()}function P(s){!g&&s&&s.data&&s.data.img&&(p=s.data.img,S||c(document,"body:lock",{breakpoints:"all"}),window.requestAnimationFrame((function(){var l,E;S||(document.documentElement.classList.add("s-fullscreenImage-active"),setTimeout((function(){d(e)}),0),c(document,"focus:trap",{element:e})),s.data.img.iiifId&&s.data.img.width&&s.data.img.height?(e.classList.add("s-zoomable"),y=parseInt(s.data.img.width),w=parseInt(s.data.img.height),E=(l=s.data.img.iiifId).includes("osd=imgix")?l:[{"@context":"http://iiif.io/api/image/2/context.json","@id":l,width:y,height:w,profile:["http://iiif.io/api/image/2/level2.json"],protocol:"http://iiif.io/api/image",tiles:[{scaleFactors:[1,2,4,8,16],width:256}]}],(t=G()({id:"openseadragon",prefixUrl:location.protocol+"//openseadragon.github.io/openseadragon/images/",springStiffness:15,visibilityRatio:1,zoomPerClick:1.3,constrainDuringPan:!0,animationTime:1.5,minZoomLevel:0,maxZoomPixelRatio:1,gestureSettingsMouse:{scrollToZoom:!0},zoomInButton:"osd_zoomInButton",zoomOutButton:"osd_zoomOutButton",showZoomControl:!0,showHomeControl:!0,showFullPageControl:!1,showRotationControl:!1,showSequenceControl:!1,tileSources:E})).addHandler("zoom",(function(e){e.zoom<=t.viewport.getMinZoom()?(o.disabled=!1,r.disabled=!0):e.zoom>=t.viewport.getMaxZoom()?(o.disabled=!0,r.disabled=!1,c(document,"gtm:push",{event:"artwork-terminal-zoom",eventCategory:"in-page"})):(o.disabled=!1,r.disabled=!1,c(document,"gtm:push",{event:"artwork-zoom",eventCategory:"in-page"}))}))):(e.classList.remove("s-zoomable"),"auto"!==s.data.img.width&&"auto"!==s.data.img.height?(y=parseInt(s.data.img.width),w=parseInt(s.data.img.height),x()):(y=0,w=0,a.addEventListener("load",x,!1),a.setAttribute("srcset",p.srcset))),p.credit?(m.innerHTML=p.credit,m.setAttribute("style",""),h.setAttribute("style","")):(m.innerHTML="",m.setAttribute("style","display: none"),h.setAttribute("style","display: none")),p.infoUrl&&!p.enableNavigation?(u.setAttribute("href",p.infoUrl),u.setAttribute("style","")):(u.setAttribute("href","javascript:;"),u.setAttribute("style","display: none")),p.enableNavigation?(i.setAttribute("style",""),n.setAttribute("style","")):(i.setAttribute("style","display: none"),n.setAttribute("style","display: none")),p.prevItem?(f=p.prevItem,i.disabled=!1):(f=null,i.disabled=!0),p.nextItem?(v=p.nextItem,n.disabled=!1):(v=null,n.disabled=!0),g=!0})))}function _(e){g&&27===e.keyCode&&c(document,"fullScreenImage:close")}this.destroy=function(){i.removeEventListener("click",E),n.removeEventListener("click",b),s.removeEventListener("click",T),document.removeEventListener("fullScreenImage:open",P),document.removeEventListener("fullScreenImage:close",T),window.removeEventListener("keyup",_),A17.Helpers.purgeProperties(this),S=!1},this.init=function(){a=e.querySelector(".o-fullscreen-image__img"),l=e.querySelector(".o-fullscreen-image__osd"),i=e.querySelector("[data-fullscreen-prev]"),n=e.querySelector("[data-fullscreen-next]"),o=e.querySelector("[data-fullscreen-zoom-in]"),r=e.querySelector("[data-fullscreen-zoom-out]"),s=e.querySelector("[data-fullscreen-close]"),u=e.querySelector(".o-fullscreen-image__info-link"),h=e.querySelector(".m-info-trigger"),m=e.querySelector(".m-info-trigger__info"),i.addEventListener("click",E,!1),n.addEventListener("click",b,!1),s.addEventListener("click",T,!1),document.addEventListener("fullScreenImage:open",P,!1),document.addEventListener("fullScreenImage:close",T,!1),window.addEventListener("keyup",_,!1),S=!1}},Z=function(e){var t=e.previousElementSibling,i="s-capped";function n(n){n.preventDefault(),t.classList.contains(i)?(t.classList.remove(i),e.querySelector("span").textContent="Show Less"):(t.classList.add(i),e.querySelector("span").textContent="Show More"),e.blur()}this.destroy=function(){e.removeEventListener("click",n),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",n,!1)}},X=function(e){var t,n=e.querySelector("input"),o=e.getAttribute("data-filter-whittle-down-url"),r=e.nextElementSibling;function s(){e.classList.remove("s-loading")}function a(){clearTimeout(t),e.classList.add("s-loading"),t=setTimeout((function(){""===n.value?e.classList.remove("s-whittling"):e.classList.add("s-whittling"),i({url:o,data:{categoryQuery:n.value},type:"GET",requestHeaders:[{header:"Content-Type",value:"application/x-www-form-urlencoded; charset=UTF-8"}],onSuccess:function(e){try{var t=JSON.parse(e);r.innerHTML=t.html}catch(e){console.error("Error updating filters: "+e)}s()},onError:function(e){console.error("Error: "+e),s()}})}),250)}this.destroy=function(){n.removeEventListener("input",a),e.removeEventListener("submit",a),A17.Helpers.purgeProperties(this)},this.init=function(){n.addEventListener("input",a,!1),e.addEventListener("submit",a,!1)}},Y=function(e){function t(t){t.preventDefault(),c(document,"stickySidebar:toggle"),e.blur()}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},Q=function(e){function t(t){t.preventDefault(),c(document,"stickySidebar:close"),e.blur()}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},K=function(e){var t=e.querySelectorAll("[data-nav-trigger]"),i=e.querySelectorAll("[data-nav-back]"),n="s-nav-mobile-active",o="js-subnav-open",s="nav-is-open",a=0,l=!1;function u(t){c(document,"body:lock",{breakpoints:"all"}),window.requestAnimationFrame((function(){document.documentElement.classList.add(n),setTimeout((function(){d(e)}),0),c(document,"focus:trap",{element:e})})),l=!0}function h(e){c(document,"body:unlock"),c(document,"focus:untrap"),document.documentElement.classList.remove(n),setTimeout((function(){d(document.getElementById("a17"))}),0),l=!1}function m(e){this.parentElement.classList.toggle(s),a++,g(),e.preventDefault(),e.stopPropagation()}function p(e){this.closest(".details").previousElementSibling.classList.remove(s),a--,g(),e.preventDefault(),e.stopPropagation()}function g(){a>0?e.classList.add(o):e.classList.remove(o)}function f(){l&&mediaQuery("small+")&&(c(document,"navMobile:close"),setTimeout((function(){window.scrollTo(0,0)}),5))}this.destroy=function(){document.removeEventListener("navMobile:open",u),document.removeEventListener("navMobile:close",h),document.removeEventListener("mediaQueryUpdated",f),r(t,(function(e,t){t.removeEventListener("click",m)})),r(i,(function(e,t){t.removeEventListener("click",p)})),A17.Helpers.purgeProperties(this)},this.init=function(){document.addEventListener("navMobile:open",u,!1),document.addEventListener("navMobile:close",h,!1),document.addEventListener("mediaQueryUpdated",f,!1),r(t,(function(e,t){t.addEventListener("click",m,!1)})),r(i,(function(e,t){t.addEventListener("click",p,!1)}))}},J=function(e){function t(e){e.preventDefault(),e.stopPropagation(),c(document,"navMobile:open")}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},ee=function(e){function t(e){e.preventDefault(),e.stopPropagation(),c(document,"navMobile:close")}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},te=function(e){var t=e.nextElementSibling||e.nextSibling,i=!1,n=e.getAttribute("data-breakpoints")||"all";function o(){m({element:t,target:e,position:"top left",padding:{top:104,left:-76},breakpoints:{xsmall:n.includes("xsmall")||n.includes("all"),small:n.includes("small")||n.includes("all"),medium:n.includes("medium")||n.includes("all"),large:n.includes("large")||n.includes("all"),xlarge:n.includes("xlarge")||n.includes("all")}})}function r(){i&&setTimeout(o,100)}function s(){i&&(e.setAttribute("aria-expanded","false"),document.documentElement.classList.remove("s-infoButtonInfo-active"),t.removeAttribute("style"),c(document,"focus:untrap"),setTimeout((function(){d(e.parentNode)}),0),t.classList.add("s-hidden"),i=!1)}function a(n){n.preventDefault(),n.stopPropagation(),function(n){i?s():function(n){n.preventDefault(),n.stopPropagation(),e.blur(),i?s():(e.setAttribute("aria-expanded","true"),document.documentElement.classList.add("s-infoButtonInfo-active"),o(),setTimeout((function(){d(t)}),0),c(document,"focus:trap",{element:t}),t.classList.remove("s-hidden"),i=!0)}(n)}(n),e.blur()}function l(e){i&&!t.contains(document.activeElement)&&(e.preventDefault(),e.stopPropagation(),s())}function u(e){var t="INPUT"===e.target.tagName;i&&27===e.keyCode&&!t&&s()}this.destroy=function(){e.removeEventListener("click",a),document.removeEventListener("infoButtonInfo:close",s),document.removeEventListener("click",l),window.removeEventListener("resized",r),window.removeEventListener("keyup",u),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",a,!1),document.addEventListener("infoButtonInfo:close",s,!1),document.addEventListener("click",l,!1),window.addEventListener("resized",r,!1),window.addEventListener("keyup",u,!1)}},ie=function(e){function t(){var t=e.className.indexOf("tabs")>0,i=e.querySelector("[data-links-bar-primary]"),n=e.querySelector("[data-links-bar-primary-overflow]"),o=n.querySelector("[data-dropdown-list]");if(i&&n){var s=0,a=[],l=0,c=!1;e.classList.remove("s-overflowing"),n.classList.add("s-hidden"),i.classList.add("s-measuring"),r(i.children,(function(e,t){t!==n&&t.classList.remove("s-hidden")})),r(o.children,(function(e,t){t.classList.add("s-hidden")})),s=i.offsetWidth-20,r(i.children,(function(e,t){if(t!==n){var i=t.offsetWidth+20;l+=i,a.push(i),l>s&&(c=!0)}})),c&&(n.classList.remove("s-hidden"),t?(r(i.children,(function(e,t){t!==n&&t.classList.add("s-hidden")})),r(o.children,(function(e,t){t.classList.remove("s-hidden")}))):(s-=n.offsetWidth,l=0,r(a,(function(e,t){(l+=t)>s&&(i.children[e].classList.add("s-hidden"),o.children[e].classList.remove("s-hidden"))}))),e.classList.add("s-overflowing")),i.classList.remove("s-measuring")}}this.destroy=function(){document.removeEventListener("touchend",t),A17.Helpers.purgeProperties(this)},this.init=function(){document.addEventListener("resized",t,!1),t()}},ne=function(e){var i=e.querySelector('input[type="search"]'),n=e.querySelector("form");function o(e){e.preventDefault();var o,r=(o=i.value,encodeURIComponent(o).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)})));r.length>0&&(c(document,"navMobile:close"),c(document,"ajax:getPage",{url:t.updateParameter(n.action,"q",r)}))}this.destroy=function(){n.removeEventListener("submit",o),A17.Helpers.purgeProperties(this)},this.init=function(){n.addEventListener("submit",o,!1)}},oe=function(e){var n,o,r=e.getAttribute("data-autocomplete-url"),s=e.querySelector('input[type="search"]'),a=e.querySelector("form"),l="s-search-active",u="s-search-active--autocomplete",h="s-loading",m=!1,p="",g=0;function f(){e.classList.remove(h)}function v(){n&&(e.querySelector("[data-search-inner]").removeChild(n),n=null)}function y(){document.documentElement.classList.contains(u)&&document.documentElement.classList.remove(u),v()}function w(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}function S(){c(document,"body:lock",{breakpoints:"all"}),window.requestAnimationFrame((function(){document.documentElement.classList.add(l),setTimeout((function(){d(e)}),0),c(document,"focus:trap",{element:e}),setTimeout((function(){s.focus()}),250)})),m=!0}function E(){m=!1,clearTimeout(o),y(),c(document,"body:unlock"),c(document,"focus:untrap"),document.documentElement.classList.remove(l),s.value=""}function b(e){m&&27===e.keyCode&&c(document,"globalSearch:close")}function x(){m&&"xsmall"!==A17.currentMediaQuery&&c(document,"globalSearch:close")}function L(i){i.preventDefault();var n=w(s.value);if(m&&n.length>0){var o=T(e);o&&(o.event=w(s.value),c(document,"gtm:push",o)),c(document,"globalSearch:close"),c(document,"ajax:getPage",{url:t.updateParameter(a.action,"q",n)})}}function P(){m&&((p=s.value).length>=3?function(){clearTimeout(o);var l=Date.now();l>g&&(g=l,e.classList.add(h),o=setTimeout((function(){i({url:r,type:"GET",data:{q:s.value},requestHeaders:[{header:"Content-Type",value:"application/x-www-form-urlencoded; charset=UTF-8"}],onSuccess:function(i){v();try{!function(t,i){if(i===g){var o=(new DOMParser).parseFromString(t,"text/html");(n=o.querySelector("[data-autocomplete-list]"))&&(e.querySelector("[data-search-inner]").appendChild(n),requestAnimationFrame((function(){document.documentElement.classList.contains(u)||document.documentElement.classList.add(u)})),c(document,"page:updated"))}}(i,g,s.value)}catch(e){console.error("Error updating autocomplete: "+e),c(document,"globalSearch:close"),c(document,"ajax:getPage",{url:t.updateParameter(a.action,"q",w(s.value))})}f()},onError:function(e){f(),c(document,"globalSearch:close"),c(document,"ajax:getPage",{url:t.updateParameter(a.action,"q",w(s.value))})}})}),250))}():0===p.length&&y())}this.destroy=function(){s.removeEventListener("input",P),s.removeEventListener("propertychange",P),a.removeEventListener("submit",L),document.removeEventListener("globalSearch:open",S),document.removeEventListener("globalSearch:close",E),window.removeEventListener("keyup",b),window.removeEventListener("resized",x),A17.Helpers.purgeProperties(this)},this.init=function(){a.addEventListener("submit",L,!1),document.addEventListener("globalSearch:open",S,!1),document.addEventListener("globalSearch:close",E,!1),window.addEventListener("keyup",b,!1),window.addEventListener("resized",x,!1),r&&""!==r&&(s.addEventListener("input",P,!1),s.addEventListener("propertychange",P,!1))}},re=function(e){function t(t){t.preventDefault(),c(document,"globalSearch:open"),e.blur()}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},se=function(e){function t(t){t.preventDefault(),c(document,"globalSearch:close"),e.blur()}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}};function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}const le=function(e){var i=e.getAttribute("data-autocomplete-url");if(i&&""!==i){var n,o,r=e.querySelector('input[type="text"]'),s=e.querySelector("[data-autocomplete-clear]"),a="s-loading",l="s-autocomplete-active",u=!1,d="";this.destroy=function(){r.removeEventListener("input",y),r.removeEventListener("propertychange",y),e.removeEventListener("submit",v),s.removeEventListener("click",S),document.removeEventListener("click",E),document.removeEventListener("touchstart",b),window.removeEventListener("keyup",x),A17.Helpers.purgeProperties(this)},this.init=function(){r.addEventListener("input",y,!1),r.addEventListener("propertychange",y,!1),e.addEventListener("submit",v,!1),s.addEventListener("click",S,!1),document.addEventListener("click",E,!1),document.addEventListener("touchstart",b,!1),window.addEventListener("keyup",x,!1),""!==r.value&&e.classList.add(l)}}function h(){e.classList.remove(a)}function m(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}function p(e){return m(e.replace(/<(?:.|\n)*?>/gm,"").replace(/"|'/gm,"")).replace(/%20/gm,"-").toLowerCase()}function g(){f(),r.focus()}function f(){e.classList.remove(l),n&&(e.removeChild(n),n=null),u=!1}function v(i){i.preventDefault();var n=T(e);n&&(n.event=m(r.value),c(document,"gtm:push",n)),c(document,"ajax:getPage",{url:t.updateParameter(e.action,"q",m(r.value))})}function y(){(d=r.value).length>=3?(clearTimeout(o),e.classList.add(a),o=setTimeout((function(){var t="?"+function(e){var t,i=[],n=function(e,t,i){var o,r=[];if(!0===t?t="1":!1===t&&(t="0"),null!==t){if("object"===ae(t)){for(o in t)null!==t[o]&&r.push(n(e+"["+o+"]",t[o],i));return r.join(i)}if("function"!=typeof t)return w(e)+"="+w(t);throw new Error("There was an error processing for http_build_query().")}return""};for(t in e){var o=n(t,e[t],"&");""!==o&&i.push(o)}return i.join("&")}([{fuzzy:!1,q:r.value,resources:["artworks"],contexts:["accession"]},{q:r.value,resources:["artworks"],contexts:["title"]},{q:r.value,resources:["artists","category-terms"],contexts:["title"]}]),o=new XMLHttpRequest;o.open("get",i+t,!0),o.onload=function(){if(o.status>=200&&o.status<400){g();try{!function(t){var i=JSON.parse(t),o=i[0],s=i[1],a=i[2],c="";if(!(o.length<1&&s.length<1&&a.length<1)){(n=document.createElement("ul")).className="m-search-bar__autocomplete f-secondary",n.setAttribute("data-autocomplete-list","");var d=function(e,t){for(var i="",n=0;n<Math.min(t,e.length);n++){var o=e[n].title,r=encodeURIComponent(o).replace(/%20/g,"+"),s=null;switch(e[n].api_model){case"agents":s={query:"artist_ids="+r,title:'by "<b>'+o+'</b>"'};break;case"artworks":s={path:"/artworks/"+e[n].id,title:'see "<b>'+o+'</b>" ('+e[n].main_reference_number+")"};break;case"category-terms":switch(e[n].subtype){case"classification":s={query:"classification_ids="+r,title:'classified as "<b>'+o+'</b>"'};break;case"material":s={query:"material_ids="+r,title:'made of "<b>'+o+'</b>"'};break;case"technique":s={query:"technique_ids="+e[n].id,title:'made via "<b>'+o+'</b>"'};break;case"style":s={query:"style_ids="+r,title:'in the style of "<b>'+o+'</b>"'};break;case"subject":s={query:"subject_ids="+r,title:'about "<b>'+o+'</b>"'};break;case"department":s={query:"department_ids="+r,title:'in the department "<b>'+o+'</b>"'};break;case"theme":s={query:"theme_ids="+e[n].id,title:'related to "<b>'+o+'</b>"'}}}if(s){var a="/collection?"+s.query;s.path&&(a=s.path),i+='<li><a href="'+a+'" data-ajax-scroll-target="collection" data-gtm-event="'+p(s.title)+'" data-gtm-action="discover-art-artists" data-gtm-event-category="collection-filter">'+s.title+"</a></li>\n"}}return i};c+=d(o,1),c+=d(s,1),c+=d(a,5),c+='<li><a href="/collection?q='+p(r.value)+'" data-ajax-scroll-target="collection" data-gtm-event="'+m(r.value)+'" data-gtm-action="discover-art-artists" data-gtm-event-category="collection-filter" class="suggestion--fulltext"><svg class="icon--search--24"><use xlink:href="#icon--search--24" /></svg><span>Search for "'+r.value+'"</span></a></li>\n',n.innerHTML=c,e.appendChild(n),e.classList.add(l),u=!0}}(o.responseText)}catch(e){console.error("Error updating autocomplete: "+e)}h()}else console.error("Autocomplete error:",o.responseText,o.status),h()},o.onerror=function(){console.error("Autocomplete error:",o.responseText,o.status),h()},o.send()}),250)):0==d.length&&f()}function w(e){return encodeURIComponent(e).replace(/[!'()]/g,"").replace(/\*/g,"%2A").replace(/%2B/gi,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S(e){e&&(e.preventDefault(),e.stopPropagation()),g(),r.value=""}function E(t){u&&document.activeElement!==e&&!e.contains(document.activeElement)&&(t.preventDefault(),t.stopPropagation(),f())}function b(t){u&&t.target!==e&&!e.contains(t.target)&&(t.preventDefault(),t.stopPropagation(),f())}function x(e){u&&27===e.keyCode&&f()}},ce=function(e){var t=null;function n(){e.classList.remove("s-loading"),e.removeAttribute("disabled")}function o(){t&&(e.removeChild(t),t=null),e.classList.remove("s-success"),e.classList.remove("s-error")}function r(i,n){o(),(t=document.createElement("em")).className="m-aside-newsletter__msg f-buttons","success"===i?(t.className+=" m-aside-newsletter__msg--success",t.textContent=n||"Successfully signed up to the newsletter",e.classList.add("s-success")):"error"===i&&(t.className+=" m-aside-newsletter__msg--error",t.textContent=n||"Error signing up to the newsletter",e.classList.add("s-error")),e.appendChild(t)}function s(t){t.preventDefault(),t.stopPropagation(),o(),e.classList.add("s-loading"),e.setAttribute("disabled","disabled");var s=l(e);i({url:e.action||"/subscribe",type:"POST",requestHeaders:[{header:"Content-Type",value:"application/x-www-form-urlencoded; charset=UTF-8"},{header:"X-CSRF-Token",value:document.querySelector("meta[name=csrf-token]").getAttribute("content")||""}],data:s,onSuccess:function(t){try{t=JSON.parse(t),e.classList.remove("s-loading"),e.setAttribute("disabled","disabled"),e.querySelector("input[name=email]").value="",r("success",t.message||t.email),c(document,"gtm:push",{event:"sign-up",eventCategory:"subscribe"})}catch(e){console.error("Error submitting newsletter sign up (a)"),console.log(e,t),r("error")}n()},onError:function(e){try{r("error",(e=JSON.parse(e)).message||e.email)}catch(t){console.error("Error submitting newsletter sign up (b)"),console.log(e,t),r("error")}n()}})}function a(e){var t=e.firstElementChild.offsetHeight;e.style.height=t+"px"}function u(){this.removeAttribute("style"),this.removeEventListener("transitionend",u),c(document,"page:updated")}function h(t){var i=e.querySelector(".m-aside-newsletter__btn--list"),n=e.querySelector(".m-aside-newsletter__list-wrapper");"true"===n.getAttribute("aria-hidden")?(n.style.height=0,n.style.overflow="hidden",n.setAttribute("aria-hidden","false"),setTimeout((function(){setTimeout((function(){d(n)}),0)}),0),a(n),i.classList.add("m-aside-newsletter__btn--list--opened")):(a(n),n.setAttribute("aria-hidden","true"),n.offsetHeight,n.style.height=0,n.style.overflow="hidden",i.classList.remove("m-aside-newsletter__btn--list--opened")),n.addEventListener("transitionend",u,!1)}this.destroy=function(){e.removeEventListener("submit",s),A17.Helpers.purgeProperties(this)},this.init=function(){!function(){e.addEventListener("submit",s,!1);var t=e.querySelector(".m-aside-newsletter__btn--list");t&&t.addEventListener("click",h,!1)}()}},ue=function(e){function t(t){t.preventDefault(),t.stopPropagation();var i=e.getAttribute("data-gallery-img-width")||e.parentNode.querySelector("img").getAttribute("width"),n=e.getAttribute("data-gallery-img-height")||e.parentNode.querySelector("img").getAttribute("height");if("number"!=typeof i||i<200){var o=e.parentNode.querySelector("img").naturalWidth;"number"==typeof o&&o>i&&(i=o)}if("number"!=typeof n||n<200){var r=e.parentNode.querySelector("img").naturalHeight;"number"==typeof r&&r>n&&(n=r)}var s=null,a=null,l=!1;if("true"===e.getAttribute("data-modal-advanced")){var u=e.closest(".o-gallery");if(u){var d=u.querySelectorAll('[data-behavior*="openImageFullScreen"]'),h=Array.prototype.indexOf.call(d,e);s=d[h-1]||null,a=d[h+1]||null,(s||a)&&(l=!0)}}var m={src:e.getAttribute("data-gallery-img-src")||e.parentNode.querySelector("img").src,srcset:e.getAttribute("data-gallery-img-srcset")||e.parentNode.querySelector("img").getAttribute("srcset")||e.parentNode.querySelector("img").getAttribute("data-srcset"),width:i,height:n,credit:e.getAttribute("data-gallery-img-credit")||e.getAttribute("data-credit"),creditUrl:e.getAttribute("data-gallery-img-credit-url")||"",shareUrl:e.getAttribute("data-gallery-img-share-url")||"",shareTitle:e.getAttribute("data-gallery-img-share-title")||"",downloadUrl:e.getAttribute("data-gallery-img-download-url")||"",downloadName:e.getAttribute("data-gallery-img-download-name")||"",iiifId:e.getAttribute("data-gallery-img-iiifId")||e.parentNode.querySelector("img").getAttribute("data-iiifId"),infoUrl:e.parentNode.querySelector("img").getAttribute("data-infourl")||"",restrict:e.getAttribute("data-restrict")||"",enableNavigation:l,prevItem:s,nextItem:a};c(document,"fullScreenImage:open",{img:m})}function i(e){13==e.keyCode&&t(e)}this.destroy=function(){e.removeEventListener("click",t),e.removeEventListener("keyup",i),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1),e.addEventListener("keyup",i,!1)}},de=function(e){var t,i,n,o=!1;function r(){var t="clip-path: inset(top right bottom left);",o=e.getBoundingClientRect(),r=n.getBoundingClientRect();0===r.width&&0===r.height?i.setAttribute("style","clip-path: none; -webkit-clip-path: none; display: none;"):(t=(t=(t=(t=t.replace(/left/gi,Math.round(Math.abs(r.left-o.left))+"px")).replace(/top/gi,Math.round(Math.abs(r.top-o.top))+"px")).replace(/right/gi,Math.round(Math.abs(r.right-o.right))+"px")).replace(/bottom/gi,Math.round(Math.abs(r.bottom-o.bottom))+"px"),i.setAttribute("style",t+" -webkit-"+t))}this.destroy=function(){window.removeEventListener("resized",r),A17.Helpers.purgeProperties(this)},this.init=function(){var s;(function(){var e;(e=document.createElement("div")).style.cssText="-webkit-filter: blur(2px); filter: blur(2px);";var t=0!=e.style.length,i=void 0===document.documentMode||document.documentMode>9,n=t&&i;e=null,(e=document.createElement("div")).style.cssText="-webkit-clip-path: inset(1px 2px 3px 4px); clip-path: inset(1px 2px 3px 4px);";var r=0!=e.style.length;e=null,(e=document.createElement("div")).style.cssText="-webkit-backdrop-filter: blur(2px); backdrop-filter: blur(2px);";var s=0!=e.style.length;(s||!n||r)&&(o=!1),!o&&!s&&n&&r&&(o=!0)})(),o&&(t=e.querySelector("[data-blur-img]"),(n=e.querySelector("[data-blur-clip-to]"))&&t&&(s=t.outerHTML.replace("data-blur-img","data-blur-img-dupe"),t.insertAdjacentHTML("afterend",s),i=e.querySelector("[data-blur-img-dupe]"),r(),window.addEventListener("resized",r,!1)))}},he=function(e){var t,n=e.getAttribute("data-load-more-url"),o=e.getAttribute("data-load-more-target"),r=e.getAttribute("data-load-more-limit-text"),s=document.querySelector(o),a=1,l="s-loading",u="s-hidden",d=20;function h(){e.classList.remove(l)}function m(o){o.preventDefault(),o.stopPropagation(),a++,clearTimeout(t),e.classList.add(l),t=setTimeout((function(){i({url:n,data:{page:a},type:"GET",requestHeaders:[{header:"Content-Type",value:"application/x-www-form-urlencoded; charset=UTF-8"}],onSuccess:function(t){try{var i=JSON.parse(t);s.innerHTML+=i.html,i.page||e.classList.add(u),s.classList.contains("o-pinboard")?c(s,"pinboard:contentAdded"):c(document,"page:updated")}catch(e){console.error("Error updating autocomplete: "+e)}h(),a>=d&&function(){e.classList.add(u);var t=document.createElement("h2");t.setAttribute("class","title f-list-3"),t.textContent="Sorry, we limit the results for any query after 20 pages.",e.parentNode.appendChild(t);var i=document.createElement("p");i.setAttribute("class","f-caption"),i.textContent="Try using our filters to refine your search."+(r?" "+r:""),e.parentNode.appendChild(i)}()},onError:function(e){console.error("Error: "+e),h()}})}),250)}this.destroy=function(){e.removeEventListener("click",m),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",m,!1)}},me=function(e){function t(t){t.preventDefault(),t.stopPropagation(),c(document,"ajax:getPage",{url:e.getAttribute("data-href")||e.getAttribute("href")||"#"})}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},pe=function(e){function t(t){var i=e.querySelector("textarea");if(i||(i=e.parentNode.querySelector("textarea")),i){var n=i.value;n&&(t.preventDefault(),t.stopPropagation(),c(document,"modal:open",{type:"media",restricted:"true"==e.parentNode.dataset.restricted,module3d:"module3d"==e.parentNode.dataset.type,module360:"module360"==e.parentNode.dataset.type,moduleMirador:"moduleMirador"==e.parentNode.dataset.type,embedCode:n,subtype:e.getAttribute("data-subtype")||null}),"module3d"==e.parentNode.dataset.type&&e.dataset.title?c(document,"gtm:push",{event:"3D-open-modal",eventCategory:"in-page",eventAction:e.dataset.title+" - Modal 3D"}):"module360"==e.parentNode.dataset.type&&e.dataset.title?c(document,"gtm:push",{event:"360-open-modal",eventCategory:"in-page",eventAction:e.dataset.title+" - Modal 360"}):"moduleMirador"==e.parentNode.dataset.type&&e.dataset.title?c(document,"gtm:push",{event:"mirador-open-modal",eventCategory:"in-page",eventAction:e.dataset.title+" - Modal Mirador"}):c(document,"gtm:push",{event:e.parentNode.dataset.gtmEvent||e.parentNode.dataset.type+"-open-modal",eventCategory:e.parentNode.dataset.gtmEventCategory||"in-page",eventAction:e.parentNode.dataset.gtmEventAction||e.parentNode.dataset.title+" - "+e.parentNode.dataset.type}))}}function i(e){13==e.keyCode&&t(e)}this.destroy=function(){e.removeEventListener("click",t),e.removeEventListener("keyup",i),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1),e.addEventListener("keyup",i,!1)}},ge=function(e){var i,n,o,r=e.dataset.platform;function s(o){o.preventDefault(),o.stopPropagation(),e.removeEventListener("click",s),e.removeEventListener("keyup",a),n=t.updateParameter(n,"autoplay","vimeo"==r?"true":"1"),n=t.updateParameter(n,"auto_play","vimeo"==r?"true":"1"),i.src=n,e.classList.add("s-inline-media-activated")}function a(e){13==e.keyCode&&s(e)}this.destroy=function(){e.removeEventListener("click",s),e.removeEventListener("keyup",a),A17.Helpers.purgeProperties(this)},this.init=function(){(i=e.querySelector("iframe"))&&(n=i.getAttribute("data-embed-src"),o="data-embed-src",""!==n&&n||(n=i.getAttribute("data-src"),o="data-src"),""!==n&&n||(n=i.getAttribute("src"),o="src"),""!==n&&n&&(n.indexOf("youtube.com")>-1&&(n=t.updateParameter(n,"enablejsapi","vimeo"==r?"true":"1"),n=t.updateParameter(n,"origin",window.location.origin),"data-src"===o&&i.setAttribute("data-src",n),"src"===o?(i.src=n,x(i)):i.addEventListener("load",(function(){x(i)}),!1)),"data-src"!==o?(e.addEventListener("click",s,!1),e.addEventListener("keyup",a,!1)):e.classList.add("s-inline-media-activated")))}},fe=function(e){function t(e){e.preventDefault(),e.stopPropagation(),c(document,"roadblock:close")}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},ve=function(e){function t(e){e.preventDefault(),e.stopPropagation(),c(document,"modal:close")}this.destroy=function(){e.removeEventListener("click",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",t,!1)}},ye=function(e){var t,i="default",n=0,o=0,r=0,s=document.documentElement,l=e.getAttribute("data-stickyElement-breakpoints")||"all",c=!0;function u(){s.classList.remove("s-sticky-filters--fixed"),s.classList.remove("s-sticky-filters--bottom"),i="default"}function d(){if(b(l)&&!c){var e=document.documentElement.scrollTop||document.body.scrollTop;e>=o&&"bottom"!==i?(s.classList.remove("s-sticky-filters--fixed"),s.classList.add("s-sticky-filters--bottom"),i="bottom"):e>=n&&e<o&&"fixed"!==i?(s.classList.add("s-sticky-filters--fixed"),s.classList.remove("s-sticky-filters--bottom"),i="fixed"):e<n&&"default"!==i&&u()}cancelAnimationFrame(t),t=window.requestAnimationFrame(d)}function h(){u(),c=!0,window.requestAnimationFrame((function(){if(b(l)){var t=a(e);n=Math.round(t.top)-r,o=n+Math.round(t.height),c=!1}}))}function m(){window.requestAnimationFrame((function(){h(),cancelAnimationFrame(t),t=window.requestAnimationFrame(d)}))}this.destroy=function(){u(),cancelAnimationFrame(t),window.removeEventListener("load",h),window.removeEventListener("resized",h),window.removeEventListener("mediaQueryUpdated",h),document.removeEventListener("fonts:loaded",h),document.removeEventListener("page:updated",m),A17.Helpers.purgeProperties(this)},this.init=function(){window.addEventListener("load",h,!1),window.addEventListener("resized",h,!1),window.addEventListener("mediaQueryUpdated",h,!1),document.addEventListener("fonts:loaded",h,!1),document.addEventListener("page:updated",m,!1),h(),cancelAnimationFrame(t),t=window.requestAnimationFrame(d)}},we=function(e){var t=e.getAttribute("data-injectContent-url");this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){var n;t&&(n=(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):"",i({url:t,type:"GET",requestHeaders:[{header:"X-CSRF-Token",value:n}],onSuccess:function(t){try{i=JSON.parse(t).html,e.innerHTML=i,c(document,"page:updated"),window.picturefill&&window.picturefill()}catch(e){console.log(e)}var i},onError:function(e){console.log(e)}}))}},Se=function(e){var t=e.href;function n(e){e.preventDefault(),e.stopPropagation();var n=document.querySelector('meta[name="csrf-token"]');n=n?n.getAttribute("content"):"",c(document,"loader:start"),i({url:t,type:"GET",requestHeaders:[{header:"X-CSRF-Token",value:n}],onSuccess:function(e){var t="complete";try{var i=document.querySelector("[data-user-artwork-history]");if(i)for(;i.firstChild;)i.removeChild(i.firstChild);(function(e){var t=e&&e.icon?e.icon:null,i=e&&e.text?e.text:null,n=e&&e.type?"m-notification--"+e.type:null;if(i){var o="",r="";r='<div class="m-notification {{ type }}" data-behavior="notification"><p class="m-notification__text f-secondary">{{ icon }}{{ text }}</p><button class="m-notification__close" data-notification-closer=""><svg class="icon--close" aria-title="Close message"><use xlink:href="#icon--close"></use></svg></button></div>'.replace(/{{ text }}/gi,i),n&&(r=r.replace(/{{ type }}/gi,n)),t&&(o='<svg class="icon--{{ icon }}" aria-hidden="true"><use xlink:href="#icon--{{ icon }}"></use></svg>'.replace(/{{ icon }}/gi,e.icon),r=r.replace(/{{ icon }}/gi,o));var s=document.getElementById("content");s.insertAdjacentHTML("afterbegin",r),setTimeout((function(){d(s.firstChild)}),0),c(document,"page:updated")}})({icon:"check",text:"History cleared",type:"quaternary"}),c(document,"page:updated")}catch(e){t="error",console.log(e)}c(document,"loader:"+t)},onError:function(e){c(document,"loader:error"),console.log(e)}})}this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",n,!1)}},Ee=function(e){var t=e.getAttribute("data-add-url");this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){var e;t&&(e=(e=document.querySelector('meta[name="csrf-token"]'))?e.getAttribute("content"):"",i({url:t,type:"GET",requestHeaders:[{header:"X-CSRF-Token",value:e}],onSuccess:function(e){},onError:function(e){console.log(e)}}))}},be=function(e){this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){var t=e.getAttribute("data-maskEmail-user")+"@"+e.getAttribute("data-maskEmail-domain");e.setAttribute("href","mailto:"+t),e.setAttribute("target","_blank"),""===e.textContent&&(e.textContent=t)}},Te=function(e){var i=e.querySelector('input[type="search"]')||e.querySelector('input[type="text"]'),n=e;function o(o){o.preventDefault();var r,s=(r=i.value,encodeURIComponent(r).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))),a=e.getAttribute("data-ajax-scroll-target");if(s.length>0){c(document,"ajax:getPage",{url:t.updateParameter(n.action,"q",s),type:"page",ajaxScrollTarget:a});var l=T(e);l&&c(document,"gtm:push",l)}}this.destroy=function(){n.removeEventListener("submit",o),A17.Helpers.purgeProperties(this)},this.init=function(){n.addEventListener("submit",o,!1)}},xe=function(e){this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){var t;(t=l(e)).search&&""!==t.search&&c(document,"gtm:push",{event:t.search,eventCategory:"site-search"})}},Le=function(e){var t,i=!1;function n(){i=!0,e.classList.add("s-paused"),e.setAttribute("aria-label","Play video")}function o(){i=!1,e.classList.remove("s-paused"),e.setAttribute("aria-label","Pause video")}function r(e){e.preventDefault(),e.stopPropagation(),i?t.play():t.pause()}this.destroy=function(){t&&(e.removeEventListener("click",r),t.removeEventListener("play",o),t.removeEventListener("pause",n)),t=null,A17.Helpers.purgeProperties(this)},this.init=function(){(t=e.parentNode.querySelector("video"))&&(t.paused&&n(),e.addEventListener("click",r,!1),t.addEventListener("play",o,!1),t.addEventListener("pause",n,!1))}},Pe=function(e){var t=function(e){for(;(e=e.parentElement)&&!e.classList.contains("m-search-bar"););return e}(e),i="isSearchLimited",o="true"===n.read(i);function r(e){o=!o,n.create(i,o,1),s()}function s(){var i=e.getAttribute("value"),n=t.getAttribute("action");e.setAttribute("value",n),t.setAttribute("action",i)}this.destroy=function(){e.removeEventListener("click",r),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("click",r,!1),o&&(e.checked=!0,s())}},_e=function(e){function t(t){t.preventDefault();var i=e.getAttribute("data-url").replace("{query}",e.getElementsByTagName("input")[0].value);window.open(i)}this.destroy=function(){e.removeEventListener("submit",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("submit",t,!1)}},Ce=function(e){this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("contextmenu",(function(e){e.preventDefault()})),e.addEventListener("mousedown",(function(e){e.preventDefault()}))}},Ae=function(e){var t=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},i=document.documentElement.scrollTop||document.body.scrollTop,n=e.offsetHeight,o=t(e)+document.body.scrollTop,r=window.innerHeight||document.documentElement.clientHeight;function s(){(i=document.documentElement.scrollTop||document.body.scrollTop)>o+n-r?(document.documentElement.classList.contains("is-module3d-fixed")&&document.documentElement.classList.remove("is-module3d-fixed"),document.documentElement.classList.contains("is-module3d-bottom")||document.documentElement.classList.add("is-module3d-bottom")):i>o?(document.documentElement.classList.contains("is-module3d-bottom")&&document.documentElement.classList.remove("is-module3d-bottom"),document.documentElement.classList.contains("is-module3d-fixed")||document.documentElement.classList.add("is-module3d-fixed")):(document.documentElement.classList.contains("is-module3d-bottom")&&document.documentElement.classList.remove("is-module3d-bottom"),document.documentElement.classList.contains("is-module3d-fixed")&&document.documentElement.classList.remove("is-module3d-fixed"))}function a(){r=window.innerHeight||document.documentElement.clientHeight,n=e.offsetHeight,o=t(e)+document.body.scrollTop}this.destroy=function(){window.removeEventListener("resized",a),window.removeEventListener("scroll",s),document.removeEventListener("module3d:loaded",a),A17.Helpers.purgeProperties(this)},this.init=function(){window.addEventListener("scroll",s),window.addEventListener("resized",a),document.addEventListener("module3d:loaded",a),s(),a()}},ke=function(e){var t,i,n,o,r=document.documentElement.classList.contains("p-digitalpublicationarticle-show"),s=document.documentElement.classList.contains("p-digitalpublications-show"),a=document.documentElement.classList.contains("p-digitalpublications-showlisting"),l=document.documentElement.classList.contains("p-t-contributions"),u=document.documentElement.classList.contains("p-magazineissue-latest")||document.documentElement.classList.contains("p-magazineissue-show"),h=".m-article-actions--publication__logo",m=document.querySelector(h),p="is-sidebar-overlay",g=document.querySelector(".m-article-header"),f=document.documentElement.classList.contains(p),v=function(e){var t=document.documentElement.classList;["is-sidebar-top","is-sidebar-fixed","is-sidebar-bottom"].forEach((function(i){i!==e&&t.contains(i)&&t.remove(i)})),e&&!t.contains(e)&&t.add(e),i=e},y=function(){["is-sidebar-fixed","is-sidebar-bottom"].includes(i)&&e.scrollTo(0,0)};function w(){var i,n,o=document.querySelector(".o-article"),r=document.documentElement.classList.contains("s-unsticky-header"),l=document.documentElement.classList.contains("s-scroll-direction-up"),c=document.documentElement.classList.contains("s-sticky-digital-publication-header"),d=document.documentElement.classList.contains("s-unsticky-digital-publication-header"),h=document.querySelector(".g-header"),m=document.documentElement.scrollTop||document.body.scrollTop,p=c?g.clientHeight:0,f=r?h.clientHeight:0,y=0;if(m<t-p)S();else if(m+e.offsetHeight>o.offsetHeight+f)v("is-sidebar-bottom");else if(v("is-sidebar-fixed"),window.innerWidth>=1200&&((s||a)&&(y+=r?0:h.clientHeight,y+=d?0:g.clientHeight),u)){var w=(i=e,n=window.getComputedStyle(i),parseInt(n.getPropertyValue("padding-top")));y+=l?h.clientHeight-w:0}e.style.marginTop=y+"px"}function S(){y(),v("is-sidebar-top")}function E(){window.requestAnimationFrame(w)}function T(){S();for(var i=0,n=document.querySelectorAll(h),o=document.documentElement.classList.contains("s-sticky-digital-publication-header"),a=0;a<n.length;a++)i+=n[a].clientHeight;t=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}(e)+document.body.scrollTop,o&&(t-=g.offsetHeight),(r&&l||s)&&(t+=i),u&&(t-=30),m.setAttribute("style","display: block"),m.removeAttribute("style"),E()}function x(){f||(f=!0,history.replaceState(null,null," "),b("medium-")?(o=window.scrollY,n=document.activeElement||document.querySelector("body"),c(document,"body:lock",{breakpoints:"all"}),window.requestAnimationFrame((function(){document.documentElement.classList.add(p),setTimeout((function(){d(e)}),0),c(document,"focus:trap",{element:e})}))):document.documentElement.classList.add(p))}function L(){f&&(c(document,"body:unlock"),c(document,"focus:untrap"),setTimeout((function(){n&&d(n),setTimeout((function(){o&&window.scroll(0,o)}),0)}),0),document.documentElement.classList.remove(p),f=!1)}function P(){c(document,f?"stickySidebar:close":"stickySidebar:open")}function _(){L(),v(null)}function C(){f&&(c(document,"stickySidebar:close"),c(document,"stickySidebar:open"))}function A(e){f&&27===e.keyCode&&c(document,"stickySidebar:close")}this.destroy=function(){window.removeEventListener("resized",T),window.removeEventListener("scroll",E),document.removeEventListener("accordion:toggled",window.requestAnimationFrame(w)),document.removeEventListener("stickySidebar:open",x),document.removeEventListener("stickySidebar:close",L),document.removeEventListener("stickySidebar:toggle",P),document.removeEventListener("stickySidebar:clean",_),document.removeEventListener("mediaQueryUpdated",C),window.removeEventListener("hashchange",L),window.removeEventListener("keyup",A),A17.Helpers.purgeProperties(this)},this.init=function(){window.addEventListener("scroll",E),window.addEventListener("resized",T),document.addEventListener("accordion:toggled",(function(){window.requestAnimationFrame(w)}),!1),document.addEventListener("stickySidebar:open",x,!1),document.addEventListener("stickySidebar:close",L,!1),document.addEventListener("stickySidebar:toggle",P,!1),document.addEventListener("stickySidebar:clean",_,!1),document.addEventListener("mediaQueryUpdated",C,!1),window.addEventListener("hashchange",L,!1),window.addEventListener("keyup",A,!1),T(),E()}},Re=function(e){function t(){var e;e=this.value?this.value:this.getAttribute("data-target"),document.querySelectorAll(".selected").forEach((function(e){e.classList.remove("selected")}));var t=document.querySelectorAll('[id="'+e+'"]');t&&t.forEach((function(e){e.classList.add("selected")}))}function i(){document.querySelectorAll('[data-behavior="toggleFee"]').forEach((function(e){e.classList.remove("selected")})),e.classList.add("selected")}this.init=function(){"SELECT"===e.tagName?e.addEventListener("change",t,!1):(e.addEventListener("click",t,!1),e.addEventListener("click",i,!1))}},Oe=function(e){function t(){document.querySelectorAll(".admission-info-button-info").forEach((function(e){e.style.display="none",e.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),e.classList.remove("admission-info-visible")}))}function i(){document.querySelectorAll(".admission-info-button-info").forEach((function(e){if(void 0!==e.clientHeight){var t=-1*e.clientHeight+"px";e.setAttribute("style","top: "+t)}}))}function n(e){t()}function o(i){var n;i.preventDefault(),i.stopPropagation(),t(),(n=document.getElementById(e.dataset.tooltipTarget))&&(n.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false"),n.style.display="block",n.classList.add("admission-info-visible")),e.blur()}function r(e){var i="INPUT"===e.target.tagName;27!==e.keyCode||i||t()}this.destroy=function(){e.removeEventListener("click",o),document.removeEventListener("click",n),window.removeEventListener("resize",i),window.removeEventListener("keyup",r),A17.Helpers.purgeProperties(this)},this.init=function(){t(),i(),e.addEventListener("click",o,!1),document.addEventListener("click",n,!1),window.addEventListener("resize",i,!1),window.addEventListener("keyup",r,!1)}},Ie=function(e){if(e){var t=function(e){return[].slice.call(e)},i=3,n=[],o=null,r="requestAnimationFrame"in e?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1};e.cancelAnimationFrame(o);var i=function(){return a(n.filter((function(e){return e.dirty&&e.active})))};if(t.sync)return i();o=e.requestAnimationFrame(i)}:function(){},s=function(e){return function(t){n.forEach((function(t){return t.dirty=e})),r(t)}},a=function(e){e.filter((function(e){return!e.styleComputed})).forEach((function(e){e.styleComputed=d(e)})),e.filter(h).forEach(m);var t=e.filter(u);t.forEach(c),t.forEach((function(e){m(e),l(e)})),t.forEach(p)},l=function(e){return e.dirty=0},c=function(e){e.availableWidth=e.element.parentNode.clientWidth,e.currentWidth=e.element.scrollWidth,e.previousFontSize=e.currentFontSize,e.currentFontSize=Math.min(Math.max(e.minSize,e.availableWidth/e.currentWidth*e.previousFontSize),e.maxSize),e.whiteSpace=e.multiLine&&e.currentFontSize===e.minSize?"normal":"nowrap"},u=function(e){return 2!==e.dirty||2===e.dirty&&e.element.parentNode.clientWidth!==e.availableWidth},d=function(t){var i=e.getComputedStyle(t.element,null);return t.currentFontSize=parseFloat(i.getPropertyValue("font-size")),t.display=i.getPropertyValue("display"),t.whiteSpace=i.getPropertyValue("white-space"),!0},h=function(e){var t=!1;return!e.preStyleTestCompleted&&(/inline-/.test(e.display)||(t=!0,e.display="inline-block"),"nowrap"!==e.whiteSpace&&(t=!0,e.whiteSpace="nowrap"),e.preStyleTestCompleted=!0,t)},m=function(e){e.element.style.whiteSpace=e.whiteSpace,e.element.style.display=e.display,e.element.style.fontSize=e.currentFontSize+"px"},p=function(e){e.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:e.previousFontSize,newValue:e.currentFontSize,scaleFactor:e.currentFontSize/e.previousFontSize}}))},g=function(e,t){return function(i){e.dirty=t,e.active&&r(i)}},f=function(e){return function(){n=n.filter((function(t){return t.element!==e.element})),e.observeMutations&&e.observer.disconnect(),e.element.style.whiteSpace=e.originalStyle.whiteSpace,e.element.style.display=e.originalStyle.display,e.element.style.fontSize=e.originalStyle.fontSize}},v=function(e){return function(){e.active||(e.active=!0,r())}},y=function(e){return function(){return e.active=!1}},w=function(e){e.observeMutations&&(e.observer=new MutationObserver(g(e,1)),e.observer.observe(e.element,e.observeMutations))},S={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in e&&{subtree:!0,childList:!0,characterData:!0}},E=null,b=function(){e.clearTimeout(E),E=e.setTimeout(s(2),L.observeWindowDelay)},T=["resize","orientationchange"];return Object.defineProperty(L,"observeWindow",{set:function(t){var i="".concat(t?"add":"remove","EventListener");T.forEach((function(t){e[i](t,b)}))}}),L.observeWindow=!0,L.observeWindowDelay=100,L.fitAll=s(i),L}function x(e,t){var o=Object.assign({},S,t),s=e.map((function(e){var t=Object.assign({},o,{element:e,active:!0});return function(e){e.originalStyle={whiteSpace:e.element.style.whiteSpace,display:e.element.style.display,fontSize:e.element.style.fontSize},w(e),e.newbie=!0,e.dirty=!0,n.push(e)}(t),{element:e,fit:g(t,i),unfreeze:v(t),freeze:y(t),unsubscribe:f(t)}}));return r(),s}function L(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?x(t(document.querySelectorAll(e)),i):x([e],i)[0]}}("undefined"==typeof window?null:window),Me=function(e){function t(){Ie.fitAll()}this.destroy=function(){document.removeEventListener("fonts:loaded",t),r(e.querySelectorAll("img"),(function(e,i){i.removeEventListener("load",t)})),A17.Helpers.purgeProperties(this)},this.init=function(){Ie(".f-fit-text",{minSize:16,maxSize:36}),Ie(".f-fit-text-small",{minSize:10,maxSize:26}),document.addEventListener("fonts:loaded",t,!1),r(e.querySelectorAll("img"),(function(e,i){i.addEventListener("load",t,!1)}))}},He=function(e){var t,i,n,o,r,s,a,l,c,u=0,d=!0,h=2e3,m=5e3,p="is-slideshow-active";function g(){y(),f(),l=setTimeout((function(){v()}),h)}function f(){l&&clearTimeout(l)}function v(){y(),d&&(c=setTimeout((function(){++u>t.length-1&&(u=0),S(u),v()}),m))}function y(){c&&clearTimeout(c)}function w(e,t){t.forEach((function(e){e.classList.contains(p)&&e.classList.remove(p)})),void 0!==t[e]&&t[e].classList.add(p)}function S(e){u=e,w(e,t),w(e,i),w(e,n),w(e,s)}function E(e){var i=e.target.closest("a");S(Array.prototype.indexOf.call(t,i))}function b(e){var t=e.target.closest(".m-article-header__pip"),i=Array.prototype.indexOf.call(s,t);g(),S(i)}function T(e){e.preventDefault(),e.stopPropagation(),d?(d=!1,a.classList.add("s-paused"),a.setAttribute("aria-label","Play video"),y(),f()):(d=!0,a.classList.remove("s-paused"),a.setAttribute("aria-label","Pause video"),v())}this.destroy=function(){t.forEach((function(e){e.removeEventListener("mouseover",f),e.removeEventListener("mouseover",E),e.removeEventListener("mouseout",g)})),s.forEach((function(e){e.removeEventListener("click",b)})),a.removeEventListener("click",T),A17.Helpers.purgeProperties(this)},this.init=function(){t=e.querySelectorAll("a"),i=e.querySelectorAll(".m-article-header__img img.img-hero-desktop"),n=e.querySelectorAll(".m-article-header__img img.img-hero-mobile"),o=e.querySelector(".m-article-header__pips"),r=e.querySelector(".m-article-header__pip__template").innerHTML,a=e.querySelector(".m-article-header__play-pause"),t.forEach((function(e){e.addEventListener("mouseover",f,!1),e.addEventListener("mouseover",E,!1),e.addEventListener("mouseout",g,!1),o.insertAdjacentHTML("beforeend",r)})),(s=e.querySelectorAll(".m-article-header__pip")).forEach((function(e){e.addEventListener("click",b,!1)})),a.addEventListener("click",T,!1),S(0),v()}};var De=G();De.ImgixTileSource=function(e){if(this.imgixAutoParam="compress,format",De.extend(!0,this,e),!(this.height&&this.width&&this.baseUrl))throw new Error("ImgixTileSource required parameters not provided.");if(e.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)e.tileWidth=this.tile_width,e.tileHeight=this.tile_height;else if(this.tile_width)e.tileSize=this.tile_width;else if(this.tile_height)e.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)e.tileWidth=this.tiles[0].width,e.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var t=0;t<this.tiles.length;t++)for(var i=0;i<this.tiles[t].scaleFactors.length;i++){var n=this.tiles[t].scaleFactors[i];this.scale_factors.push(n),e.tileSizePerScaleFactor[n]={width:this.tiles[t].width,height:this.tiles[t].height||this.tiles[t].width}}}else{for(var o=Math.min(this.height,this.width),r=[256,512,1024],s=[],a=0;a<r.length;a++)r[a]<=o&&s.push(r[a]);s.length>0?e.tileSize=Math.max.apply(null,s):e.tileSize=o}e.maxLevel||(this.scale_factors?e.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):e.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),De.TileSource.apply(this,[e])},De.extend(De.ImgixTileSource.prototype,De.TileSource.prototype,{supports:function(e,t){return t?null!=t.match(/(\?|\&)osd=imgix(\&|$)/):e.type&&"imgix"==e.type},configure:function(e,t){return t?{width:e.PixelWidth,height:e.PixelHeight,baseUrl:t.replace(/\?.*$/,"")}:e},getTileWidth:function(e){var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].width:this._tileWidth},getTileHeight:function(e){var t=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[t]?this.tileSizePerScaleFactor[t].height:this._tileHeight},getTileUrl:function(e,t,i){var n,o,r,s,a,l,c,u,d,h,m=Math.pow(.5,this.maxLevel-e),p=Math.ceil(this.width*m),g=Math.ceil(this.height*m);return n=this.getTileWidth(e),o=this.getTileHeight(e),r=Math.ceil(n/m),s=Math.ceil(o/m),p<n&&g<o?(d=p,h=""):(a=t*r,l=i*s,c=Math.min(r,this.width-a),u=Math.min(s,this.height-l),d=Math.ceil(c*m),h=a+","+l+","+c+","+u),this.baseUrl+"?"+this.serializeQueryParams({auto:this.imgixAutoParam,fm:"jpg",rect:h,w:d})},serializeQueryParams:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}});const Be=function(e){var t,i,n=e.querySelector(".m-image-slider__handle"),o=e,r=JSON.parse(e.dataset.images),s=null,a=null,l=new(G().Rect)(0,0,0,0),c=new(G().Rect)(0,0,0,0);function u(){s&&a&&(l.height=s.getContentSize().y,c.height=a.getContentSize().y,d(),function(){var e,t,r,s,a=n.offsetWidth;function l(){e=o.offsetWidth,t=o.getBoundingClientRect().left+window.scrollX,r=t+10,s=t+e-a-10;var i,l=n.getBoundingClientRect().left+window.scrollX+a/2;(i=new Event("mousedown")).pageX=l,n.dispatchEvent(i),(i=new Event("mousemove")).pageX=l,o.dispatchEvent(i),n.dispatchEvent(new Event("mouseup"))}function c(l){var c=n.getBoundingClientRect().left+window.scrollX+a-l;function u(e){m(e.pageX)}function h(e){m(e.changedTouches[0].pageX)}function m(o){var l=o+c-a;l=Math.max(l,r);var u,h=(l=Math.min(l,s))+a/2-t,m=h/e*100+"%";n.style.left=m,u=h,i.x=u,d()}function p(e){o.removeEventListener("mousemove",u),o.removeEventListener("touchmove",h)}o.addEventListener("mousemove",u),o.addEventListener("touchmove",h),document.addEventListener("mouseup",p,{once:!0}),document.addEventListener("touchend",p,{once:!0}),event.preventDefault()}l(),window.addEventListener("resize",l),n.addEventListener("mousedown",(function(e){c(e.pageX)})),n.addEventListener("touchstart",(function(e){c(e.targetTouches[0].pageX)}))}())}function d(){var e=a.viewerElementToImageCoordinates(i).x,t=s.viewerElementToImageCoordinates(i).x;c.x=e,c.width=a.getContentSize().x-e,l.width=t,s.setClip(l),a.setClip(c)}var h=.5;function m(){if(a&&s){var e=t.viewport.centerSpringX.current.value,n=e-h;h=e;var o=t.viewport.viewerElementToViewportCoordinates(i);o.x+=n,p(a.viewportToImageCoordinates(o).x,s.viewportToImageCoordinates(o).x)}else window.setTimeout(m,200)}function d(){a&&s?p(a.viewerElementToImageCoordinates(i).x,s.viewerElementToImageCoordinates(i).x):window.setTimeout(d,200)}function p(e,t){c.x=e,c.width=a.getContentSize().x-e,l.width=t,s.setClip(l),a.setClip(c)}this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){t=G()({element:o,xmlns:"http://schemas.microsoft.com/deepzoom/2008",prefixUrl:"//openseadragon.github.io/openseadragon/images/",springStiffness:15,visibilityRatio:1,zoomPerClick:r.isSliderZoomable?1.3:1,constrainDuringPan:!0,animationTime:1.5,minZoomLevel:0,maxZoomPixelRatio:1,minZoomImageRatio:1,gestureSettingsMouse:{scrollToZoom:!1},zoomInButton:r.zoomInButtonId,zoomOutButton:r.zoomOutButtonId,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!1,showRotationControl:!1,showSequenceControl:!1}),i=new(G().Point)(o.clientWidth/2,o.clientHeight/2),t.addHandler("animation-start",d),t.addHandler("animation",m),t.addTiledImage({tileSource:r.leftImage,success:function(e){s=e.item,u()}}),t.addTiledImage({tileSource:r.rightImage,success:function(e){a=e.item,u()}})}},Fe=function(e){var t=function(e){var t=e.offsetHeight,i=getComputedStyle(e);return t+(parseInt(i.marginTop)+parseInt(i.marginBottom))},i=document.querySelector(".o-article__body"),n=document.querySelector(".o-article__secondary-actions"),o=n.querySelectorAll(".m-listing"),r="o-article--disable-float-clear",s="m-listing--visible";function a(){i.classList.add(r),o.forEach((function(e){e.classList.add(s)}));for(var e=t(i),a=t(n),l=0;a>e&&l<o.length;)o[o.length-(l+1)].classList.remove(s),a=t(n),l++;i.classList.remove(r)}this.destroy=function(){window.removeEventListener("resized",a),A17.Helpers.purgeProperties(this)},this.init=function(){window.addEventListener("resized",a),a()}},ze=function(e){function t(t){t.preventDefault();var i=e.querySelectorAll('input[type="checkbox"]');r(i,(function(e,t){t.removeAttribute("disabled")})),e.submit(),r(i,(function(e,t){t.setAttribute("disabled",!0)}))}this.destroy=function(){e.removeEventListener("submit",t),A17.Helpers.purgeProperties(this)},this.init=function(){e.addEventListener("submit",t,!1)}},Ne=function(e){var t=document.getElementsByClassName("explore-further-injected")[0];function n(n){t.classList.add("s-loading"),document.querySelectorAll(".s-active").forEach((function(e){e.classList.remove("s-active")})),e.parentElement.classList.add("s-active"),i({url:n,type:"GET",onSuccess:function(e){try{i=JSON.parse(e).html,t.innerHTML=i,c(document,"page:updated"),window.picturefill&&window.picturefill(),t.classList.remove("s-loading")}catch(e){console.log(e),t.classList.remove("s-loading")}var i},onError:function(e){console.log(e),t.classList.remove("s-loading")}})}this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){var t;(t=document.querySelectorAll("[data-ajax-url-target]")[0]).parentElement.classList.contains("s-active")||(t.parentElement.classList.add("s-active"),n(t.getAttribute("data-ajax-url-target"))),e.addEventListener("click",(function(){n(e.getAttribute("data-ajax-url-target"))}),!1)}};function qe(e){var t=["mouseenter","focus","click"],i={scroll:document,mouseleave:e},n='ul[role="menubar"]',o='ul[role="menu"]',r='li[role="none"]',s='a[role="menuitem"]',a="aria-haspopup",l="aria-expanded",c="collapsing",u=new URLSearchParams({fields:"title,image_url,web_url","query[bool][must][][range][aic_start_at][lte]":"now","query[bool][must][][term][is_published]":!0,"query[bool][must][][term][position]":0,size:1}),d=new URLSearchParams({h:"auto",w:240}),h=e.querySelector(n).querySelectorAll(s),m=e.querySelector(".exhibitions .details__container"),p=e.querySelector("#menu-featured-exhibition");function g(e){var t=e.target.closest(s);y(),w(t),Object.keys(i).forEach((function(e){i[e].addEventListener(e,f)}))}function f(e){y(),document.removeEventListener(e.type,f)}function v(e){var t=e.data[0],i="".concat(t.image_url,"&").concat(d.toString()),n=p.content.cloneNode(!0);n.querySelector("a").setAttribute("href",t.web_url),n.querySelector("img").setAttribute("src",i),n.querySelector(".title").textContent=t.title,m.querySelector("a").remove(),m.prepend(n)}function y(){h.forEach((function(e){e.classList.remove(c),"true"===e.getAttribute(a)&&("true"===e.getAttribute(l)&&e.classList.add(c),e.setAttribute(l,"false"))}))}function w(e){"true"===e.getAttribute(a)&&e.setAttribute(l,"true");var t=e.closest("".concat(n,", ").concat(o)).closest(r);t&&w(t.querySelector(s))}this.init=function(){var i;i=new URL("".concat("/api/v1/exhibitions/search","?").concat(u.toString()),e.dataset.apiUrl),fetch(i,{headers:{"Cache-Control":"max-age=86400"}}).then((function(e){return e.json()})).then(v),h.forEach((function(e){t.forEach((function(t){e.addEventListener(t,g)}))}))}}const je=function(e){var t=document.getElementById("stories-header__date"),n=document.getElementById("stories-header__hours");this.destroy=function(){A17.Helpers.purgeProperties(this)},this.init=function(){i({url:"/ajaxData?q=editorialHeader",type:"GET",onSuccess:function(e){try{!function(e){t.innerHTML=e.date,n.innerHTML=e.hours,c(document,"page:updated"),window.picturefill&&window.picturefill()}(JSON.parse(e))}catch(e){console.log(e)}},onError:function(e){console.log(e)}})}},We=function(e){var t=e.getAttribute("data-target-model"),n=e.getAttribute("data-target-id"),o=document.querySelector("#related-sidebar-items");this.init=function(){i({url:"/ajaxData?q=relatedSidebarItems&model=".concat(t,"&id=").concat(n),type:"GET",onSuccess:function(e){try{!function(e){if(o){var t=JSON.parse(e);o.innerHTML=t.html,function(){var e,t,i,n,o=document.querySelector("#related-sidebar-items"),r=(e=document.querySelectorAll(".o-gallery--mosaic")[0],t=o.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.bottom+window.scrollY,i.top+window.scrollY-n),s=o.querySelectorAll(".m-listing");r<0&&s.forEach((function(e,t){0!==t&&e.classList.add("hidden")}))}()}c(document,"page:updated"),window.picturefill&&window.picturefill()}(e)}catch(e){console.log(e)}},onError:function(e){console.log(e)}})}},Ue=function(e){function t(t){t.preventDefault();var i=e.querySelector(".o-accordion__trigger"),n=document.getElementById("panel_"+i.id),o=window.scrollY,r="true"===i.getAttribute("aria-expanded");i.setAttribute("aria-expanded",!r),r?(n.style.transition="opacity 0.5s ease",n.style.opacity="0",setTimeout((function(){n.style.height="0"}),500)):(n.style.height="auto",n.style.opacity="0",n.style.transition="opacity 0.5s ease",setTimeout((function(){n.style.opacity="1"}),10)),i.classList.toggle("is-active"),r?setTimeout((function(){window.scrollTo({top:o,behavior:"instant"}),c(document,"accordion:toggled")}),500):(window.scrollTo({top:o,behavior:"instant"}),c(document,"accordion:toggled"))}this.init=function(){e.addEventListener("click",t)}},Ve=function(e){var t,i,n,o=180,r="s-sticky-digital-publication-header",s="s-shrinking-digital-publication-header",a=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},l=function(e){var i=document.documentElement.classList;[r,s].forEach((function(t){t!==e&&i.contains(t)&&i.remove(t)})),e&&!i.contains(e)&&i.add(e),t=e};function c(){window.requestAnimationFrame(d)}function u(){i=a(e)+e.offsetHeight,document.querySelector(".g-header").clientHeight,c()}function d(){n=document.documentElement.scrollTop||document.body.scrollTop,l(n<.75*(i-o)?null:n<i-o?s:r)}this.destroy=function(){window.removeEventListener("scroll",c),A17.Helpers.purgeProperties(this)},this.init=function(){window.addEventListener("resized",u),window.addEventListener("scroll",c),u(),t==r&&e.scrollTo(0,0),c()}};var Ge=__webpack_require__(27870);const $e=function(e){this.init=function(){var t;t=Ge.textContrast.isLightOrDark(e.dataset.backgroundColor),e.classList.add("s-".concat(t,"-background"))}};var Ze=window.A17||{};if(!Ze.browserSpec||"html4"===Ze.browserSpec)throw new Error("HTML4");Ze.currentMediaQuery=s(),Ze.currentPathname=window.location.pathname,Ze.dateRangeValues=["8000 BCE","7000 BCE","6000 BCE","5000 BCE","4000 BCE","3000 BCE","2000 BCE","1000 BCE","1 CE","500 CE","1000 CE","1200","1400","1600","1700","1800","1900","1910","1920","1930","1940","1950","1960","1970","1980","1990","2000","2010","2020","Present"],Ze.onYouTubeIframeAPIReady=!1;try{Ze.env=/s-env-([a-z]*)/gi.exec(document.documentElement.className)[1]}catch(e){Ze.env="unknown"}Ze.ajaxLinksActive=!0,Ze.ajaxLinksFailSafe="production"===Ze.env,window.A17=Ze,document.addEventListener("DOMContentLoaded",(function(){if(Ze.print)return r(document.querySelectorAll("[data-src]"),(function(e,t){try{t.src=t.getAttribute("data-src")}catch(e){}})),void r(document.querySelectorAll("[data-srcset]"),(function(e,t){try{t.srcset=t.getAttribute("data-srcset")}catch(e){}}));var o,h,m,g,f,v,y,w,S,P,_,C,A,k,R,O,I,M;(function(){function e(){var e=document.querySelector("a"),t=document.querySelector("h1");if(t){var i=document.querySelector("#content-h1");i&&i.forEach((function(e){t.removeAttr("id")})),t.setAttribute("id","content-h1"),e&&e.setAttribute("href","#content-h1")}else e&&e.setAttribute("href","#content")}e(),document.addEventListener("DOMContentLoaded",e,!1),document.addEventListener("ajaxPageLoad:complete",e,!1)})(),document.addEventListener("gtm:push",(function(e){e.data&&(Array.isArray(e.data)?e.data:[e.data]).forEach((function(e){window.dataLayer=window.dataLayer||[],"Pageview"===e.event?window.dataLayer.push(e):(e.eventPageTitle=document.title.replace(/ \| The Art Institute of Chicago/gi,""),e.eventPagePathName=window.location.pathname,e.eventPageUrl=window.location.href,"production"!==A17.env&&console.log("gtm:dataLayerPush",e),window.dataLayer.push({event:"dataLayerPush",data:e}))}))}),!1),window.addEventListener("load",(function(){var e=document.getElementById("page-meta-data");if(e){var t=Object.assign({event:"page-meta-data"},JSON.parse(e.innerHTML));c(document,"gtm:push",t)}})),function(e,t){const i={};var n=0,o=t&&t.pageUpdatedEventName?t.pageUpdatedEventName:"page:updated";function r(t){void 0===t&&(t=document);for(var o=t.querySelectorAll("[data-behavior]"),r=-1;o[++r];){var s=o[r];if(!s._A17BehaviorsActive)for(var a=s.getAttribute("data-behavior").split(" "),l=0,c=a.length;l<c;l++){var u=e[a[l]];if(void 0!==u)try{s._A17BehaviorsActive=!0,i[n]={el:s,behavior:new u(s),name:a[l]};try{i[n].behavior.init()}catch(e){console.warn("failed to init behavior: ",i[n].name,"\n",e,i[n])}n++}catch(e){console.error(e,s,u)}}}}r(),document.addEventListener(o,(function(){for(var e in i)if(i.hasOwnProperty(e)){var t=i[e];if(!document.body.contains(t.el))try{t.behavior.destroy(),delete i[e]}catch(e){}}r()})),document.addEventListener("content:updated",(function(){r(event.data.el?event.data.el:"")}))}(e),I=0,M=!1,document.addEventListener("body:lock",(function(e){"all"===e.data.breakpoints&&(e.data.breakpoints="xsmall small medium large xlarge"),e.data.breakpoints.indexOf(A17.currentMediaQuery)>-1&&(c(document,"setScrollDirection:machineScroll",{machineScroll:!0}),M=!0,I=window.pageYOffset,document.getElementById("a17").style.top=-1*I+"px",window.requestAnimationFrame((function(){document.documentElement.classList.add("s-body-locked")})))}),!1),document.addEventListener("body:unlock",(function(){M&&(M=!1,document.getElementById("a17").style.top="",document.documentElement.classList.remove("s-body-locked"),window.scrollTo(0,I),setTimeout((function(){window.scrollTo(0,I),I=0,c(document,"setScrollDirection:machineScroll",{machineScroll:!1})}),1))}),!1),function(){var e;function t(){e?document.activeElement===e||e.contains(document.activeElement)||setTimeout((function(){d(e)}),0):document.removeEventListener("focus",i)}function i(i){try{document.removeEventListener("focus",t)}catch(e){}(i||i.data.element)&&(e=i.data.element,document.addEventListener("focus",t,!0))}document.addEventListener("focus:trap",i,!1),document.addEventListener("focus:untrap",(function(){document.removeEventListener("focus",i),e=null}),!1)}(),k="data-focus-method",R="touch",O=!1,document.addEventListener("keydown",(function(){O="key"}),!0),document.addEventListener("mousedown",(function(){O!==R&&(O="mouse")}),!0),document.addEventListener("touchstart",(function(){O=R}),!0),document.addEventListener("focus",(function(e){O||(O=A),e.target&&"function"==typeof e.target.setAttribute&&(e.target.setAttribute(k,O),A=O,O=!1)}),!0),document.addEventListener("blur",(function(e){e.target&&"function"==typeof e.target.removeAttribute&&e.target.removeAttribute(k)}),!0),window.addEventListener("blur",(function(){O=!1})),document.addEventListener("click",(function(e){if(e.target.host===window.location.host&&e.target.pathname===window.location.pathname&&e.target.hash){e.preventDefault(),e.stopPropagation(),e.target.classList.contains("return-link")&&c(document,"setScrollDirection:machineScroll",{machineScroll:!0});var t=window.location.hash!==e.target.hash,i=e.target.hash.replace("#",""),n=document.getElementById(i),o=a(n).top-20;e.target.blur(),c(document,"navMobile:close"),u({el:document,offset:o,duration:500,easing:"easeInOut",onComplete:function(){setTimeout((function(){d(n)}),0),e.target.classList.contains("return-link")&&c(document,"setScrollDirection:machineScroll",{machineScroll:!1}),t&&(i="a17"===i||"content"===i?window.location.href.replace(window.location.hash,""):"#"+i,c(document,"history:pushstate",{url:i,type:"anchor",title:document.title}))}})}}),!1),window.addEventListener("hashchange",(function(e){e.preventDefault();var t=document.body,i=0;if(window.location.hash){var n=window.location.hash.replace("#","");t=document.getElementById(n),i=a(t).top-20}u({el:document,offset:i,duration:500,easing:"easeInOut",onComplete:function(){setTimeout((function(){d(t)}),0)}})}),!1),function(){var e=window.location.hash;if(e){var t=document.getElementById(e.substring(1));if(t){var i=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}(t),n=document.querySelectorAll(".m-article-header--digital-publication")[0];if(n){var o=n.getBoundingClientRect().height;i-=o+60}window.requestAnimationFrame((function(){window.scrollTo({top:i,behavior:"instant"})}))}}}(),function(){var e="s-modal-active",i=document.getElementById("modal"),n=(document.getElementById("modal-promo"),!1);function o(){n&&(c(document,"body:unlock"),c(document,"focus:untrap"),document.documentElement.classList.remove(e),setTimeout((function(){d(document.getElementById("a17"))}),0),setTimeout((function(){i.className="g-modal",i.querySelector("[data-modal-content]").innerHTML=""}),300),n=!1)}document.addEventListener("modal:close",o,!1),document.addEventListener("modal:open",(function(r){o(),r&&r.data.type&&("media"===r.data.type&&(n=function(e){var n=e.data.embedCode;if(e.data.restricted?i.classList.add("g-modal--restricted"):i.classList.remove("g-modal--restricted"),e.data.module3d?i.classList.add("g-modal--module3d"):i.classList.remove("g-modal--module3d"),e.data.module360?i.classList.add("g-modal--module360"):i.classList.remove("g-modal--module360"),e.data.moduleMirador?i.classList.add("g-modal--moduleMirador"):i.classList.remove("g-modal--moduleMirador"),n){i.classList.add("g-modal--media"),e.data.subtype&&i.classList.add("g-modal--media-"+e.data.subtype);try{var o=L(n,"native").body.firstElementChild,r=o.getAttribute("data-embed-src");r=(r=r||o.getAttribute("data-src"))||o.getAttribute("src"),r=t.updateParameter(r,"autoplay","1"),(r=t.updateParameter(r,"auto_play","1")).indexOf("youtube.com")>-1&&(r=t.updateParameter(r,"enablejsapi","1"),r=t.updateParameter(r,"origin",window.location.origin)),o.src=r,i.querySelector("[data-modal-content]").innerHTML="",i.querySelector("[data-modal-content]").appendChild(o),r.indexOf("youtube.com")>-1&&x(o)}catch(e){console.log(e),i.querySelector("[data-modal-content]").innerHTML=n}return!0}return!1}(r)),n&&(c(document,"body:lock",{breakpoints:"all"}),window.requestAnimationFrame((function(){document.documentElement.classList.add(e),setTimeout((function(){d(i)}),0),c(document,"focus:trap",{element:i}),c(document,"page:updated")}))))}),!1),window.addEventListener("resized",(function(){n&&(console.log("resized"),i.style.display="none",window.requestAnimationFrame((function(){i.style.display=""})))}),!1),window.addEventListener("keyup",(function(t){document.documentElement.classList.contains(e)&&27===t.keyCode&&c(document,"modal:close")}),!1)}(),function(){var e="s-roadblock-active",t="s-roadblock-defined",o=document.getElementById("modal"),r=document.getElementById("slider-promo"),s=!1,a=!1,u=null,h=null,m=!1,p="has_seen_lightbox";function g(){if(document.documentElement.classList.contains(t)){var e=document.getElementsByClassName("g-slider--promo--template");if(!(e.length<1)){var o=n.read(p)||"",r=Array.prototype.map.call(e,(function(e){return e.dataset.expires})),s=r.every((function(e,t,i){return e===i[0]}));if(!(o&&s&&r[0]>0)){var a=Array.prototype.map.call(e,(function(e){return e.dataset.geotarget}));m=!1,a.includes("all")?f("all"):null!==h?f(h?"local":"not-local"):(m=!0,i({url:"/api/v1/geotarget",type:"GET",onSuccess:function(e){f((h=null===(h=JSON.parse(e).is_local)||h)?"local":"not-local"),m=!1},onError:function(e){f("local"),m=!1}})),setTimeout(v,3e3)}}}}function f(e){var i=document.querySelector('.g-slider--promo--template[data-geotarget="'+e+'"]');if(i)r.dataset.expires=i.dataset.expires,r.innerHTML=i.innerHTML,c(r,"content:updated",{el:r}),document.documentElement.classList.add(t);else switch(e){case"local":f("all");break;case"all":document.documentElement.classList.remove(t)}}function v(i){if(document.documentElement.classList.contains(t)){if(m){if(!i)return void setTimeout((function(){v(!0)}),2e3);f("local")}if(""!==r.innerHTML){m=!1;var o=n.read(p)||"",l=parseInt(r.getAttribute("data-expires"))/60/60/24;if(!(o&&l>0)){document.documentElement.classList.add(e),a=null!==r.querySelector(".g-slider--promo__variation--newsletter"),u=null,s=!0,r.querySelector("form").addEventListener("submit",y,!0),l>0?n.create(p,!0,l):n.delete(p);var c=r.getElementsByTagName("button")[0];setTimeout((function(){c.classList.remove("btn--secondary"),c.classList.add("btn--animating"),setTimeout((function(){c.classList.remove("btn--animating")}),900)}),1200)}}}}function y(e){var t=document.getElementById("edit-submitted-first-name"),o=document.getElementById("edit-submitted-last-name"),s=document.getElementById("edit-submitted-mail"),u=document.getElementById("edit-submitted-tlcsource");if(a)return function(e){var t,n=r.querySelector("form");e.preventDefault(),e.stopPropagation(),S(),(t=r.querySelector("button")).classList.add("s-loading"),t.setAttribute("disabled","disabled");var o=l(n);i({url:n.action||"/subscribe",type:"POST",requestHeaders:[{header:"Content-Type",value:"application/x-www-form-urlencoded; charset=UTF-8"},{header:"X-CSRF-Token",value:document.querySelector("meta[name=csrf-token]").getAttribute("content")||""}],data:o,onSuccess:function(e){try{e=JSON.parse(e),n.classList.remove("s-loading"),n.setAttribute("disabled","disabled"),n.querySelector("input[name=email]").value="",E("success",e.message||e.email),c(document,"gtm:push",{event:"sign-up",eventCategory:"subscribe"})}catch(t){console.error("Error submitting newsletter sign up (a)"),console.log(t,e),E("error")}w()},onError:function(e){try{E("error",(e=JSON.parse(e)).message||e.email)}catch(t){console.error("Error submitting newsletter sign up (b)"),console.log(e,t),E("error")}w()}})}(e);var d=encodeURIComponent(JSON.stringify({firstname:t?t.value:null,lastname:o?o.value:null,email:s?s.value:null,tlcsource:u?u.value:null}));d+=";domain=.artic.edu",n.create("tlc_lb_signup",d,30);var h=T(e.target);h&&c(document,"gtm:push",h),c(document,"roadblock:close")}function w(){var e=r.querySelector("button");e.classList.remove("s-loading"),e.removeAttribute("disabled")}function S(){r.classList.remove("g-slider--msg-active");var e=r.querySelector(".g-slider--promo__variation--newsletter"),t=r.querySelector("form");u&&(e.removeChild(u),u=null),t.classList.remove("s-success"),t.classList.remove("s-error")}function E(e,t){var i=r.querySelector(".g-slider--promo__variation--newsletter");S();var n=document.createElement("div");n.className="g-slider__msg__content",(u=document.createElement("div")).className="g-slider__msg f-buttons","success"===e?(u.className+=" g-slider__msg--success",n.textContent=t||"Successfully signed up to the newsletter",i.classList.add("s-success")):"error"===e&&(u.className+=" g-slider__msg--error",n.textContent=t||"Error signing up to the newsletter",i.classList.add("s-error")),r.classList.add("g-slider--msg-active"),u.append(n),i.prepend(u)}document.addEventListener("roadblock:close",(function(){document.documentElement.classList.remove(e),s&&(c(document,"body:unlock"),c(document,"focus:untrap"),document.documentElement.classList.remove("s-modal-active"),setTimeout((function(){d(document.getElementById("a17"))}),0),setTimeout((function(){o.className="g-slider",o.querySelector("[data-modal-content]").innerHTML=""}),300),s=!1)}),!1),window.addEventListener("keyup",(function(t){document.documentElement.classList.contains(e)&&27===t.keyCode&&c(document,"roadblock:close")}),!1),document.addEventListener("ajaxPageLoad:complete",g,!1),g()}(),C=document.documentElement.classList.contains("s-collection-filters-active"),document.addEventListener("collectionFilters:open",(function(){C||(C=!0,b("small-")?(_=window.scrollY,P=document.activeElement||document.querySelector("body"),c(document,"body:lock",{breakpoints:"all"}),window.requestAnimationFrame((function(){document.documentElement.classList.add("s-collection-filters-active");var e=document.getElementById("collectionFilters");e&&(setTimeout((function(){d(e)}),0),c(document,"focus:trap",{element:e}))}))):document.documentElement.classList.add("s-collection-filters-active"))}),!1),document.addEventListener("collectionFilters:close",(function(){C&&(c(document,"body:unlock"),c(document,"focus:untrap"),setTimeout((function(){d(P),setTimeout((function(){window.scroll(0,_)}),0)}),0),document.documentElement.classList.remove("s-collection-filters-active"),C=!1)}),!1),document.addEventListener("collectionFilters:toggle",(function(){c(document,C?"collectionFilters:close":"collectionFilters:open")}),!1),document.addEventListener("mediaQueryUpdated",(function(){C&&(c(document,"collectionFilters:close"),c(document,"collectionFilters:open"))}),!1),p(),function(){var e=!1;document.addEventListener("ajaxPageLoadMask:show",(function(){e||(e=!0,document.documentElement.classList.add("s-ajaxPageLoadMask-active"))}),!1),document.addEventListener("ajaxPageLoadMask:hide",(function(){e&&(e=!1,document.documentElement.classList.remove("s-ajaxPageLoadMask-active"))}),!1)}(),window.history.pushState&&(document.addEventListener("history:replacestate",(function(e){"about:srcdoc"!==e.data.url&&history.replaceState(e.data,"",e.data.url)}),!1),document.addEventListener("history:pushstate",(function(e){history.pushState(e.data,"",e.data.url)}),!1),window.addEventListener("popstate",(function(e){e&&e.state&&e.state.type&&c(document,"ajax:pageload:popstate",e.state)}),!1),c(document,"history:replacestate",{url:location.href,type:"page"})),function(){var e,t=null,i=null,n=0;function o(){n+=.2*(90-n),i.style.width=n+"%",e=setTimeout(o,2e3*Math.random())}function r(){document.body.removeChild(t),t=null,i=null,n=0}document.addEventListener("loader:start",(function(){t&&r(),(t=document.createElement("span")).className="progress-bar",(i=document.createElement("span")).style.opacity=0,t.appendChild(i),document.body.appendChild(t),setTimeout((function(){i.style.opacity=1})),e=setTimeout((function(){n+=.4*(90-n),i.style.width=n+"%",o()}),250)})),document.addEventListener("loader:complete",(function(){try{clearTimeout(e)}catch(e){}i.style.width="100%",setTimeout(r,250)})),document.addEventListener("loader:error",(function(){try{clearTimeout(e)}catch(e){}i.style.width="0%",setTimeout(r,250)}))}(),function(){var e,t=s();window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){var e=s();c(document,"resized"),e!==t&&(t=e,window.A17&&(window.A17.currentMediaQuery=e),c(document,"mediaQueryUpdated"))}),250)}))}(),o=document.documentElement,h=0,m=!1,g=!1,f=!1,v=!1,y=0,w=-1,S={25:{pos:0,hit:!1},50:{pos:0,hit:!1},75:{pos:0,hit:!1},100:{pos:0,hit:!1}},document.addEventListener("setScrollDirection:machineScroll",(function(e){window.requestAnimationFrame((function(){h=-1,v=e.data.machineScroll}))}),!1),document.addEventListener("page:updated",(function(e){w=-1}),!1),function e(){var t=document.documentElement.scrollTop||document.body.scrollTop;if(y=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight,w!=y&&(w=y,function(){for(var e in S){var t=100===e?(e-5)/100:e/100;S[e].pos=parseInt(y*t,10),S[e].hit=!1}}()),t===h||v)h=t;else{if(y>150)for(var i in S)t>=S[i].pos&&!S[i].hit&&(S[i].hit=!0,-1===window.location.href.indexOf("/interactive-features")&&c(document,"gtm:push",{event:(o.classList.contains("p-artworks-show")?"artwork-":"")+i+"%",eventCategory:"scroll-tracking"}));t>100&&!g?o.classList.contains("s-unsticky-header")||(o.classList.add("s-header-hide"),g=!0):t<=100&&g&&(o.classList.remove("s-header-hide"),g=!1),t>500&&!f?(o.classList.add("s-allow-top-link"),f=!0):t<=500&&f&&(o.classList.remove("s-allow-top-link"),f=!1),t>h+10&&"down"!==m?(m="down",o.classList.remove("s-scroll-direction-up"),o.classList.add("s-scroll-direction-down")):t<h-10&&"up"!==m?(m="up",o.classList.remove("s-scroll-direction-down"),o.classList.add("s-scroll-direction-up")):h=t}window.requestAnimationFrame(e)}(),function(){function e(){var e=document.getElementsByTagName("header")[0],t=document.getElementById("a17");if(t.style["padding-top"]=null,e.getElementsByClassName("m-notification--header").length<1)return null;parseInt(getComputedStyle(t)["padding-top"],10)>0&&(t.style["padding-top"]=e.offsetHeight+"px")}document.addEventListener("notification:confirmed",e,!1),document.addEventListener("ajaxPageLoad:complete",e,!1),window.addEventListener("resized",e,!1),e()}(),E({name:"serif",variants:[{name:"Sabon",weight:"400",style:"normal"},{name:"Sabon",weight:"400",style:"italic"},{name:"Sabon",weight:"500",style:"normal"}]}),E({name:"sans-serif",variants:[{name:"Ideal Sans A"},{name:"Ideal Sans B",weight:"400",style:"italic"}]}),function(e){var t,i,n,o,r,s={pageUpdatedEventName:"page:updated",elements:"img[data-src], img[data-srcset], source[data-srcset], iframe[data-src], video[data-src], [data-lazyload]",rootMargin:"0px",threshold:0,maxFrameCount:10},a=[];function l(e){e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-lazyload")}function c(){this.removeEventListener("load",c),l(this)}function u(e){var t=e.getAttribute("data-srcset"),i=e.getAttribute("data-src"),n=null!==e.getAttribute("data-lazyload");t&&(e.setAttribute("srcset",t),window.picturefill&&window.picturefill({elements:[e]})),i&&(e.src=i),n&&(e.setAttribute("data-lazyloaded",""),e.removeEventListener("load",c),l(e))}function d(e){0===n&&o.disconnect();for(var t=0;t<e.length;t++){var i=e[t];i.intersectionRatio>0&&(n--,o.unobserve(i.target),i.target.addEventListener("load",c,!1),u(i.target))}}function h(){var e,m,p;if("really-old"===r){for(n=a.length,e=0;e<n;e++)a[e]&&(u(a[e]),l(a[e]));a=[]}else if("old"===r){if(i===s.maxFrameCount){for(n=a.length,e=0;e<n;e++)if(a[e]&&void 0===a[e].lazyloaded&&(p=(m="SOURCE"===(m=a[e]).tagName?m.parentNode:m).getBoundingClientRect()).bottom>0&&p.right>0&&p.left<(window.innerWidth||document.documentElement.clientWidth)&&p.top<(window.innerHeight||document.documentElement.clientHeight)){var g=a[e];a[e]=void 0,g.lazyloaded=!0,g.addEventListener("load",c,!1),u(g)}for(e=0;e<n;e++)void 0===a[e]&&a.splice(e,1);n=a.length,i=-1}n>0&&(i++,t=window.requestAnimationFrame(h))}else if("new"===r)for(o=new IntersectionObserver(d,{rootMargin:s.rootMargin,threshold:s.threshold}),n=a.length,e=0;e<n;e++)a[e]&&void 0===a[e].lazyloaded&&o.observe(a[e])}function m(){if("old"===r)try{cancelAnimationFrame(t)}catch(e){}else if("new"===r)try{o.disconnect()}catch(e){}a=function(e){var t=[],i=0;for(t=[],i=e.length;i;)t[--i]=e[i];return t}(document.querySelectorAll(s.elements)),n=a.length,i=s.maxFrameCount,h()}!function(){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);r="addEventListener"in window&&window.requestAnimationFrame&&void 0!==typeof document.body.getBoundingClientRect?"IntersectionObserver"in window?"new":"old":"really-old",m(),s.pageUpdatedEventName&&document.addEventListener(s.pageUpdatedEventName,m,!0)}()}({rootMargin:"200px 0px",threshold:.01,maxFrameCount:20})})),window.onYouTubeIframeAPIReady=function(){Ze.onYouTubeIframeAPIReady=!0},"undefined"==typeof console&&(window.console={log:function(){}}),document.addEventListener("ajaxPageLoad:complete",(function e(){"scrollRestoration"in history&&(history.scrollRestoration="manual",document.removeEventListener("ajaxPageLoad:complete",e))}),!1),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,i=(this.document||this.ownerDocument).querySelectorAll(e),n=this;do{for(t=i.length;--t>=0&&i.item(t)!==n;);}while(t<0&&(n=n.parentElement));return n})})()})();
//# sourceMappingURL=app-12cef005390eb4bff4a9.js.map